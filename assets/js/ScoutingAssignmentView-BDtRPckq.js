import{_ as he}from"./CachedAvatar-BtzP3KLJ.js";import{I as Be}from"./ui-vendor-Dw_Tg2Bf.js";import{l as U,g as me,u as ze,c as F,_ as qe}from"./index-MgNogqk5.js";import{d as Qe,X as Ve,e as ce,o as Oe,r as w,c as z,y as l,k as d,l as t,q as p,C as I,H as f,N as D,a0 as R,F as N,z as S,D as g,G as T,O as G,V as P,B as ge,T as pe,x as Re}from"./vue-vendor-BXjljxxF.js";import{S as C}from"./sweetalert2.esm.all-CZCIYDgo.js";import"./utils-CAMFpqwB.js";class Ge{queue=[];isProcessing=!1;concurrentLimit=3;intervalMs=1e3;logOperations=!1;constructor(){this.logOperations=!1}add(e){e.url&&this.queue.some(i=>i.url===e.url)||(this.queue.push(e),this.logOperations&&U.debug(`Added avatar to preload queue: ${e.url||"(default)"} (${e.userId})`),this.isProcessing||this.processQueue())}addBatch(e){if(!e||e.length===0)return;const i=e.filter(b=>!b.url||!this.queue.some(_=>_.url===b.url));this.queue.push(...i),this.logOperations&&U.debug(`Added ${i.length} avatars to preload queue (${e.length-i.length} duplicates skipped)`),this.isProcessing||this.processQueue()}async processQueue(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;try{const e=this.queue.splice(0,this.concurrentLimit);this.logOperations&&U.debug(`Preloading ${e.length} avatars, ${this.queue.length} remaining in queue`),await Promise.all(e.map(async i=>{try{i.url?await me.cacheAvatar(i.userId,i.url,{name:i.userName,displayName:i.displayName,initial:i.initial}):await this.preloadDefault(i.userId,{name:i.userName,displayName:i.displayName,firstName:i.firstName,lastName:i.lastName,initial:i.initial})}catch(b){U.warn(`Failed to preload avatar for ${i.userId}: ${i.url||"(default)"}`,b)}})),this.queue.length>0?setTimeout(()=>this.processQueue(),this.intervalMs):(this.isProcessing=!1,this.logOperations&&U.debug("Avatar preload queue completed"))}catch(e){U.error("Error processing avatar preload queue:",e),this.isProcessing=!1,this.queue.length>0&&setTimeout(()=>this.processQueue(),this.intervalMs*3)}}preloadDefault(e,i){return e?me.getAvatar(e,void 0,i,!0).catch(b=>(U.warn(`Failed to preload default avatar for ${e}: ${b}`),"")):Promise.resolve("")}preloadFromUsersList(e){if(!e||!Array.isArray(e)||e.length===0)return;const i=e.filter(v=>v&&(v.id||v.userId)).map(v=>{const m=v.id||v.userId,x=v.avatar&&typeof v.avatar=="string"&&v.avatar.startsWith("http");return{userId:m,url:x?v.avatar:"",userName:v.name,displayName:v.displayName,firstName:v.firstName,lastName:v.lastName,initial:this.getUserInitials(v)}}),b=i.filter(v=>!!v.url).length,_=i.length-b;this.logOperations&&U.info(`Preloading ${i.length} avatars from users list (${b} with URLs, ${_} requiring default avatar generation)`),i.length>0&&this.addBatch(i)}scanAndPreload(){const e=document.querySelectorAll('img[alt*="avatar" i], img[alt*="user" i], [data-avatar-url]'),i=[],b=[];e.forEach(_=>{const v=_.getAttribute("data-avatar-url");if(v){const s=_.getAttribute("data-user-id")||"unknown";i.push({userId:s,url:v,userName:_.getAttribute("data-user-name")||void 0,displayName:_.getAttribute("data-user-display-name")||void 0});return}const m=_,x=m.getAttribute("src");if(x&&!x.startsWith("data:")){const s=m;let u=s.getAttribute("data-user-id")||"";u||(u=s.parentElement?.getAttribute("data-user-id")||""),!u&&x&&(u=`url_${Ke(x)}`);const E={userName:s.getAttribute("data-user-name")||void 0,displayName:s.getAttribute("data-display-name")||void 0,firstName:s.getAttribute("data-first-name")||void 0,lastName:s.getAttribute("data-last-name")||void 0,initial:s.getAttribute("data-initial")||void 0};i.push({userId:u,url:x,...E})}else if(!x){const s=m,u=s.getAttribute("data-user-id")||`default_${Math.random().toString(36).substring(2,9)}`;b.push({userId:u,url:"",userName:s.getAttribute("data-user-name")||void 0,displayName:s.getAttribute("data-display-name")||void 0,firstName:s.getAttribute("data-first-name")||void 0,lastName:s.getAttribute("data-last-name")||void 0,initial:s.getAttribute("data-initial")||void 0})}}),this.logOperations&&U.info(`Scanning found ${i.length} external avatars to preload and ${b.length} default avatars to generate`),i.length>0&&this.addBatch(i),b.length>0&&this.addBatch(b)}getUserInitials(e){if(!e)return"";if(e.firstName&&e.lastName)return`${e.firstName[0]}${e.lastName[0]}`.toUpperCase();if(e.displayName){const i=e.displayName.trim().split(/\s+/);return i.length>=2?`${i[0][0]}${i[i.length-1][0]}`.toUpperCase():e.displayName.substring(0,2).toUpperCase()}if(e.name){const i=e.name.trim().split(/\s+/);return i.length>=2?`${i[0][0]}${i[i.length-1][0]}`.toUpperCase():e.name.substring(0,2).toUpperCase()}return(e.id||"XX").substring(0,2).toUpperCase()}setLogging(e){this.logOperations=e,U.debug(`Avatar preloader logging ${e?"enabled":"disabled"}`)}setLimits(e,i){this.concurrentLimit=e,this.intervalMs=i,this.logOperations&&U.debug(`Avatar preloader limits set: ${e} concurrent, ${i}ms interval`)}}function Ke(a){let e=0;for(let i=0;i<a.length;i++)e=(e<<5)-e+a.charCodeAt(i),e|=0;return Math.abs(e)}const se=new Ge;function fe(a){return a&&(a.id||a.userId||a.userInitials)||"default"}const Xe=Qe({name:"ScoutingAssignments",components:{Icon:Be,CachedAvatar:he},setup(){const a=ze(),{userInfo:e}=Ve(a),i=z(()=>e.value||{}),b=z(()=>i.value.isAdmin?!0:i.value.groups&&Array.isArray(i.value.groups)?i.value.groups.includes("admin"):!1),_=w(!1),v=w(""),m=w([]);let x=null;const s=w([]),u=w(""),E=w("all"),B=w("all"),q=w(""),Q=w(!1),K=w(!1),M=w(null),X=w(null),J=w([]),h=w({event_key:"",task_type:"scouting",assigned_team_numbers:[],assigned_alliance:"red",assigned_matches:"",assignees_data:[],notes:"",status:"pending"}),ve=async()=>{try{const o=F.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch("https://api.team695.com/api/event/events",{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to load events: ${n.statusText}`);const r=await n.json();if(!Array.isArray(r)||r.length===0)throw new Error("No events available");s.value=r.map(k=>({key:String(k.eventId||k.event_id),name:k.eventName||k.event_name||k.eventId||k.event_id}));const y=[...r].sort((k,L)=>{const te=new Date(k.eventDate||k.event_date).getTime();return new Date(L.eventDate||L.event_date).getTime()-te})[0],A=String(y.eventId||y.event_id);u.value=A}catch(o){console.error("Error loading events:",o),v.value=o.message||"Failed to load events. Please try again."}},$=w([]),V=w(""),ye=z(()=>{let o=m.value;if(E.value==="my"&&(o=o.filter(n=>oe(n,i.value.id))),B.value!=="all"&&(o=o.filter(n=>n.task_type===B.value)),q.value){const n=q.value.toLowerCase();o=o.filter(r=>Y(r).some(y=>y.displayName?.toLowerCase().includes(n)||y.name?.toLowerCase().includes(n)||y.email?.toLowerCase().includes(n))||r.notes&&r.notes.toLowerCase().includes(n)||r.assigned_team_numbers&&r.assigned_team_numbers.some(y=>y.toString().includes(n))||r.assigned_matches&&r.assigned_matches.toLowerCase().includes(n))}return o}),ae=o=>{if(!o)return"Unknown User";const n=o.split("/");return n.length>1?n[1]:o},be=o=>!o||!o.groups?[]:Array.isArray(o.groups)?o.groups.map(n=>n.replace("Team695/","")):[],Y=o=>o.assignees_data&&Array.isArray(o.assignees_data)?o.assignees_data:o.assignee_data?[o.assignee_data]:[],we=o=>o?o.charAt(0).toUpperCase()+o.slice(1):"",oe=(o,n)=>!o||!n?!1:Y(o).some(c=>c.id===n),W=o=>o.replace(/_/g,"").toLowerCase(),ne=async()=>{if(u.value){_.value=!0,v.value="";try{const o=F.getToken();if(!o)throw new Error("Authentication token not found");const n=W(u.value),r=b.value?`https://api.team695.com/assignments/events/${n}`:`https://api.team695.com/assignments/user/${n}`,c=await fetch(r,{headers:{Authorization:`Bearer ${o}`}});if(!c.ok)throw new Error(`Failed to load assignments: ${c.statusText}`);const y=await c.json();if(y.success){m.value=y.data||[];const A=[];m.value.forEach(k=>{const L=Y(k);A.push(...L)}),se.preloadFromUsersList(A)}else throw new Error(y.message||"Failed to load assignments")}catch(o){console.error("Error loading assignments:",o),v.value=o.message||"Failed to load assignments. Please try again."}finally{_.value=!1}}},re=async()=>{if(b.value)try{const o=F.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch("https://api.team695.com/auth/users",{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to load team members: ${n.statusText}`);const r=await n.json();if(r.success&&r.data&&r.data.data)J.value=r.data.data,se.preloadFromUsersList(J.value);else throw new Error(r.message||"Failed to load team members")}catch(o){console.error("Error loading team members:",o),C.fire({title:"Error",text:"Failed to load team members. You may not be able to create new assignments.",icon:"error"})}},xe=()=>{le(),b.value&&re()},ke=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ie=o=>{switch(o){case"pending":return"Pending";case"in_progress":return"In Progress";case"completed":return"Completed";case"canceled":return"Canceled";default:return o}},_e=o=>{switch(o){case"pending":return"Start Assignment";case"in_progress":return"Mark Complete";case"completed":return"Reopen";case"canceled":return"Canceled";default:return"Update Status"}},Ae=async o=>{let n;switch(o.status){case"pending":n="in_progress";break;case"in_progress":n="completed";break;case"completed":n="in_progress";break;default:return}try{const r=F.getToken();if(!r)throw new Error("Authentication token not found");const c=await fetch(`https://api.team695.com/assignments/${o.id}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({status:n})});if(!c.ok)throw new Error(`Failed to update assignment: ${c.statusText}`);const y=await c.json();if(y.success){const A=m.value.findIndex(k=>k.id===o.id);A!==-1&&(m.value[A]=y.data),C.fire({title:"Success",text:`Assignment status updated to ${ie(n)}`,icon:"success",timer:2e3,showConfirmButton:!1})}else throw new Error(y.message||"Failed to update assignment")}catch(r){console.error("Error updating assignment status:",r),C.fire({title:"Error",text:r.message||"Failed to update assignment status. Please try again.",icon:"error"})}},O=w(""),Z=w(!1),Ne=z(()=>{const o=new Set($.value.map(r=>r.id));let n=J.value.filter(r=>!o.has(r.id));if(O.value){const r=O.value.toLowerCase();n=n.filter(c=>c.name&&c.name.toLowerCase().includes(r)||c.displayName&&c.displayName.toLowerCase().includes(r)||c.email&&c.email.toLowerCase().includes(r))}return n}),Te=o=>{const n={...o,id:fe(o),firstName:o.firstName||"",lastName:o.lastName||"",displayName:o.displayName||ae(o.name)||""};$.value.push(n),O.value="",h.value.assignees_data=$.value.map(r=>({id:r.id||"default",name:r.name,firstName:r.firstName,lastName:r.lastName,displayName:r.displayName,avatar:r.avatar,email:r.email,groups:r.groups}))},Ce=o=>{$.value=$.value.filter(n=>n.id!==o.id),h.value.assignees_data=$.value.map(n=>({id:n.id,name:n.name,displayName:n.displayName,avatar:n.avatar,email:n.email,groups:n.groups}))},$e=()=>{M.value=null,h.value={event_key:u.value,task_type:"scouting",assigned_team_numbers:[],assigned_alliance:"red",assigned_matches:"",assignees_data:[],notes:"",status:"pending"},V.value="",$.value=[],O.value="",Q.value=!0},Ue=o=>{M.value=o,h.value={event_key:o.event_key,task_type:o.task_type,assigned_team_numbers:o.assigned_team_numbers||[],assigned_alliance:o.assigned_alliance||"red",assigned_matches:o.assigned_matches||"",assignees_data:[],notes:o.notes||"",status:o.status},V.value=o.assigned_team_numbers?o.assigned_team_numbers.join(", "):"",o.assignees_data&&Array.isArray(o.assignees_data)?($.value=[...o.assignees_data],h.value.assignees_data=[...o.assignees_data]):o.assignee_data?($.value=[o.assignee_data],h.value.assignees_data=[o.assignee_data]):$.value=[],Q.value=!0},Se=o=>{X.value=o,K.value=!0},Ee=async()=>{if(X.value)try{const o=F.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch(`https://api.team695.com/assignments/${X.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to delete assignment: ${n.statusText}`);const r=await n.json();if(r.success)m.value=m.value.filter(c=>c.id!==X.value.id),K.value=!1,C.fire({title:"Deleted!",text:"The assignment has been deleted.",icon:"success",timer:2e3,showConfirmButton:!1});else throw new Error(r.message||"Failed to delete assignment")}catch(o){console.error("Error deleting assignment:",o),K.value=!1,C.fire({title:"Error",text:o.message||"Failed to delete assignment. Please try again.",icon:"error"})}},De=async()=>{if(h.value.task_type==="pit-scouting"&&V.value&&(h.value.assigned_team_numbers=V.value.split(",").map(o=>parseInt(o.trim())).filter(o=>!isNaN(o))),!h.value.assignees_data.length){C.fire({title:"Error",text:"Please select at least one user to assign this task to",icon:"error"});return}try{const o=F.getToken();if(!o)throw new Error("Authentication token not found");const n={id:i.value.id,name:i.value.name,displayName:i.value.displayName,avatar:i.value.avatar,email:i.value.email,groups:i.value.groups};if(M.value){const r=await fetch(`https://api.team695.com/assignments/${M.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({assigned_team_numbers:h.value.assigned_team_numbers,assigned_alliance:h.value.assigned_alliance,assigned_matches:h.value.assigned_matches,status:h.value.status,notes:h.value.notes,assignees_data:h.value.assignees_data})});if(!r.ok)throw new Error(`Failed to update assignment: ${r.statusText}`);const c=await r.json();if(c.success){const y=m.value.findIndex(A=>A.id===M.value.id);y!==-1&&(m.value[y]=c.data),Q.value=!1,C.fire({title:"Success",text:"Assignment updated successfully",icon:"success",timer:2e3,showConfirmButton:!1})}else throw new Error(c.message||"Failed to update assignment")}else{const r={...h.value,event_key:W(h.value.event_key),assigner_data:n},c=await fetch("https://api.team695.com/assignments",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!c.ok)throw new Error(`Failed to create assignment: ${c.statusText}`);const y=await c.json();if(y.success)m.value.push(y.data),Q.value=!1,C.fire({title:"Success",text:"Assignment created successfully",icon:"success",timer:2e3,showConfirmButton:!1});else throw new Error(y.message||"Failed to create assignment")}}catch(o){console.error("Error submitting form:",o),C.fire({title:"Error",text:o.message||"Failed to save assignment. Please try again.",icon:"error"})}},le=async()=>{if(u.value)return x||(h.value.event_key=u.value,x=Promise.all([ne(),de()]).then(()=>{x=null}).catch(o=>{throw x=null,o}),x)};ce(u,()=>{u.value&&le()}),Oe(async()=>{a.initializeStore(),await ve(),b.value&&re(),document.addEventListener("click",o=>{if(Z.value){const n=o.target,r=document.querySelector(".user-dropdown"),c=document.getElementById("assignee-search");!r?.contains(n)&&n!==c&&(Z.value=!1)}if(ee.value){const n=o.target,r=document.querySelector(".team-dropdown"),c=document.getElementById("team_search");!r?.contains(n)&&n!==c&&(ee.value=!1)}}),setTimeout(()=>{se.scanAndPreload()},1e3)});const Ie=o=>{if(!o)return"";if(o.firstName&&o.lastName)return`${o.firstName[0]}${o.lastName[0]}`.toUpperCase();if(o.displayName){const n=o.displayName.trim().split(/\s+/);return n.length>=2?`${n[0][0]}${n[n.length-1][0]}`.toUpperCase():o.displayName.substring(0,2).toUpperCase()}if(o.name){const n=o.name.trim().split(/\s+/);return n.length>=2?`${n[0][0]}${n[n.length-1][0]}`.toUpperCase():o.name.substring(0,2).toUpperCase()}return(o.id||"XX").substring(0,2).toUpperCase()},j=w([]),H=w(""),ee=w(!1),de=async()=>{if(u.value)try{const o=F.getToken();if(!o)throw new Error("Authentication token not found");const n=W(u.value),r=await fetch(`https://api.team695.com/team-matches/event/${n}`,{headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error(`Failed to load event teams: ${r.statusText}`);const c=await r.json();if(c.success)j.value=c.data||[];else throw new Error(c.message||"Failed to load event teams")}catch(o){console.error("Error loading event teams:",o),C.fire({title:"Warning",text:"Failed to load event teams. Team selection may be unavailable.",icon:"warning"})}},Pe=z(()=>{const o=new Set,n=M.value?.id;return m.value.forEach(r=>{n&&r.id===n||r.assigned_team_numbers&&Array.isArray(r.assigned_team_numbers)&&r.assigned_team_numbers.forEach(c=>{o.add(c)})}),o}),Fe=z(()=>{const o=Pe.value;let n=j.value.filter(r=>!o.has(r.team_number)&&!h.value.assigned_team_numbers.includes(r.team_number));if(H.value){const r=H.value.toLowerCase();n=n.filter(c=>c.team_number.toString().includes(r)||c.nickname&&c.nickname.toLowerCase().includes(r))}return n}),ue=o=>{const n=j.value.find(r=>r.team_number===o);return n?n.is_pit:!1},Me=o=>{h.value.assigned_team_numbers.includes(o.team_number)||h.value.assigned_team_numbers.push(o.team_number),H.value=""},je=o=>{h.value.assigned_team_numbers=h.value.assigned_team_numbers.filter(n=>n!==o)},Le=o=>{const n=j.value.find(r=>r.team_number===o);return n?n.nickname:""};return ce(()=>h.value.task_type,o=>{o==="scouting"?h.value.assigned_team_numbers=[]:o==="pit-scouting"&&(h.value.assigned_alliance="red",h.value.assigned_matches="")}),{userData:i,isAdmin:b,loading:_,error:v,assignments:m,events:s,selectedEvent:u,activeTab:E,filterType:B,searchQuery:q,filteredAssignments:ye,showModal:Q,showDeleteModal:K,editingAssignment:M,formData:h,teamMembers:J,teamNumbersInput:V,loadAssignments:ne,refreshData:xe,formatDate:ke,formatStatus:ie,formatUsername:ae,getUserGroups:be,getAssigneesList:Y,capitalizeFirstLetter:we,isUserInAssignment:oe,getNextStatusButtonText:_e,updateAssignmentStatus:Ae,openCreateModal:$e,editAssignment:Ue,confirmDeleteAssignment:Se,deleteAssignment:Ee,submitForm:De,userSearchQuery:O,showUserDropdown:Z,selectedAssignees:$,filteredUnselectedUsers:Ne,addSelectedAssignee:Te,removeSelectedAssignee:Ce,ensureSafeUserId:fe,getUserInitialsValue:Ie,eventTeams:j,teamSearchQuery:H,showTeamDropdown:ee,filteredAvailableTeams:Fe,addSelectedTeam:Me,removeSelectedTeam:je,getTeamNickname:Le,loadEventTeams:de,isTeamPit:ue,toggleTeamPitStatus:async o=>{try{const n=F.getToken();if(!n)throw new Error("Authentication token not found");const c=!ue(o),y=W(u.value),A=await fetch(`https://api.team695.com/team-matches/pit-status/${y}/frc${o}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({is_pit:c})});if(!A.ok)throw new Error(`Failed to update pit status: ${A.statusText}`);const k=await A.json();if(k.success){const L=j.value.findIndex(te=>te.team_number===o);L!==-1&&(j.value[L].is_pit=c),C.fire({title:"Success",text:`Team ${o} pit status ${c?"confirmed":"removed"}`,icon:"success",timer:1500,showConfirmButton:!1})}else throw new Error(k.message||"Failed to update pit status")}catch(n){console.error("Error updating pit status:",n),C.fire({title:"Error",text:n.message||"Failed to update pit status. Please try again.",icon:"error"})}}}}}),Je={class:"min-h-screen bg-gray-50"},Ye={class:"px-4 py-6 sm:px-0 mb-6"},We={class:"bg-gradient-to-r from-teal-500 to-emerald-600 rounded-lg shadow-lg overflow-hidden"},He={class:"px-6 py-8 md:p-10 md:flex md:items-center md:justify-between"},Ze={key:0,class:"mt-4 md:mt-0 md:ml-6"},et={class:"px-4 sm:px-0 mb-6"},tt={class:"bg-white rounded-lg shadow p-4 sm:p-6"},st={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},at={class:"flex flex-col sm:flex-row gap-3"},ot={class:"relative"},nt=["value"],rt={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},it={key:0,class:"px-4 sm:px-0 mb-6"},lt={key:1,class:"px-4 sm:px-0 mb-6"},dt={class:"bg-red-50 rounded-lg shadow p-6"},ut={class:"flex"},mt={class:"flex-shrink-0"},ct={class:"ml-3"},gt={class:"mt-2 text-red-700"},pt={class:"mt-4"},ft={key:2,class:"px-4 sm:px-0 mb-6"},ht={class:"bg-white rounded-lg shadow p-8 text-center"},vt={class:"mt-1 text-gray-500"},yt={key:0,class:"mt-6"},bt={key:3,class:"px-4 sm:px-0 mb-6"},wt={class:"bg-white rounded-lg shadow"},xt={class:"border-b border-gray-200"},kt={class:"flex -mb-px","aria-label":"Tabs"},_t={class:"overflow-hidden"},At={class:"px-4 py-5 sm:p-6"},Nt={class:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Tt={class:"flex items-center"},Ct={class:"flex flex-wrap gap-2"},$t={class:"relative"},Ut={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},St={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},Et={class:"px-4 py-5 sm:p-6"},Dt={class:"flex justify-between items-start"},It={class:"flex items-center"},Pt={class:"ml-3"},Ft={class:"text-lg font-medium text-gray-900"},Mt={class:"text-sm text-gray-500"},jt={class:"mt-4 space-y-3"},Lt={key:0},Bt={class:"mt-1 flex flex-wrap gap-2"},zt={key:0,class:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},qt=["onClick","title"],Qt={key:1},Vt={class:"flex items-center justify-between"},Ot={class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800 mt-1"},Rt={class:"mt-1 space-y-2"},Gt={class:"flex-shrink-0"},Kt={class:"ml-3"},Xt={class:"flex items-center"},Jt={class:"text-sm font-medium text-gray-900 flex items-center flex-wrap"},Yt={key:0,class:"text-xs text-teal-600 ml-1"},Wt={key:1,class:"ml-1 flex gap-1 flex-wrap"},Ht={class:"text-xs text-gray-500"},Zt={key:0,class:"text-xs text-gray-500"},es={key:2},ts={class:"mt-1 text-sm text-gray-700 line-clamp-2"},ss={class:"flex justify-between text-xs text-gray-500"},as={class:"mt-5 flex justify-between"},os=["onClick","disabled"],ns={key:1,class:"flex space-x-2"},rs=["onClick"],is=["onClick"],ls={key:0,class:"modal-container"},ds={class:"fixed inset-0 z-50 overflow-y-auto"},us={class:"flex min-h-full items-center justify-center p-4"},ms={class:"relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl overflow-visible"},cs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},gs={class:"sm:flex sm:items-start"},ps={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-teal-100 sm:mx-0 sm:h-10 sm:w-10"},fs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},hs={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},vs={class:"mt-4 space-y-4"},ys=["disabled"],bs=["value"],ws={key:0},xs={class:"mt-1 relative"},ks={class:"relative"},_s={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},As=["onMousedown"],Ns={class:"flex items-center justify-between"},Ts={class:"text-sm font-medium text-gray-900"},Cs={class:"text-xs text-gray-500"},$s={class:"flex items-center"},Us={key:0,class:"px-2 py-0.5 mr-2 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Ss={key:1,class:"absolute z-50 mt-1 w-full bg-white shadow-lg rounded-md py-4 px-4 text-center text-base ring-1 ring-black ring-opacity-5 sm:text-sm"},Es={class:"text-gray-500"},Ds={key:0,class:"mt-2 flex items-center flex-wrap gap-2"},Is={class:"text-xs font-medium text-gray-800 flex items-center"},Ps={key:0,class:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Fs=["onClick","title"],Ms={class:"text-xs text-gray-500 ml-1 truncate max-w-[100px]"},js=["onClick"],Ls={key:1,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Bs={class:"relative"},zs={key:0,class:"mt-2 flex items-center flex-wrap gap-2"},qs={class:"flex-shrink-0 mr-1 flex items-center"},Qs={class:"text-xs font-medium text-gray-800 flex items-center"},Vs=["onClick"],Os={class:"relative mt-2"},Rs={class:"relative"},Gs={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ks=["onMousedown"],Xs={class:"flex items-center"},Js={class:"flex-shrink-0"},Ys={class:"ml-3"},Ws={class:"flex items-center"},Hs={class:"text-sm font-medium text-gray-900"},Zs={key:0,class:"flex gap-1 flex-wrap"},ea={key:0,class:"text-xs text-teal-600"},ta={key:1,class:"ml-1 flex gap-1 flex-wrap"},sa={class:"text-xs text-gray-500"},aa={key:2,class:"mt-1 w-full bg-white shadow-lg rounded-md py-4 px-4 text-center text-base ring-1 ring-black ring-opacity-5 sm:text-sm"},oa={class:"text-gray-500"},na={key:3},ra={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ia=["disabled"],la={key:0,class:"modal-container"},da={class:"fixed inset-0 z-50 overflow-y-auto"},ua={class:"flex min-h-full items-center justify-center p-4"},ma={class:"relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl overflow-hidden"},ca={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ga={class:"sm:flex sm:items-start"},pa={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},fa={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"};function ha(a,e,i,b,_,v){const m=Re("Icon"),x=he;return l(),d(N,null,[t("div",Je,[t("div",Ye,[t("div",We,[t("div",He,[e[35]||(e[35]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"}," Scouting Assignments "),t("p",{class:"mt-2 text-teal-100"}," Manage and track team scouting tasks for FRC competitions ")],-1)),a.isAdmin?(l(),d("div",Ze,[t("button",{onClick:e[0]||(e[0]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-teal-600 bg-white hover:bg-teal-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},[p(m,{icon:"mdi:plus",class:"mr-2 h-5 w-5"}),e[34]||(e[34]=I(" Create Assignment ",-1))])])):f("",!0)])])]),t("div",et,[t("div",tt,[t("div",st,[e[37]||(e[37]=t("h3",{class:"text-lg font-medium text-gray-900 mb-3 sm:mb-0"},"Select Event",-1)),t("div",at,[t("div",ot,[D(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.selectedEvent=s),class:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[(l(!0),d(N,null,S(a.events,s=>(l(),d("option",{key:s.key,value:s.key},g(s.name)+" ("+g(s.key)+") ",9,nt))),128))],512),[[R,a.selectedEvent]]),t("div",rt,[p(m,{icon:"mdi:chevron-down",class:"h-5 w-5"})])]),t("button",{onClick:e[2]||(e[2]=(...s)=>a.refreshData&&a.refreshData(...s)),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},[p(m,{icon:"mdi:refresh",class:"mr-2 h-5 w-5"}),e[36]||(e[36]=I(" Refresh ",-1))])])])])]),a.loading?(l(),d("div",it,[...e[38]||(e[38]=[t("div",{class:"bg-white rounded-lg shadow p-8 flex justify-center"},[t("div",{class:"flex flex-col items-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-500"}),t("p",{class:"mt-4 text-gray-600"},"Loading assignments...")])],-1)])])):a.error?(l(),d("div",lt,[t("div",dt,[t("div",ut,[t("div",mt,[p(m,{icon:"mdi:alert-circle",class:"h-6 w-6 text-red-500"})]),t("div",ct,[e[39]||(e[39]=t("h3",{class:"text-lg font-medium text-red-800"},"Error loading assignments",-1)),t("div",gt,[t("p",null,g(a.error),1)]),t("div",pt,[t("button",{onClick:e[3]||(e[3]=(...s)=>a.refreshData&&a.refreshData(...s)),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Try Again ")])])])])])):a.assignments.length?(l(),d("div",bt,[t("div",wt,[t("div",xt,[t("nav",kt,[t("button",{onClick:e[5]||(e[5]=s=>a.activeTab="all"),class:T(["w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm",a.activeTab==="all"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(m,{icon:a.activeTab==="all"?"mdi:view-dashboard":"mdi:view-dashboard-outline",class:"h-5 w-5 inline-block mr-2"},null,8,["icon"]),e[42]||(e[42]=I(" All Assignments ",-1))],2),t("button",{onClick:e[6]||(e[6]=s=>a.activeTab="my"),class:T(["w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm",a.activeTab==="my"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(m,{icon:a.activeTab==="my"?"mdi:account-check":"mdi:account-check-outline",class:"h-5 w-5 inline-block mr-2"},null,8,["icon"]),e[43]||(e[43]=I(" My Assignments ",-1))],2)])]),t("div",_t,[t("div",At,[t("div",Nt,[t("div",Tt,[e[44]||(e[44]=t("span",{class:"mr-3 text-sm font-medium text-gray-700"},"Filter by:",-1)),t("div",Ct,[t("button",{onClick:e[7]||(e[7]=s=>a.filterType="all"),class:T(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="all"?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," All Types ",2),t("button",{onClick:e[8]||(e[8]=s=>a.filterType="scouting"),class:T(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="scouting"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," Match Scouting ",2),t("button",{onClick:e[9]||(e[9]=s=>a.filterType="pit-scouting"),class:T(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="pit-scouting"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," Pit Scouting ",2)])]),t("div",$t,[t("div",Ut,[p(m,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),D(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>a.searchQuery=s),type:"text",placeholder:"Search assignments...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[G,a.searchQuery]])])]),t("div",St,[(l(!0),d(N,null,S(a.filteredAssignments,s=>(l(),d("div",{key:s.id,class:T(["bg-white overflow-hidden shadow rounded-lg border hover:shadow-md transition-shadow duration-300",{"border-blue-200":s.task_type==="scouting","border-purple-200":s.task_type==="pit-scouting"}])},[t("div",Et,[t("div",Dt,[t("div",It,[t("div",{class:T(["flex-shrink-0 rounded-md p-2",{"bg-blue-100":s.task_type==="scouting","bg-purple-100":s.task_type==="pit-scouting"}])},[p(m,{icon:s.task_type==="scouting"?"mdi:clipboard-text":"mdi:robot",class:T(["h-6 w-6",{"text-blue-600":s.task_type==="scouting","text-purple-600":s.task_type==="pit-scouting"}])},null,8,["icon","class"])],2),t("div",Pt,[t("h3",Ft,g(s.task_type==="scouting"?"Match Scouting":"Pit Scouting"),1),t("p",Mt,"ID: "+g(s.id),1)])]),t("div",null,[t("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-blue-100 text-blue-800":s.status==="in_progress","bg-green-100 text-green-800":s.status==="completed","bg-gray-100 text-gray-800":s.status==="canceled"}])},g(a.formatStatus(s.status)),3)])]),t("div",jt,[s.task_type==="pit-scouting"&&s.assigned_team_numbers?.length?(l(),d("div",Lt,[e[46]||(e[46]=t("h4",{class:"text-sm font-medium text-gray-500"},"Assigned Teams:",-1)),t("div",Bt,[(l(!0),d(N,null,S(s.assigned_team_numbers,u=>(l(),d("span",{key:u,class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800"},[I(" Team "+g(u)+" ",1),a.isTeamPit(u)?(l(),d("span",zt,[p(m,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"}),e[45]||(e[45]=I("Pit ",-1))])):f("",!0),a.isAdmin?(l(),d("button",{key:1,onClick:P(E=>a.toggleTeamPitStatus(u),["stop"]),class:"ml-1 p-0.5 text-gray-500 hover:text-purple-600",title:a.isTeamPit(u)?"Remove pit status":"Mark as pit team"},[p(m,{icon:a.isTeamPit(u)?"mdi:close-circle":"mdi:check-circle",class:"h-4 w-4"},null,8,["icon"])],8,qt)):f("",!0)]))),128))])])):f("",!0),s.task_type==="scouting"?(l(),d("div",Qt,[t("div",Vt,[t("div",null,[e[47]||(e[47]=t("h4",{class:"text-sm font-medium text-gray-500"},"Alliance:",-1)),t("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium mt-1",s.assigned_alliance==="red"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"])},g(s.assigned_alliance==="red"?"Red Alliance":"Blue Alliance"),3)]),t("div",null,[e[48]||(e[48]=t("h4",{class:"text-sm font-medium text-gray-500"},"Matches:",-1)),t("span",Ot,g(s.assigned_matches||"Not specified"),1)])])])):f("",!0),t("div",null,[e[49]||(e[49]=t("h4",{class:"text-sm font-medium text-gray-500"},"Assigned To:",-1)),t("div",Rt,[(l(!0),d(N,null,S(a.getAssigneesList(s),(u,E)=>(l(),d("div",{key:E,class:"flex items-center"},[t("div",Gt,[p(x,{userId:u.id,initial:a.getUserInitialsValue(u),src:u.avatar,size:32,firstName:u.firstName,lastName:u.lastName,displayName:u.displayName||a.formatUsername(u.name),alt:"Assignee Avatar",class:"h-8 w-8 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("div",Kt,[t("div",Xt,[t("p",Jt,[t("span",null,g(u.displayName||a.formatUsername(u.name)||"Unknown"),1),u.id===a.userData.id?(l(),d("span",Yt,"(You)")):f("",!0),a.getUserGroups(u).length>0?(l(),d("span",Wt,[(l(!0),d(N,null,S(a.getUserGroups(u),(B,q)=>(l(),d("span",{key:q,class:"px-2 py-0.5 text-xs font-medium rounded-md bg-amber-100 text-amber-700"},g(a.capitalizeFirstLetter(B)),1))),128))])):f("",!0)])]),t("div",Ht,g(a.formatUsername(u.name))+" · "+g(u.email||"No email"),1)])]))),128)),a.getAssigneesList(s).length>2?(l(),d("div",Zt," + "+g(a.getAssigneesList(s).length-2)+" more users ",1)):f("",!0)])]),s.notes?(l(),d("div",es,[e[50]||(e[50]=t("h4",{class:"text-sm font-medium text-gray-500"},"Notes:",-1)),t("p",ts,g(s.notes),1)])):f("",!0),t("div",ss,[t("span",null,"Created: "+g(a.formatDate(s.created_at)),1),t("span",null,"Updated: "+g(a.formatDate(s.updated_at)),1)])]),t("div",as,[a.isUserInAssignment(s,a.userData.id)||a.isAdmin?(l(),d("button",{key:0,onClick:u=>a.updateAssignmentStatus(s),class:T(["inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",{"bg-yellow-600 hover:bg-yellow-700":s.status==="pending","bg-blue-600 hover:bg-blue-700":s.status==="in_progress","bg-green-600 hover:bg-green-700":s.status==="completed","bg-gray-400 cursor-not-allowed":s.status==="canceled"}]),disabled:s.status==="canceled"},g(a.getNextStatusButtonText(s.status)),11,os)):f("",!0),a.isAdmin?(l(),d("div",ns,[t("button",{onClick:u=>a.editAssignment(s),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[p(m,{icon:"mdi:pencil",class:"h-4 w-4"})],8,rs),t("button",{onClick:u=>a.confirmDeleteAssignment(s),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[p(m,{icon:"mdi:delete",class:"h-4 w-4"})],8,is)])):f("",!0)])])],2))),128))])])])])])):(l(),d("div",ft,[t("div",ht,[p(m,{icon:"mdi:clipboard-text-outline",class:"mx-auto h-12 w-12 text-gray-400"}),e[41]||(e[41]=t("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No assignments found",-1)),t("p",vt,g(a.isAdmin?"Create a new assignment to get started.":"You have no assignments for this event."),1),a.isAdmin?(l(),d("div",yt,[t("button",{onClick:e[4]||(e[4]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[p(m,{icon:"mdi:plus",class:"mr-2 h-5 w-5"}),e[40]||(e[40]=I(" Create Assignment ",-1))])])):f("",!0)])])),p(pe,{name:"fade"},{default:ge(()=>[a.showModal?(l(),d("div",ls,[e[63]||(e[63]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-40"},null,-1)),t("div",ds,[t("div",us,[t("div",ms,[t("button",{onClick:e[11]||(e[11]=s=>a.showModal=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 z-10"},[p(m,{icon:"mdi:close",class:"h-6 w-6"})]),t("div",cs,[t("div",gs,[t("div",ps,[p(m,{icon:a.editingAssignment?"mdi:pencil":"mdi:plus",class:"h-6 w-6 text-teal-600"},null,8,["icon"])]),t("div",fs,[t("h3",hs,g(a.editingAssignment?"Edit Assignment":"Create New Assignment"),1),t("div",vs,[t("div",null,[e[51]||(e[51]=t("label",{for:"event_key",class:"block text-sm font-medium text-gray-700"},"Event",-1)),D(t("select",{id:"event_key","onUpdate:modelValue":e[12]||(e[12]=s=>a.formData.event_key=s),disabled:!!a.editingAssignment,class:T(["mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",{"bg-gray-100":!!a.editingAssignment}])},[(l(!0),d(N,null,S(a.events,s=>(l(),d("option",{key:s.key,value:s.key},g(s.name)+" ("+g(s.key)+") ",9,bs))),128))],10,ys),[[R,a.formData.event_key]])]),t("div",null,[e[53]||(e[53]=t("label",{for:"task_type",class:"block text-sm font-medium text-gray-700"},"Task Type",-1)),D(t("select",{id:"task_type","onUpdate:modelValue":e[13]||(e[13]=s=>a.formData.task_type=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[...e[52]||(e[52]=[t("option",{value:"scouting"},"Match Scouting",-1),t("option",{value:"pit-scouting"},"Pit Scouting",-1)])],512),[[R,a.formData.task_type]])]),a.formData.task_type==="pit-scouting"?(l(),d("div",ws,[e[55]||(e[55]=t("label",{for:"assigned_team_numbers",class:"block text-sm font-medium text-gray-700"},"Assigned Teams",-1)),t("div",xs,[t("div",ks,[D(t("input",{id:"team_search","onUpdate:modelValue":e[14]||(e[14]=s=>a.teamSearchQuery=s),onFocus:e[15]||(e[15]=s=>a.showTeamDropdown=!0),onInput:e[16]||(e[16]=s=>a.showTeamDropdown=!0),placeholder:"Search teams...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,544),[[G,a.teamSearchQuery]]),t("div",_s,[p(m,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),a.teamSearchQuery?(l(),d("button",{key:0,onClick:e[17]||(e[17]=P(s=>{a.teamSearchQuery="",a.showTeamDropdown=!0},["stop"])),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p(m,{icon:"mdi:close",class:"h-5 w-5 text-gray-400 hover:text-gray-600"})])):f("",!0)]),a.showTeamDropdown&&a.filteredAvailableTeams.length>0?(l(),d("div",{key:0,class:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm team-dropdown",style:{"max-height":"300px"},onClick:e[18]||(e[18]=P(()=>{},["stop"]))},[(l(!0),d(N,null,S(a.filteredAvailableTeams,s=>(l(),d("div",{key:s.team_number,onMousedown:P(u=>a.addSelectedTeam(s),["prevent"]),class:"cursor-pointer hover:bg-gray-100 px-4 py-2"},[t("div",Ns,[t("div",null,[t("span",Ts," Team "+g(s.team_number),1),t("p",Cs,g(s.nickname),1)]),t("div",$s,[s.is_pit?(l(),d("span",Us,[p(m,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"})])):f("",!0),e[54]||(e[54]=t("span",{class:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800"}," Add ",-1))])])],40,As))),128))])):f("",!0),a.showTeamDropdown&&a.teamSearchQuery&&a.filteredAvailableTeams.length===0?(l(),d("div",Ss,[t("p",Es,'No available teams found matching "'+g(a.teamSearchQuery)+'"',1)])):f("",!0)]),a.formData.assigned_team_numbers.length>0?(l(),d("div",Ds,[(l(!0),d(N,null,S(a.formData.assigned_team_numbers,s=>(l(),d("div",{key:s,class:"inline-flex items-center bg-gray-100 rounded-full pl-2 pr-1 py-1"},[t("span",Is,[I(" Team "+g(s)+" ",1),a.isTeamPit(s)?(l(),d("span",Ps,[p(m,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"})])):f("",!0),a.isAdmin?(l(),d("button",{key:1,onClick:P(u=>a.toggleTeamPitStatus(s),["stop"]),class:"ml-1 p-0.5 text-gray-500 hover:text-purple-600",title:a.isTeamPit(s)?"Remove pit status":"Mark as pit team"},[p(m,{icon:a.isTeamPit(s)?"mdi:close-circle":"mdi:check-circle",class:"h-4 w-4"},null,8,["icon"])],8,Fs)):f("",!0),t("span",Ms,g(a.getTeamNickname(s)),1)]),t("button",{onClick:u=>a.removeSelectedTeam(s),class:"ml-1 rounded-full p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center"},[p(m,{icon:"mdi:close",class:"h-3 w-3"})],8,js)]))),128))])):f("",!0)])):f("",!0),a.formData.task_type==="scouting"?(l(),d("div",Ls,[t("div",null,[e[57]||(e[57]=t("label",{for:"assigned_alliance",class:"block text-sm font-medium text-gray-700"},"Alliance",-1)),D(t("select",{id:"assigned_alliance","onUpdate:modelValue":e[19]||(e[19]=s=>a.formData.assigned_alliance=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[...e[56]||(e[56]=[t("option",{value:"red"},"Red Alliance",-1),t("option",{value:"blue"},"Blue Alliance",-1)])],512),[[R,a.formData.assigned_alliance]])]),t("div",null,[e[58]||(e[58]=t("label",{for:"assigned_matches",class:"block text-sm font-medium text-gray-700"},"Match Range",-1)),D(t("input",{id:"assigned_matches","onUpdate:modelValue":e[20]||(e[20]=s=>a.formData.assigned_matches=s),type:"text",placeholder:"e.g., Q3-Q12",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[G,a.formData.assigned_matches]])])])):f("",!0),t("div",Bs,[e[59]||(e[59]=t("label",{for:"assignee-search",class:"block text-sm font-medium text-gray-700"},"Assign To",-1)),a.selectedAssignees.length>0?(l(),d("div",zs,[(l(!0),d(N,null,S(a.selectedAssignees,(s,u)=>(l(),d("div",{key:u,class:"inline-flex items-center bg-gray-100 rounded-full pl-2 pr-1 py-1"},[t("div",qs,[p(x,{userId:s.id,initial:a.getUserInitialsValue(s),size:24,src:s.avatar,firstName:s.firstName,lastName:s.lastName,displayName:s.displayName||a.formatUsername(s.name),alt:"User Avatar",class:"h-6 w-6 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("span",Qs,g(s.displayName||a.formatUsername(s.name)),1),t("button",{onClick:E=>a.removeSelectedAssignee(s),class:"ml-1 rounded-full p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center"},[p(m,{icon:"mdi:close",class:"h-3 w-3"})],8,Vs)]))),128))])):f("",!0),t("div",Os,[t("div",Rs,[D(t("input",{id:"assignee-search",type:"text","onUpdate:modelValue":e[21]||(e[21]=s=>a.userSearchQuery=s),onFocus:e[22]||(e[22]=s=>a.showUserDropdown=!0),onInput:e[23]||(e[23]=s=>a.showUserDropdown=!0),onClick:e[24]||(e[24]=P(()=>{},["stop"])),placeholder:"Search to add more users...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,544),[[G,a.userSearchQuery]]),t("div",Gs,[p(m,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),a.userSearchQuery?(l(),d("button",{key:0,onClick:e[25]||(e[25]=P(s=>{a.userSearchQuery="",a.showUserDropdown=!0},["stop"])),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p(m,{icon:"mdi:close",class:"h-5 w-5 text-gray-400 hover:text-gray-600"})])):f("",!0)]),a.showUserDropdown&&a.filteredUnselectedUsers.length>0?(l(),d("div",{key:0,class:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",style:{"max-height":"300px"},onClick:e[26]||(e[26]=P(()=>{},["stop"]))},[(l(!0),d(N,null,S(a.filteredUnselectedUsers,s=>(l(),d("div",{key:s.id,onMousedown:P(u=>a.addSelectedAssignee(s),["prevent"]),class:"cursor-pointer hover:bg-gray-100 px-4 py-2"},[t("div",Xs,[t("div",Js,[p(x,{userId:s.id,initial:a.getUserInitialsValue(s),src:s.avatar,size:32,firstName:s.firstName,lastName:s.lastName,displayName:s.displayName||a.formatUsername(s.name),alt:"User Avatar",class:"h-8 w-8 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("div",Ys,[t("div",Ws,[t("p",Hs,[a.getUserGroups(s).length>0?(l(),d("span",Zs,[I(g(s.displayName||a.formatUsername(s.name))+" ",1),s.id===a.userData.id?(l(),d("span",ea,"(You)")):f("",!0),a.getUserGroups(s).length>0?(l(),d("span",ta,[(l(!0),d(N,null,S(a.getUserGroups(s),(u,E)=>(l(),d("span",{key:E,class:"px-2 py-0.5 text-xs font-medium rounded-md bg-amber-100 text-amber-700"},g(a.capitalizeFirstLetter(u)),1))),128))])):f("",!0)])):f("",!0)])]),t("div",sa,g(a.formatUsername(s.name||""))+" · "+g(s.email||"No email"),1)])])],40,Ks))),128))])):f("",!0)])]),a.showUserDropdown&&a.userSearchQuery&&a.filteredUnselectedUsers.length===0?(l(),d("div",aa,[t("p",oa,'No users found matching "'+g(a.userSearchQuery)+'" ',1)])):f("",!0),a.editingAssignment?(l(),d("div",na,[e[61]||(e[61]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),D(t("select",{id:"status","onUpdate:modelValue":e[27]||(e[27]=s=>a.formData.status=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[...e[60]||(e[60]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"canceled"},"Canceled",-1)])],512),[[R,a.formData.status]])])):f("",!0),t("div",null,[e[62]||(e[62]=t("label",{for:"notes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),D(t("textarea",{id:"notes","onUpdate:modelValue":e[28]||(e[28]=s=>a.formData.notes=s),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Add any additional instructions or notes"},null,512),[[G,a.formData.notes]])])])])])]),t("div",ra,[t("button",{onClick:e[29]||(e[29]=(...s)=>a.submitForm&&a.submitForm(...s)),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-teal-600 text-base font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:!a.selectedAssignees.length},g(a.editingAssignment?"Update":"Create"),9,ia),t("button",{onClick:e[30]||(e[30]=s=>a.showModal=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0)]),_:1})]),p(pe,{name:"fade"},{default:ge(()=>[a.showDeleteModal?(l(),d("div",la,[e[65]||(e[65]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-40"},null,-1)),t("div",da,[t("div",ua,[t("div",ma,[t("button",{onClick:e[31]||(e[31]=s=>a.showDeleteModal=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},[p(m,{icon:"mdi:close",class:"h-6 w-6"})]),t("div",ca,[t("div",ga,[t("div",pa,[p(m,{icon:"mdi:alert",class:"h-6 w-6 text-red-600"})]),e[64]||(e[64]=t("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Assignment "),t("div",{class:"mt-2"},[t("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this assignment? This action cannot be undone. ")])],-1))])]),t("div",fa,[t("button",{onClick:e[32]||(e[32]=(...s)=>a.deleteAssignment&&a.deleteAssignment(...s)),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),t("button",{onClick:e[33]||(e[33]=s=>a.showDeleteModal=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0)]),_:1})],64)}const Na=qe(Xe,[["render",ha],["__scopeId","data-v-afb84e24"]]);export{Na as default};
