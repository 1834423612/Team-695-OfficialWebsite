var Fe=Object.defineProperty;var Me=(a,e,i)=>e in a?Fe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var z=(a,e,i)=>Me(a,typeof e!="symbol"?e+"":e,i);import{_ as ge}from"./CachedAvatar-3D8hxbQN.js";import{N as U,a8 as le,f as je,I as Le,E as Be,J as qe,y as Q,r as x,q as de,o as ze,D as B,_ as Qe,c as l,a as t,h as p,j as f,b as P,i as Ve,k as E,X as R,F as N,e as S,t as c,n as T,v as G,B as F,w as ue,T as me,d}from"./index-D7X13bus.js";import{S as C}from"./sweetalert2.esm.all-BQIkj5Wb.js";class Oe{constructor(){z(this,"queue",[]);z(this,"isProcessing",!1);z(this,"concurrentLimit",3);z(this,"intervalMs",1e3);z(this,"logOperations",!1);this.logOperations=!1}add(e){e.url&&this.queue.some(i=>i.url===e.url)||(this.queue.push(e),this.logOperations&&U.debug(`Added avatar to preload queue: ${e.url||"(default)"} (${e.userId})`),this.isProcessing||this.processQueue())}addBatch(e){if(!e||e.length===0)return;const i=e.filter(b=>!b.url||!this.queue.some(k=>k.url===b.url));this.queue.push(...i),this.logOperations&&U.debug(`Added ${i.length} avatars to preload queue (${e.length-i.length} duplicates skipped)`),this.isProcessing||this.processQueue()}async processQueue(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;try{const e=this.queue.splice(0,this.concurrentLimit);this.logOperations&&U.debug(`Preloading ${e.length} avatars, ${this.queue.length} remaining in queue`),await Promise.all(e.map(async i=>{try{i.url?await le.cacheAvatar(i.userId,i.url,{name:i.userName,displayName:i.displayName,initial:i.initial}):await this.preloadDefault(i.userId,{name:i.userName,displayName:i.displayName,firstName:i.firstName,lastName:i.lastName,initial:i.initial})}catch(b){U.warn(`Failed to preload avatar for ${i.userId}: ${i.url||"(default)"}`,b)}})),this.queue.length>0?setTimeout(()=>this.processQueue(),this.intervalMs):(this.isProcessing=!1,this.logOperations&&U.debug("Avatar preload queue completed"))}catch(e){U.error("Error processing avatar preload queue:",e),this.isProcessing=!1,this.queue.length>0&&setTimeout(()=>this.processQueue(),this.intervalMs*3)}}preloadDefault(e,i){return e?le.getAvatar(e,void 0,i,!0).catch(b=>(U.warn(`Failed to preload default avatar for ${e}: ${b}`),"")):Promise.resolve("")}preloadFromUsersList(e){if(!e||!Array.isArray(e)||e.length===0)return;const i=e.filter(v=>v&&(v.id||v.userId)).map(v=>{const u=v.id||v.userId,_=v.avatar&&typeof v.avatar=="string"&&v.avatar.startsWith("http");return{userId:u,url:_?v.avatar:"",userName:v.name,displayName:v.displayName,firstName:v.firstName,lastName:v.lastName,initial:this.getUserInitials(v)}}),b=i.filter(v=>!!v.url).length,k=i.length-b;this.logOperations&&U.info(`Preloading ${i.length} avatars from users list (${b} with URLs, ${k} requiring default avatar generation)`),i.length>0&&this.addBatch(i)}scanAndPreload(){const e=document.querySelectorAll('img[alt*="avatar" i], img[alt*="user" i], [data-avatar-url]'),i=[],b=[];e.forEach(k=>{const v=k.getAttribute("data-avatar-url");if(v){const s=k.getAttribute("data-user-id")||"unknown";i.push({userId:s,url:v,userName:k.getAttribute("data-user-name")||void 0,displayName:k.getAttribute("data-user-display-name")||void 0});return}const u=k,_=u.getAttribute("src");if(_&&!_.startsWith("data:")){const s=u;let w=s.getAttribute("data-user-id")||"";if(!w){const D=s.parentElement;w=(D==null?void 0:D.getAttribute("data-user-id"))||""}!w&&_&&(w=`url_${Re(_)}`);const g={userName:s.getAttribute("data-user-name")||void 0,displayName:s.getAttribute("data-display-name")||void 0,firstName:s.getAttribute("data-first-name")||void 0,lastName:s.getAttribute("data-last-name")||void 0,initial:s.getAttribute("data-initial")||void 0};i.push({userId:w,url:_,...g})}else if(!_){const s=u,w=s.getAttribute("data-user-id")||`default_${Math.random().toString(36).substring(2,9)}`;b.push({userId:w,url:"",userName:s.getAttribute("data-user-name")||void 0,displayName:s.getAttribute("data-display-name")||void 0,firstName:s.getAttribute("data-first-name")||void 0,lastName:s.getAttribute("data-last-name")||void 0,initial:s.getAttribute("data-initial")||void 0})}}),this.logOperations&&U.info(`Scanning found ${i.length} external avatars to preload and ${b.length} default avatars to generate`),i.length>0&&this.addBatch(i),b.length>0&&this.addBatch(b)}getUserInitials(e){if(!e)return"";if(e.firstName&&e.lastName)return`${e.firstName[0]}${e.lastName[0]}`.toUpperCase();if(e.displayName){const i=e.displayName.trim().split(/\s+/);return i.length>=2?`${i[0][0]}${i[i.length-1][0]}`.toUpperCase():e.displayName.substring(0,2).toUpperCase()}if(e.name){const i=e.name.trim().split(/\s+/);return i.length>=2?`${i[0][0]}${i[i.length-1][0]}`.toUpperCase():e.name.substring(0,2).toUpperCase()}return(e.id||"XX").substring(0,2).toUpperCase()}setLogging(e){this.logOperations=e,U.debug(`Avatar preloader logging ${e?"enabled":"disabled"}`)}setLimits(e,i){this.concurrentLimit=e,this.intervalMs=i,this.logOperations&&U.debug(`Avatar preloader limits set: ${e} concurrent, ${i}ms interval`)}}function Re(a){let e=0;for(let i=0;i<a.length;i++)e=(e<<5)-e+a.charCodeAt(i),e|=0;return Math.abs(e)}const se=new Oe;function ce(a){return a&&(a.id||a.userId||a.userInitials)||"default"}const Ge=je({name:"ScoutingAssignments",components:{Icon:Le,CachedAvatar:ge},setup(){const a=Be(),{userInfo:e}=qe(a),i=Q(()=>e.value||{}),b=Q(()=>i.value.isAdmin?!0:i.value.groups&&Array.isArray(i.value.groups)?i.value.groups.includes("admin"):!1),k=x(!1),v=x(""),u=x([]),_=x([{key:"2025johnson",name:"2025 Johnson Division"}]),s=x("2025johnson"),w=x("all"),g=x("all"),D=x(""),M=x(!1),q=x(!1),j=x(null),J=x(null),X=x([]),h=x({event_key:"2025johnson",task_type:"scouting",assigned_team_numbers:[],assigned_alliance:"red",assigned_matches:"",assignees_data:[],notes:"",status:"pending"}),$=x([]),V=x(""),pe=Q(()=>{let o=u.value;if(w.value==="my"&&(o=o.filter(n=>oe(n,i.value.id))),g.value!=="all"&&(o=o.filter(n=>n.task_type===g.value)),D.value){const n=D.value.toLowerCase();o=o.filter(r=>Y(r).some(y=>{var A,I,Z;return((A=y.displayName)==null?void 0:A.toLowerCase().includes(n))||((I=y.name)==null?void 0:I.toLowerCase().includes(n))||((Z=y.email)==null?void 0:Z.toLowerCase().includes(n))})||r.notes&&r.notes.toLowerCase().includes(n)||r.assigned_team_numbers&&r.assigned_team_numbers.some(y=>y.toString().includes(n))||r.assigned_matches&&r.assigned_matches.toLowerCase().includes(n))}return o}),ae=o=>{if(!o)return"Unknown User";const n=o.split("/");return n.length>1?n[1]:o},fe=o=>!o||!o.groups?[]:Array.isArray(o.groups)?o.groups.map(n=>n.replace("Team695/","")):[],Y=o=>o.assignees_data&&Array.isArray(o.assignees_data)?o.assignees_data:o.assignee_data?[o.assignee_data]:[],he=o=>o?o.charAt(0).toUpperCase()+o.slice(1):"",oe=(o,n)=>!o||!n?!1:Y(o).some(m=>m.id===n),W=async()=>{k.value=!0,v.value="";try{const o=B.getToken();if(!o)throw new Error("Authentication token not found");const n=b.value?`https://api.team695.com/assignments/events/${s.value}`:`https://api.team695.com/assignments/user/${s.value}`,r=await fetch(n,{headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error(`Failed to load assignments: ${r.statusText}`);const m=await r.json();if(m.success){u.value=m.data||[];const y=[];u.value.forEach(A=>{const I=Y(A);y.push(...I)}),se.preloadFromUsersList(y)}else throw new Error(m.message||"Failed to load assignments")}catch(o){console.error("Error loading assignments:",o),v.value=o.message||"Failed to load assignments. Please try again."}finally{k.value=!1}},ne=async()=>{if(b.value)try{const o=B.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch("https://api.team695.com/auth/users",{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to load team members: ${n.statusText}`);const r=await n.json();if(r.success&&r.data&&r.data.data)X.value=r.data.data,se.preloadFromUsersList(X.value);else throw new Error(r.message||"Failed to load team members")}catch(o){console.error("Error loading team members:",o),C.fire({title:"Error",text:"Failed to load team members. You may not be able to create new assignments.",icon:"error"})}},ve=()=>{W(),K(),b.value&&ne()},ye=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",re=o=>{switch(o){case"pending":return"Pending";case"in_progress":return"In Progress";case"completed":return"Completed";case"canceled":return"Canceled";default:return o}},be=o=>{switch(o){case"pending":return"Start Assignment";case"in_progress":return"Mark Complete";case"completed":return"Reopen";case"canceled":return"Canceled";default:return"Update Status"}},we=async o=>{let n;switch(o.status){case"pending":n="in_progress";break;case"in_progress":n="completed";break;case"completed":n="in_progress";break;default:return}try{const r=B.getToken();if(!r)throw new Error("Authentication token not found");const m=await fetch(`https://api.team695.com/assignments/${o.id}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({status:n})});if(!m.ok)throw new Error(`Failed to update assignment: ${m.statusText}`);const y=await m.json();if(y.success){const A=u.value.findIndex(I=>I.id===o.id);A!==-1&&(u.value[A]=y.data),C.fire({title:"Success",text:`Assignment status updated to ${re(n)}`,icon:"success",timer:2e3,showConfirmButton:!1})}else throw new Error(y.message||"Failed to update assignment")}catch(r){console.error("Error updating assignment status:",r),C.fire({title:"Error",text:r.message||"Failed to update assignment status. Please try again.",icon:"error"})}},O=x(""),ee=x(!1),xe=Q(()=>{const o=new Set($.value.map(r=>r.id));let n=X.value.filter(r=>!o.has(r.id));if(O.value){const r=O.value.toLowerCase();n=n.filter(m=>m.name&&m.name.toLowerCase().includes(r)||m.displayName&&m.displayName.toLowerCase().includes(r)||m.email&&m.email.toLowerCase().includes(r))}return n}),ke=o=>{const n={...o,id:ce(o),firstName:o.firstName||"",lastName:o.lastName||"",displayName:o.displayName||ae(o.name)||""};$.value.push(n),O.value="",h.value.assignees_data=$.value.map(r=>({id:r.id||"default",name:r.name,firstName:r.firstName,lastName:r.lastName,displayName:r.displayName,avatar:r.avatar,email:r.email,groups:r.groups}))},_e=o=>{$.value=$.value.filter(n=>n.id!==o.id),h.value.assignees_data=$.value.map(n=>({id:n.id,name:n.name,displayName:n.displayName,avatar:n.avatar,email:n.email,groups:n.groups}))},Ae=()=>{j.value=null,h.value={event_key:s.value,task_type:"scouting",assigned_team_numbers:[],assigned_alliance:"red",assigned_matches:"",assignees_data:[],notes:"",status:"pending"},V.value="",$.value=[],O.value="",M.value=!0},Ne=o=>{j.value=o,h.value={event_key:o.event_key,task_type:o.task_type,assigned_team_numbers:o.assigned_team_numbers||[],assigned_alliance:o.assigned_alliance||"red",assigned_matches:o.assigned_matches||"",assignees_data:[],notes:o.notes||"",status:o.status},V.value=o.assigned_team_numbers?o.assigned_team_numbers.join(", "):"",o.assignees_data&&Array.isArray(o.assignees_data)?($.value=[...o.assignees_data],h.value.assignees_data=[...o.assignees_data]):o.assignee_data?($.value=[o.assignee_data],h.value.assignees_data=[o.assignee_data]):$.value=[],M.value=!0},Te=o=>{J.value=o,q.value=!0},Ce=async()=>{if(J.value)try{const o=B.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch(`https://api.team695.com/assignments/${J.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to delete assignment: ${n.statusText}`);const r=await n.json();if(r.success)u.value=u.value.filter(m=>m.id!==J.value.id),q.value=!1,C.fire({title:"Deleted!",text:"The assignment has been deleted.",icon:"success",timer:2e3,showConfirmButton:!1});else throw new Error(r.message||"Failed to delete assignment")}catch(o){console.error("Error deleting assignment:",o),q.value=!1,C.fire({title:"Error",text:o.message||"Failed to delete assignment. Please try again.",icon:"error"})}},$e=async()=>{if(h.value.task_type==="pit-scouting"&&V.value&&(h.value.assigned_team_numbers=V.value.split(",").map(o=>parseInt(o.trim())).filter(o=>!isNaN(o))),!h.value.assignees_data.length){C.fire({title:"Error",text:"Please select at least one user to assign this task to",icon:"error"});return}try{const o=B.getToken();if(!o)throw new Error("Authentication token not found");const n={id:i.value.id,name:i.value.name,displayName:i.value.displayName,avatar:i.value.avatar,email:i.value.email,groups:i.value.groups};if(j.value){const r=await fetch(`https://api.team695.com/assignments/${j.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({assigned_team_numbers:h.value.assigned_team_numbers,assigned_alliance:h.value.assigned_alliance,assigned_matches:h.value.assigned_matches,status:h.value.status,notes:h.value.notes,assignees_data:h.value.assignees_data})});if(!r.ok)throw new Error(`Failed to update assignment: ${r.statusText}`);const m=await r.json();if(m.success){const y=u.value.findIndex(A=>A.id===j.value.id);y!==-1&&(u.value[y]=m.data),M.value=!1,C.fire({title:"Success",text:"Assignment updated successfully",icon:"success",timer:2e3,showConfirmButton:!1})}else throw new Error(m.message||"Failed to update assignment")}else{const r={...h.value,assigner_data:n},m=await fetch("https://api.team695.com/assignments",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!m.ok)throw new Error(`Failed to create assignment: ${m.statusText}`);const y=await m.json();if(y.success)u.value.push(y.data),M.value=!1,C.fire({title:"Success",text:"Assignment created successfully",icon:"success",timer:2e3,showConfirmButton:!1});else throw new Error(y.message||"Failed to create assignment")}}catch(o){console.error("Error submitting form:",o),C.fire({title:"Error",text:o.message||"Failed to save assignment. Please try again.",icon:"error"})}};de(s,()=>{W(),K()}),ze(()=>{a.initializeStore(),W(),K(),b.value&&ne(),document.addEventListener("click",o=>{if(ee.value){const n=o.target,r=document.querySelector(".user-dropdown"),m=document.getElementById("assignee-search");!(r!=null&&r.contains(n))&&n!==m&&(ee.value=!1)}if(te.value){const n=o.target,r=document.querySelector(".team-dropdown"),m=document.getElementById("team_search");!(r!=null&&r.contains(n))&&n!==m&&(te.value=!1)}}),setTimeout(()=>{se.scanAndPreload()},1e3)});const Ue=o=>{if(!o)return"";if(o.firstName&&o.lastName)return`${o.firstName[0]}${o.lastName[0]}`.toUpperCase();if(o.displayName){const n=o.displayName.trim().split(/\s+/);return n.length>=2?`${n[0][0]}${n[n.length-1][0]}`.toUpperCase():o.displayName.substring(0,2).toUpperCase()}if(o.name){const n=o.name.trim().split(/\s+/);return n.length>=2?`${n[0][0]}${n[n.length-1][0]}`.toUpperCase():o.name.substring(0,2).toUpperCase()}return(o.id||"XX").substring(0,2).toUpperCase()},L=x([]),H=x(""),te=x(!1),K=async()=>{try{const o=B.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch(`https://api.team695.com/team-matches/event/${s.value}`,{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to load event teams: ${n.statusText}`);const r=await n.json();if(r.success)L.value=r.data||[];else throw new Error(r.message||"Failed to load event teams")}catch(o){console.error("Error loading event teams:",o),C.fire({title:"Warning",text:"Failed to load event teams. Team selection may be unavailable.",icon:"warning"})}},Se=Q(()=>{var r;const o=new Set,n=(r=j.value)==null?void 0:r.id;return u.value.forEach(m=>{n&&m.id===n||m.assigned_team_numbers&&Array.isArray(m.assigned_team_numbers)&&m.assigned_team_numbers.forEach(y=>{o.add(y)})}),o}),De=Q(()=>{const o=Se.value;let n=L.value.filter(r=>!o.has(r.team_number)&&!h.value.assigned_team_numbers.includes(r.team_number));if(H.value){const r=H.value.toLowerCase();n=n.filter(m=>m.team_number.toString().includes(r)||m.nickname&&m.nickname.toLowerCase().includes(r))}return n}),ie=o=>{const n=L.value.find(r=>r.team_number===o);return n?n.is_pit:!1},Ee=o=>{h.value.assigned_team_numbers.includes(o.team_number)||h.value.assigned_team_numbers.push(o.team_number),H.value=""},Ie=o=>{h.value.assigned_team_numbers=h.value.assigned_team_numbers.filter(n=>n!==o)},Pe=o=>{const n=L.value.find(r=>r.team_number===o);return n?n.nickname:""};return de(()=>h.value.task_type,o=>{o==="scouting"?h.value.assigned_team_numbers=[]:o==="pit-scouting"&&(h.value.assigned_alliance="red",h.value.assigned_matches="")}),{userData:i,isAdmin:b,loading:k,error:v,assignments:u,events:_,selectedEvent:s,activeTab:w,filterType:g,searchQuery:D,filteredAssignments:pe,showModal:M,showDeleteModal:q,editingAssignment:j,formData:h,teamMembers:X,teamNumbersInput:V,loadAssignments:W,refreshData:ve,formatDate:ye,formatStatus:re,formatUsername:ae,getUserGroups:fe,getAssigneesList:Y,capitalizeFirstLetter:he,isUserInAssignment:oe,getNextStatusButtonText:be,updateAssignmentStatus:we,openCreateModal:Ae,editAssignment:Ne,confirmDeleteAssignment:Te,deleteAssignment:Ce,submitForm:$e,userSearchQuery:O,showUserDropdown:ee,selectedAssignees:$,filteredUnselectedUsers:xe,addSelectedAssignee:ke,removeSelectedAssignee:_e,ensureSafeUserId:ce,getUserInitialsValue:Ue,eventTeams:L,teamSearchQuery:H,showTeamDropdown:te,filteredAvailableTeams:De,addSelectedTeam:Ee,removeSelectedTeam:Ie,getTeamNickname:Pe,loadEventTeams:K,isTeamPit:ie,toggleTeamPitStatus:async o=>{try{const n=B.getToken();if(!n)throw new Error("Authentication token not found");const m=!ie(o),y=await fetch(`https://api.team695.com/team-matches/pit-status/${s.value}/frc${o}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({is_pit:m})});if(!y.ok)throw new Error(`Failed to update pit status: ${y.statusText}`);const A=await y.json();if(A.success){const I=L.value.findIndex(Z=>Z.team_number===o);I!==-1&&(L.value[I].is_pit=m),C.fire({title:"Success",text:`Team ${o} pit status ${m?"confirmed":"removed"}`,icon:"success",timer:1500,showConfirmButton:!1})}else throw new Error(A.message||"Failed to update pit status")}catch(n){console.error("Error updating pit status:",n),C.fire({title:"Error",text:n.message||"Failed to update pit status. Please try again.",icon:"error"})}}}}}),Je={class:"min-h-screen bg-gray-50"},Xe={class:"px-4 py-6 sm:px-0 mb-6"},Ye={class:"bg-gradient-to-r from-teal-500 to-emerald-600 rounded-lg shadow-lg overflow-hidden"},We={class:"px-6 py-8 md:p-10 md:flex md:items-center md:justify-between"},He={key:0,class:"mt-4 md:mt-0 md:ml-6"},Ke={class:"px-4 sm:px-0 mb-6"},Ze={class:"bg-white rounded-lg shadow p-4 sm:p-6"},et={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},tt={class:"flex flex-col sm:flex-row gap-3"},st={class:"relative"},at=["value"],ot={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},nt={key:0,class:"px-4 sm:px-0 mb-6"},rt={key:1,class:"px-4 sm:px-0 mb-6"},it={class:"bg-red-50 rounded-lg shadow p-6"},lt={class:"flex"},dt={class:"flex-shrink-0"},ut={class:"ml-3"},mt={class:"mt-2 text-red-700"},ct={class:"mt-4"},gt={key:2,class:"px-4 sm:px-0 mb-6"},pt={class:"bg-white rounded-lg shadow p-8 text-center"},ft={class:"mt-1 text-gray-500"},ht={key:0,class:"mt-6"},vt={key:3,class:"px-4 sm:px-0 mb-6"},yt={class:"bg-white rounded-lg shadow"},bt={class:"border-b border-gray-200"},wt={class:"flex -mb-px","aria-label":"Tabs"},xt={class:"overflow-hidden"},kt={class:"px-4 py-5 sm:p-6"},_t={class:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},At={class:"flex items-center"},Nt={class:"flex flex-wrap gap-2"},Tt={class:"relative"},Ct={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},$t={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},Ut={class:"px-4 py-5 sm:p-6"},St={class:"flex justify-between items-start"},Dt={class:"flex items-center"},Et={class:"ml-3"},It={class:"text-lg font-medium text-gray-900"},Pt={class:"text-sm text-gray-500"},Ft={class:"mt-4 space-y-3"},Mt={key:0},jt={class:"mt-1 flex flex-wrap gap-2"},Lt={key:0,class:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Bt=["onClick","title"],qt={key:1},zt={class:"flex items-center justify-between"},Qt={class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800 mt-1"},Vt={class:"mt-1 space-y-2"},Ot={class:"flex-shrink-0"},Rt={class:"ml-3"},Gt={class:"flex items-center"},Jt={class:"text-sm font-medium text-gray-900 flex items-center flex-wrap"},Xt={key:0,class:"text-xs text-teal-600 ml-1"},Yt={key:1,class:"ml-1 flex gap-1 flex-wrap"},Wt={class:"text-xs text-gray-500"},Ht={key:0,class:"text-xs text-gray-500"},Kt={key:2},Zt={class:"mt-1 text-sm text-gray-700 line-clamp-2"},es={class:"flex justify-between text-xs text-gray-500"},ts={class:"mt-5 flex justify-between"},ss=["onClick","disabled"],as={key:1,class:"flex space-x-2"},os=["onClick"],ns=["onClick"],rs={key:0,class:"modal-container"},is={class:"fixed inset-0 z-50 overflow-y-auto"},ls={class:"flex min-h-full items-center justify-center p-4"},ds={class:"relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl overflow-visible"},us={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ms={class:"sm:flex sm:items-start"},cs={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-teal-100 sm:mx-0 sm:h-10 sm:w-10"},gs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ps={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},fs={class:"mt-4 space-y-4"},hs=["disabled"],vs=["value"],ys={key:0},bs={class:"mt-1 relative"},ws={class:"relative"},xs={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ks=["onMousedown"],_s={class:"flex items-center justify-between"},As={class:"text-sm font-medium text-gray-900"},Ns={class:"text-xs text-gray-500"},Ts={class:"flex items-center"},Cs={key:0,class:"px-2 py-0.5 mr-2 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},$s={key:1,class:"absolute z-50 mt-1 w-full bg-white shadow-lg rounded-md py-4 px-4 text-center text-base ring-1 ring-black ring-opacity-5 sm:text-sm"},Us={class:"text-gray-500"},Ss={key:0,class:"mt-2 flex items-center flex-wrap gap-2"},Ds={class:"text-xs font-medium text-gray-800 flex items-center"},Es={key:0,class:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Is=["onClick","title"],Ps={class:"text-xs text-gray-500 ml-1 truncate max-w-[100px]"},Fs=["onClick"],Ms={key:1,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},js={class:"relative"},Ls={key:0,class:"mt-2 flex items-center flex-wrap gap-2"},Bs={class:"flex-shrink-0 mr-1 flex items-center"},qs={class:"text-xs font-medium text-gray-800 flex items-center"},zs=["onClick"],Qs={class:"relative mt-2"},Vs={class:"relative"},Os={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Rs=["onMousedown"],Gs={class:"flex items-center"},Js={class:"flex-shrink-0"},Xs={class:"ml-3"},Ys={class:"flex items-center"},Ws={class:"text-sm font-medium text-gray-900"},Hs={key:0,class:"flex gap-1 flex-wrap"},Ks={key:0,class:"text-xs text-teal-600"},Zs={key:1,class:"ml-1 flex gap-1 flex-wrap"},ea={class:"text-xs text-gray-500"},ta={key:2,class:"mt-1 w-full bg-white shadow-lg rounded-md py-4 px-4 text-center text-base ring-1 ring-black ring-opacity-5 sm:text-sm"},sa={class:"text-gray-500"},aa={key:3},oa={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},na=["disabled"],ra={key:0,class:"modal-container"},ia={class:"fixed inset-0 z-50 overflow-y-auto"},la={class:"flex min-h-full items-center justify-center p-4"},da={class:"relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl overflow-hidden"},ua={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ma={class:"sm:flex sm:items-start"},ca={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},ga={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"};function pa(a,e,i,b,k,v){const u=Ve("Icon"),_=ge;return d(),l(N,null,[t("div",Je,[t("div",Xe,[t("div",Ye,[t("div",We,[e[36]||(e[36]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"}," Scouting Assignments "),t("p",{class:"mt-2 text-teal-100"}," Manage and track team scouting tasks for FRC competitions ")],-1)),a.isAdmin?(d(),l("div",He,[t("button",{onClick:e[0]||(e[0]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-teal-600 bg-white hover:bg-teal-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},[p(u,{icon:"mdi:plus",class:"mr-2 h-5 w-5"}),e[35]||(e[35]=P(" Create Assignment ",-1))])])):f("",!0)])])]),t("div",Ke,[t("div",Ze,[t("div",et,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900 mb-3 sm:mb-0"},"Select Event",-1)),t("div",tt,[t("div",st,[E(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.selectedEvent=s),onChange:e[2]||(e[2]=(...s)=>a.loadAssignments&&a.loadAssignments(...s)),class:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[(d(!0),l(N,null,S(a.events,s=>(d(),l("option",{key:s.key,value:s.key},c(s.name)+" ("+c(s.key)+") ",9,at))),128))],544),[[R,a.selectedEvent]]),t("div",ot,[p(u,{icon:"mdi:chevron-down",class:"h-5 w-5"})])]),t("button",{onClick:e[3]||(e[3]=(...s)=>a.refreshData&&a.refreshData(...s)),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},[p(u,{icon:"mdi:refresh",class:"mr-2 h-5 w-5"}),e[37]||(e[37]=P(" Refresh ",-1))])])])])]),a.loading?(d(),l("div",nt,e[39]||(e[39]=[t("div",{class:"bg-white rounded-lg shadow p-8 flex justify-center"},[t("div",{class:"flex flex-col items-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-500"}),t("p",{class:"mt-4 text-gray-600"},"Loading assignments...")])],-1)]))):a.error?(d(),l("div",rt,[t("div",it,[t("div",lt,[t("div",dt,[p(u,{icon:"mdi:alert-circle",class:"h-6 w-6 text-red-500"})]),t("div",ut,[e[40]||(e[40]=t("h3",{class:"text-lg font-medium text-red-800"},"Error loading assignments",-1)),t("div",mt,[t("p",null,c(a.error),1)]),t("div",ct,[t("button",{onClick:e[4]||(e[4]=(...s)=>a.refreshData&&a.refreshData(...s)),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Try Again ")])])])])])):a.assignments.length?(d(),l("div",vt,[t("div",yt,[t("div",bt,[t("nav",wt,[t("button",{onClick:e[6]||(e[6]=s=>a.activeTab="all"),class:T(["w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm",a.activeTab==="all"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(u,{icon:a.activeTab==="all"?"mdi:view-dashboard":"mdi:view-dashboard-outline",class:"h-5 w-5 inline-block mr-2"},null,8,["icon"]),e[43]||(e[43]=P(" All Assignments ",-1))],2),t("button",{onClick:e[7]||(e[7]=s=>a.activeTab="my"),class:T(["w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm",a.activeTab==="my"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(u,{icon:a.activeTab==="my"?"mdi:account-check":"mdi:account-check-outline",class:"h-5 w-5 inline-block mr-2"},null,8,["icon"]),e[44]||(e[44]=P(" My Assignments ",-1))],2)])]),t("div",xt,[t("div",kt,[t("div",_t,[t("div",At,[e[45]||(e[45]=t("span",{class:"mr-3 text-sm font-medium text-gray-700"},"Filter by:",-1)),t("div",Nt,[t("button",{onClick:e[8]||(e[8]=s=>a.filterType="all"),class:T(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="all"?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," All Types ",2),t("button",{onClick:e[9]||(e[9]=s=>a.filterType="scouting"),class:T(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="scouting"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," Match Scouting ",2),t("button",{onClick:e[10]||(e[10]=s=>a.filterType="pit-scouting"),class:T(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="pit-scouting"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," Pit Scouting ",2)])]),t("div",Tt,[t("div",Ct,[p(u,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),E(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>a.searchQuery=s),type:"text",placeholder:"Search assignments...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[G,a.searchQuery]])])]),t("div",$t,[(d(!0),l(N,null,S(a.filteredAssignments,s=>{var w;return d(),l("div",{key:s.id,class:T(["bg-white overflow-hidden shadow rounded-lg border hover:shadow-md transition-shadow duration-300",{"border-blue-200":s.task_type==="scouting","border-purple-200":s.task_type==="pit-scouting"}])},[t("div",Ut,[t("div",St,[t("div",Dt,[t("div",{class:T(["flex-shrink-0 rounded-md p-2",{"bg-blue-100":s.task_type==="scouting","bg-purple-100":s.task_type==="pit-scouting"}])},[p(u,{icon:s.task_type==="scouting"?"mdi:clipboard-text":"mdi:robot",class:T(["h-6 w-6",{"text-blue-600":s.task_type==="scouting","text-purple-600":s.task_type==="pit-scouting"}])},null,8,["icon","class"])],2),t("div",Et,[t("h3",It,c(s.task_type==="scouting"?"Match Scouting":"Pit Scouting"),1),t("p",Pt,"ID: "+c(s.id),1)])]),t("div",null,[t("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-blue-100 text-blue-800":s.status==="in_progress","bg-green-100 text-green-800":s.status==="completed","bg-gray-100 text-gray-800":s.status==="canceled"}])},c(a.formatStatus(s.status)),3)])]),t("div",Ft,[s.task_type==="pit-scouting"&&((w=s.assigned_team_numbers)!=null&&w.length)?(d(),l("div",Mt,[e[47]||(e[47]=t("h4",{class:"text-sm font-medium text-gray-500"},"Assigned Teams:",-1)),t("div",jt,[(d(!0),l(N,null,S(s.assigned_team_numbers,g=>(d(),l("span",{key:g,class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800"},[P(" Team "+c(g)+" ",1),a.isTeamPit(g)?(d(),l("span",Lt,[p(u,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"}),e[46]||(e[46]=P("Pit ",-1))])):f("",!0),a.isAdmin?(d(),l("button",{key:1,onClick:F(D=>a.toggleTeamPitStatus(g),["stop"]),class:"ml-1 p-0.5 text-gray-500 hover:text-purple-600",title:a.isTeamPit(g)?"Remove pit status":"Mark as pit team"},[p(u,{icon:a.isTeamPit(g)?"mdi:close-circle":"mdi:check-circle",class:"h-4 w-4"},null,8,["icon"])],8,Bt)):f("",!0)]))),128))])])):f("",!0),s.task_type==="scouting"?(d(),l("div",qt,[t("div",zt,[t("div",null,[e[48]||(e[48]=t("h4",{class:"text-sm font-medium text-gray-500"},"Alliance:",-1)),t("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium mt-1",s.assigned_alliance==="red"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"])},c(s.assigned_alliance==="red"?"Red Alliance":"Blue Alliance"),3)]),t("div",null,[e[49]||(e[49]=t("h4",{class:"text-sm font-medium text-gray-500"},"Matches:",-1)),t("span",Qt,c(s.assigned_matches||"Not specified"),1)])])])):f("",!0),t("div",null,[e[50]||(e[50]=t("h4",{class:"text-sm font-medium text-gray-500"},"Assigned To:",-1)),t("div",Vt,[(d(!0),l(N,null,S(a.getAssigneesList(s),(g,D)=>(d(),l("div",{key:D,class:"flex items-center"},[t("div",Ot,[p(_,{userId:g.id,initial:a.getUserInitialsValue(g),src:g.avatar,size:32,firstName:g.firstName,lastName:g.lastName,displayName:g.displayName||a.formatUsername(g.name),alt:"Assignee Avatar",class:"h-8 w-8 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("div",Rt,[t("div",Gt,[t("p",Jt,[t("span",null,c(g.displayName||a.formatUsername(g.name)||"Unknown"),1),g.id===a.userData.id?(d(),l("span",Xt,"(You)")):f("",!0),a.getUserGroups(g).length>0?(d(),l("span",Yt,[(d(!0),l(N,null,S(a.getUserGroups(g),(M,q)=>(d(),l("span",{key:q,class:"px-2 py-0.5 text-xs font-medium rounded-md bg-amber-100 text-amber-700"},c(a.capitalizeFirstLetter(M)),1))),128))])):f("",!0)])]),t("div",Wt,c(a.formatUsername(g.name))+" · "+c(g.email||"No email"),1)])]))),128)),a.getAssigneesList(s).length>2?(d(),l("div",Ht," + "+c(a.getAssigneesList(s).length-2)+" more users ",1)):f("",!0)])]),s.notes?(d(),l("div",Kt,[e[51]||(e[51]=t("h4",{class:"text-sm font-medium text-gray-500"},"Notes:",-1)),t("p",Zt,c(s.notes),1)])):f("",!0),t("div",es,[t("span",null,"Created: "+c(a.formatDate(s.created_at)),1),t("span",null,"Updated: "+c(a.formatDate(s.updated_at)),1)])]),t("div",ts,[a.isUserInAssignment(s,a.userData.id)||a.isAdmin?(d(),l("button",{key:0,onClick:g=>a.updateAssignmentStatus(s),class:T(["inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",{"bg-yellow-600 hover:bg-yellow-700":s.status==="pending","bg-blue-600 hover:bg-blue-700":s.status==="in_progress","bg-green-600 hover:bg-green-700":s.status==="completed","bg-gray-400 cursor-not-allowed":s.status==="canceled"}]),disabled:s.status==="canceled"},c(a.getNextStatusButtonText(s.status)),11,ss)):f("",!0),a.isAdmin?(d(),l("div",as,[t("button",{onClick:g=>a.editAssignment(s),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[p(u,{icon:"mdi:pencil",class:"h-4 w-4"})],8,os),t("button",{onClick:g=>a.confirmDeleteAssignment(s),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[p(u,{icon:"mdi:delete",class:"h-4 w-4"})],8,ns)])):f("",!0)])])],2)}),128))])])])])])):(d(),l("div",gt,[t("div",pt,[p(u,{icon:"mdi:clipboard-text-outline",class:"mx-auto h-12 w-12 text-gray-400"}),e[42]||(e[42]=t("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No assignments found",-1)),t("p",ft,c(a.isAdmin?"Create a new assignment to get started.":"You have no assignments for this event."),1),a.isAdmin?(d(),l("div",ht,[t("button",{onClick:e[5]||(e[5]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[p(u,{icon:"mdi:plus",class:"mr-2 h-5 w-5"}),e[41]||(e[41]=P(" Create Assignment ",-1))])])):f("",!0)])])),p(me,{name:"fade"},{default:ue(()=>[a.showModal?(d(),l("div",rs,[e[64]||(e[64]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-40"},null,-1)),t("div",is,[t("div",ls,[t("div",ds,[t("button",{onClick:e[12]||(e[12]=s=>a.showModal=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 z-10"},[p(u,{icon:"mdi:close",class:"h-6 w-6"})]),t("div",us,[t("div",ms,[t("div",cs,[p(u,{icon:a.editingAssignment?"mdi:pencil":"mdi:plus",class:"h-6 w-6 text-teal-600"},null,8,["icon"])]),t("div",gs,[t("h3",ps,c(a.editingAssignment?"Edit Assignment":"Create New Assignment"),1),t("div",fs,[t("div",null,[e[52]||(e[52]=t("label",{for:"event_key",class:"block text-sm font-medium text-gray-700"},"Event",-1)),E(t("select",{id:"event_key","onUpdate:modelValue":e[13]||(e[13]=s=>a.formData.event_key=s),disabled:!!a.editingAssignment,class:T(["mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",{"bg-gray-100":!!a.editingAssignment}])},[(d(!0),l(N,null,S(a.events,s=>(d(),l("option",{key:s.key,value:s.key},c(s.name)+" ("+c(s.key)+") ",9,vs))),128))],10,hs),[[R,a.formData.event_key]])]),t("div",null,[e[54]||(e[54]=t("label",{for:"task_type",class:"block text-sm font-medium text-gray-700"},"Task Type",-1)),E(t("select",{id:"task_type","onUpdate:modelValue":e[14]||(e[14]=s=>a.formData.task_type=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},e[53]||(e[53]=[t("option",{value:"scouting"},"Match Scouting",-1),t("option",{value:"pit-scouting"},"Pit Scouting",-1)]),512),[[R,a.formData.task_type]])]),a.formData.task_type==="pit-scouting"?(d(),l("div",ys,[e[56]||(e[56]=t("label",{for:"assigned_team_numbers",class:"block text-sm font-medium text-gray-700"},"Assigned Teams",-1)),t("div",bs,[t("div",ws,[E(t("input",{id:"team_search","onUpdate:modelValue":e[15]||(e[15]=s=>a.teamSearchQuery=s),onFocus:e[16]||(e[16]=s=>a.showTeamDropdown=!0),onInput:e[17]||(e[17]=s=>a.showTeamDropdown=!0),placeholder:"Search teams...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,544),[[G,a.teamSearchQuery]]),t("div",xs,[p(u,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),a.teamSearchQuery?(d(),l("button",{key:0,onClick:e[18]||(e[18]=F(s=>{a.teamSearchQuery="",a.showTeamDropdown=!0},["stop"])),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p(u,{icon:"mdi:close",class:"h-5 w-5 text-gray-400 hover:text-gray-600"})])):f("",!0)]),a.showTeamDropdown&&a.filteredAvailableTeams.length>0?(d(),l("div",{key:0,class:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm team-dropdown",style:{"max-height":"300px"},onClick:e[19]||(e[19]=F(()=>{},["stop"]))},[(d(!0),l(N,null,S(a.filteredAvailableTeams,s=>(d(),l("div",{key:s.team_number,onMousedown:F(w=>a.addSelectedTeam(s),["prevent"]),class:"cursor-pointer hover:bg-gray-100 px-4 py-2"},[t("div",_s,[t("div",null,[t("span",As," Team "+c(s.team_number),1),t("p",Ns,c(s.nickname),1)]),t("div",Ts,[s.is_pit?(d(),l("span",Cs,[p(u,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"})])):f("",!0),e[55]||(e[55]=t("span",{class:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800"}," Add ",-1))])])],40,ks))),128))])):f("",!0),a.showTeamDropdown&&a.teamSearchQuery&&a.filteredAvailableTeams.length===0?(d(),l("div",$s,[t("p",Us,'No available teams found matching "'+c(a.teamSearchQuery)+'"',1)])):f("",!0)]),a.formData.assigned_team_numbers.length>0?(d(),l("div",Ss,[(d(!0),l(N,null,S(a.formData.assigned_team_numbers,s=>(d(),l("div",{key:s,class:"inline-flex items-center bg-gray-100 rounded-full pl-2 pr-1 py-1"},[t("span",Ds,[P(" Team "+c(s)+" ",1),a.isTeamPit(s)?(d(),l("span",Es,[p(u,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"})])):f("",!0),a.isAdmin?(d(),l("button",{key:1,onClick:F(w=>a.toggleTeamPitStatus(s),["stop"]),class:"ml-1 p-0.5 text-gray-500 hover:text-purple-600",title:a.isTeamPit(s)?"Remove pit status":"Mark as pit team"},[p(u,{icon:a.isTeamPit(s)?"mdi:close-circle":"mdi:check-circle",class:"h-4 w-4"},null,8,["icon"])],8,Is)):f("",!0),t("span",Ps,c(a.getTeamNickname(s)),1)]),t("button",{onClick:w=>a.removeSelectedTeam(s),class:"ml-1 rounded-full p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center"},[p(u,{icon:"mdi:close",class:"h-3 w-3"})],8,Fs)]))),128))])):f("",!0)])):f("",!0),a.formData.task_type==="scouting"?(d(),l("div",Ms,[t("div",null,[e[58]||(e[58]=t("label",{for:"assigned_alliance",class:"block text-sm font-medium text-gray-700"},"Alliance",-1)),E(t("select",{id:"assigned_alliance","onUpdate:modelValue":e[20]||(e[20]=s=>a.formData.assigned_alliance=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},e[57]||(e[57]=[t("option",{value:"red"},"Red Alliance",-1),t("option",{value:"blue"},"Blue Alliance",-1)]),512),[[R,a.formData.assigned_alliance]])]),t("div",null,[e[59]||(e[59]=t("label",{for:"assigned_matches",class:"block text-sm font-medium text-gray-700"},"Match Range",-1)),E(t("input",{id:"assigned_matches","onUpdate:modelValue":e[21]||(e[21]=s=>a.formData.assigned_matches=s),type:"text",placeholder:"e.g., Q3-Q12",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[G,a.formData.assigned_matches]])])])):f("",!0),t("div",js,[e[60]||(e[60]=t("label",{for:"assignee-search",class:"block text-sm font-medium text-gray-700"},"Assign To",-1)),a.selectedAssignees.length>0?(d(),l("div",Ls,[(d(!0),l(N,null,S(a.selectedAssignees,(s,w)=>(d(),l("div",{key:w,class:"inline-flex items-center bg-gray-100 rounded-full pl-2 pr-1 py-1"},[t("div",Bs,[p(_,{userId:s.id,initial:a.getUserInitialsValue(s),size:24,src:s.avatar,firstName:s.firstName,lastName:s.lastName,displayName:s.displayName||a.formatUsername(s.name),alt:"User Avatar",class:"h-6 w-6 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("span",qs,c(s.displayName||a.formatUsername(s.name)),1),t("button",{onClick:g=>a.removeSelectedAssignee(s),class:"ml-1 rounded-full p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center"},[p(u,{icon:"mdi:close",class:"h-3 w-3"})],8,zs)]))),128))])):f("",!0),t("div",Qs,[t("div",Vs,[E(t("input",{id:"assignee-search",type:"text","onUpdate:modelValue":e[22]||(e[22]=s=>a.userSearchQuery=s),onFocus:e[23]||(e[23]=s=>a.showUserDropdown=!0),onInput:e[24]||(e[24]=s=>a.showUserDropdown=!0),onClick:e[25]||(e[25]=F(()=>{},["stop"])),placeholder:"Search to add more users...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,544),[[G,a.userSearchQuery]]),t("div",Os,[p(u,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),a.userSearchQuery?(d(),l("button",{key:0,onClick:e[26]||(e[26]=F(s=>{a.userSearchQuery="",a.showUserDropdown=!0},["stop"])),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p(u,{icon:"mdi:close",class:"h-5 w-5 text-gray-400 hover:text-gray-600"})])):f("",!0)]),a.showUserDropdown&&a.filteredUnselectedUsers.length>0?(d(),l("div",{key:0,class:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",style:{"max-height":"300px"},onClick:e[27]||(e[27]=F(()=>{},["stop"]))},[(d(!0),l(N,null,S(a.filteredUnselectedUsers,s=>(d(),l("div",{key:s.id,onMousedown:F(w=>a.addSelectedAssignee(s),["prevent"]),class:"cursor-pointer hover:bg-gray-100 px-4 py-2"},[t("div",Gs,[t("div",Js,[p(_,{userId:s.id,initial:a.getUserInitialsValue(s),src:s.avatar,size:32,firstName:s.firstName,lastName:s.lastName,displayName:s.displayName||a.formatUsername(s.name),alt:"User Avatar",class:"h-8 w-8 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("div",Xs,[t("div",Ys,[t("p",Ws,[a.getUserGroups(s).length>0?(d(),l("span",Hs,[P(c(s.displayName||a.formatUsername(s.name))+" ",1),s.id===a.userData.id?(d(),l("span",Ks,"(You)")):f("",!0),a.getUserGroups(s).length>0?(d(),l("span",Zs,[(d(!0),l(N,null,S(a.getUserGroups(s),(w,g)=>(d(),l("span",{key:g,class:"px-2 py-0.5 text-xs font-medium rounded-md bg-amber-100 text-amber-700"},c(a.capitalizeFirstLetter(w)),1))),128))])):f("",!0)])):f("",!0)])]),t("div",ea,c(a.formatUsername(s.name||""))+" · "+c(s.email||"No email"),1)])])],40,Rs))),128))])):f("",!0)])]),a.showUserDropdown&&a.userSearchQuery&&a.filteredUnselectedUsers.length===0?(d(),l("div",ta,[t("p",sa,'No users found matching "'+c(a.userSearchQuery)+'" ',1)])):f("",!0),a.editingAssignment?(d(),l("div",aa,[e[62]||(e[62]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),E(t("select",{id:"status","onUpdate:modelValue":e[28]||(e[28]=s=>a.formData.status=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},e[61]||(e[61]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"canceled"},"Canceled",-1)]),512),[[R,a.formData.status]])])):f("",!0),t("div",null,[e[63]||(e[63]=t("label",{for:"notes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),E(t("textarea",{id:"notes","onUpdate:modelValue":e[29]||(e[29]=s=>a.formData.notes=s),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Add any additional instructions or notes"},null,512),[[G,a.formData.notes]])])])])])]),t("div",oa,[t("button",{onClick:e[30]||(e[30]=(...s)=>a.submitForm&&a.submitForm(...s)),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-teal-600 text-base font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:!a.selectedAssignees.length},c(a.editingAssignment?"Update":"Create"),9,na),t("button",{onClick:e[31]||(e[31]=s=>a.showModal=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0)]),_:1})]),p(me,{name:"fade"},{default:ue(()=>[a.showDeleteModal?(d(),l("div",ra,[e[66]||(e[66]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-40"},null,-1)),t("div",ia,[t("div",la,[t("div",da,[t("button",{onClick:e[32]||(e[32]=s=>a.showDeleteModal=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},[p(u,{icon:"mdi:close",class:"h-6 w-6"})]),t("div",ua,[t("div",ma,[t("div",ca,[p(u,{icon:"mdi:alert",class:"h-6 w-6 text-red-600"})]),e[65]||(e[65]=t("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Assignment "),t("div",{class:"mt-2"},[t("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this assignment? This action cannot be undone. ")])],-1))])]),t("div",ga,[t("button",{onClick:e[33]||(e[33]=(...s)=>a.deleteAssignment&&a.deleteAssignment(...s)),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),t("button",{onClick:e[34]||(e[34]=s=>a.showDeleteModal=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0)]),_:1})],64)}const wa=Qe(Ge,[["render",pa],["__scopeId","data-v-dc4ca779"]]);export{wa as default};
