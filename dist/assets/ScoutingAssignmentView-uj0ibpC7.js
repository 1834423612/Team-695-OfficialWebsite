import{_ as me}from"./CachedAvatar-B7uXVUc-.js";import{N as $,a8 as re,f as Pe,I as Fe,E as Me,J as je,y as q,r as w,q as ie,o as Le,D as j,_ as Be,c as l,a as t,h as p,j as f,b as E,i as qe,k as S,X as V,F as _,e as U,t as g,n as A,v as O,B as I,w as le,T as de,d}from"./index-ChunK-zk.js";import{S as N}from"./sweetalert2.esm.all-DPN7wbWM.js";class ze{queue=[];isProcessing=!1;concurrentLimit=3;intervalMs=1e3;logOperations=!1;constructor(){this.logOperations=!1}add(e){e.url&&this.queue.some(i=>i.url===e.url)||(this.queue.push(e),this.logOperations&&$.debug(`Added avatar to preload queue: ${e.url||"(default)"} (${e.userId})`),this.isProcessing||this.processQueue())}addBatch(e){if(!e||e.length===0)return;const i=e.filter(b=>!b.url||!this.queue.some(x=>x.url===b.url));this.queue.push(...i),this.logOperations&&$.debug(`Added ${i.length} avatars to preload queue (${e.length-i.length} duplicates skipped)`),this.isProcessing||this.processQueue()}async processQueue(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;try{const e=this.queue.splice(0,this.concurrentLimit);this.logOperations&&$.debug(`Preloading ${e.length} avatars, ${this.queue.length} remaining in queue`),await Promise.all(e.map(async i=>{try{i.url?await re.cacheAvatar(i.userId,i.url,{name:i.userName,displayName:i.displayName,initial:i.initial}):await this.preloadDefault(i.userId,{name:i.userName,displayName:i.displayName,firstName:i.firstName,lastName:i.lastName,initial:i.initial})}catch(b){$.warn(`Failed to preload avatar for ${i.userId}: ${i.url||"(default)"}`,b)}})),this.queue.length>0?setTimeout(()=>this.processQueue(),this.intervalMs):(this.isProcessing=!1,this.logOperations&&$.debug("Avatar preload queue completed"))}catch(e){$.error("Error processing avatar preload queue:",e),this.isProcessing=!1,this.queue.length>0&&setTimeout(()=>this.processQueue(),this.intervalMs*3)}}preloadDefault(e,i){return e?re.getAvatar(e,void 0,i,!0).catch(b=>($.warn(`Failed to preload default avatar for ${e}: ${b}`),"")):Promise.resolve("")}preloadFromUsersList(e){if(!e||!Array.isArray(e)||e.length===0)return;const i=e.filter(v=>v&&(v.id||v.userId)).map(v=>{const u=v.id||v.userId,k=v.avatar&&typeof v.avatar=="string"&&v.avatar.startsWith("http");return{userId:u,url:k?v.avatar:"",userName:v.name,displayName:v.displayName,firstName:v.firstName,lastName:v.lastName,initial:this.getUserInitials(v)}}),b=i.filter(v=>!!v.url).length,x=i.length-b;this.logOperations&&$.info(`Preloading ${i.length} avatars from users list (${b} with URLs, ${x} requiring default avatar generation)`),i.length>0&&this.addBatch(i)}scanAndPreload(){const e=document.querySelectorAll('img[alt*="avatar" i], img[alt*="user" i], [data-avatar-url]'),i=[],b=[];e.forEach(x=>{const v=x.getAttribute("data-avatar-url");if(v){const s=x.getAttribute("data-user-id")||"unknown";i.push({userId:s,url:v,userName:x.getAttribute("data-user-name")||void 0,displayName:x.getAttribute("data-user-display-name")||void 0});return}const u=x,k=u.getAttribute("src");if(k&&!k.startsWith("data:")){const s=u;let m=s.getAttribute("data-user-id")||"";m||(m=s.parentElement?.getAttribute("data-user-id")||""),!m&&k&&(m=`url_${Qe(k)}`);const T={userName:s.getAttribute("data-user-name")||void 0,displayName:s.getAttribute("data-display-name")||void 0,firstName:s.getAttribute("data-first-name")||void 0,lastName:s.getAttribute("data-last-name")||void 0,initial:s.getAttribute("data-initial")||void 0};i.push({userId:m,url:k,...T})}else if(!k){const s=u,m=s.getAttribute("data-user-id")||`default_${Math.random().toString(36).substring(2,9)}`;b.push({userId:m,url:"",userName:s.getAttribute("data-user-name")||void 0,displayName:s.getAttribute("data-display-name")||void 0,firstName:s.getAttribute("data-first-name")||void 0,lastName:s.getAttribute("data-last-name")||void 0,initial:s.getAttribute("data-initial")||void 0})}}),this.logOperations&&$.info(`Scanning found ${i.length} external avatars to preload and ${b.length} default avatars to generate`),i.length>0&&this.addBatch(i),b.length>0&&this.addBatch(b)}getUserInitials(e){if(!e)return"";if(e.firstName&&e.lastName)return`${e.firstName[0]}${e.lastName[0]}`.toUpperCase();if(e.displayName){const i=e.displayName.trim().split(/\s+/);return i.length>=2?`${i[0][0]}${i[i.length-1][0]}`.toUpperCase():e.displayName.substring(0,2).toUpperCase()}if(e.name){const i=e.name.trim().split(/\s+/);return i.length>=2?`${i[0][0]}${i[i.length-1][0]}`.toUpperCase():e.name.substring(0,2).toUpperCase()}return(e.id||"XX").substring(0,2).toUpperCase()}setLogging(e){this.logOperations=e,$.debug(`Avatar preloader logging ${e?"enabled":"disabled"}`)}setLimits(e,i){this.concurrentLimit=e,this.intervalMs=i,this.logOperations&&$.debug(`Avatar preloader limits set: ${e} concurrent, ${i}ms interval`)}}function Qe(a){let e=0;for(let i=0;i<a.length;i++)e=(e<<5)-e+a.charCodeAt(i),e|=0;return Math.abs(e)}const ee=new ze;function ue(a){return a&&(a.id||a.userId||a.userInitials)||"default"}const Ve=Pe({name:"ScoutingAssignments",components:{Icon:Fe,CachedAvatar:me},setup(){const a=Me(),{userInfo:e}=je(a),i=q(()=>e.value||{}),b=q(()=>i.value.isAdmin?!0:i.value.groups&&Array.isArray(i.value.groups)?i.value.groups.includes("admin"):!1),x=w(!1),v=w(""),u=w([]),k=w([{key:"2025johnson",name:"2025 Johnson Division"}]),s=w("2025johnson"),m=w("all"),T=w("all"),L=w(""),P=w(!1),R=w(!1),F=w(null),G=w(null),J=w([]),h=w({event_key:"2025johnson",task_type:"scouting",assigned_team_numbers:[],assigned_alliance:"red",assigned_matches:"",assignees_data:[],notes:"",status:"pending"}),C=w([]),z=w(""),ce=q(()=>{let o=u.value;if(m.value==="my"&&(o=o.filter(n=>se(n,i.value.id))),T.value!=="all"&&(o=o.filter(n=>n.task_type===T.value)),L.value){const n=L.value.toLowerCase();o=o.filter(r=>X(r).some(y=>y.displayName?.toLowerCase().includes(n)||y.name?.toLowerCase().includes(n)||y.email?.toLowerCase().includes(n))||r.notes&&r.notes.toLowerCase().includes(n)||r.assigned_team_numbers&&r.assigned_team_numbers.some(y=>y.toString().includes(n))||r.assigned_matches&&r.assigned_matches.toLowerCase().includes(n))}return o}),te=o=>{if(!o)return"Unknown User";const n=o.split("/");return n.length>1?n[1]:o},ge=o=>!o||!o.groups?[]:Array.isArray(o.groups)?o.groups.map(n=>n.replace("Team695/","")):[],X=o=>o.assignees_data&&Array.isArray(o.assignees_data)?o.assignees_data:o.assignee_data?[o.assignee_data]:[],pe=o=>o?o.charAt(0).toUpperCase()+o.slice(1):"",se=(o,n)=>!o||!n?!1:X(o).some(c=>c.id===n),Y=async()=>{x.value=!0,v.value="";try{const o=j.getToken();if(!o)throw new Error("Authentication token not found");const n=b.value?`https://api.team695.com/assignments/events/${s.value}`:`https://api.team695.com/assignments/user/${s.value}`,r=await fetch(n,{headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error(`Failed to load assignments: ${r.statusText}`);const c=await r.json();if(c.success){u.value=c.data||[];const y=[];u.value.forEach(D=>{const B=X(D);y.push(...B)}),ee.preloadFromUsersList(y)}else throw new Error(c.message||"Failed to load assignments")}catch(o){console.error("Error loading assignments:",o),v.value=o.message||"Failed to load assignments. Please try again."}finally{x.value=!1}},ae=async()=>{if(b.value)try{const o=j.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch("https://api.team695.com/auth/users",{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to load team members: ${n.statusText}`);const r=await n.json();if(r.success&&r.data&&r.data.data)J.value=r.data.data,ee.preloadFromUsersList(J.value);else throw new Error(r.message||"Failed to load team members")}catch(o){console.error("Error loading team members:",o),N.fire({title:"Error",text:"Failed to load team members. You may not be able to create new assignments.",icon:"error"})}},fe=()=>{Y(),H(),b.value&&ae()},he=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",oe=o=>{switch(o){case"pending":return"Pending";case"in_progress":return"In Progress";case"completed":return"Completed";case"canceled":return"Canceled";default:return o}},ve=o=>{switch(o){case"pending":return"Start Assignment";case"in_progress":return"Mark Complete";case"completed":return"Reopen";case"canceled":return"Canceled";default:return"Update Status"}},ye=async o=>{let n;switch(o.status){case"pending":n="in_progress";break;case"in_progress":n="completed";break;case"completed":n="in_progress";break;default:return}try{const r=j.getToken();if(!r)throw new Error("Authentication token not found");const c=await fetch(`https://api.team695.com/assignments/${o.id}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({status:n})});if(!c.ok)throw new Error(`Failed to update assignment: ${c.statusText}`);const y=await c.json();if(y.success){const D=u.value.findIndex(B=>B.id===o.id);D!==-1&&(u.value[D]=y.data),N.fire({title:"Success",text:`Assignment status updated to ${oe(n)}`,icon:"success",timer:2e3,showConfirmButton:!1})}else throw new Error(y.message||"Failed to update assignment")}catch(r){console.error("Error updating assignment status:",r),N.fire({title:"Error",text:r.message||"Failed to update assignment status. Please try again.",icon:"error"})}},Q=w(""),K=w(!1),be=q(()=>{const o=new Set(C.value.map(r=>r.id));let n=J.value.filter(r=>!o.has(r.id));if(Q.value){const r=Q.value.toLowerCase();n=n.filter(c=>c.name&&c.name.toLowerCase().includes(r)||c.displayName&&c.displayName.toLowerCase().includes(r)||c.email&&c.email.toLowerCase().includes(r))}return n}),we=o=>{const n={...o,id:ue(o),firstName:o.firstName||"",lastName:o.lastName||"",displayName:o.displayName||te(o.name)||""};C.value.push(n),Q.value="",h.value.assignees_data=C.value.map(r=>({id:r.id||"default",name:r.name,firstName:r.firstName,lastName:r.lastName,displayName:r.displayName,avatar:r.avatar,email:r.email,groups:r.groups}))},xe=o=>{C.value=C.value.filter(n=>n.id!==o.id),h.value.assignees_data=C.value.map(n=>({id:n.id,name:n.name,displayName:n.displayName,avatar:n.avatar,email:n.email,groups:n.groups}))},ke=()=>{F.value=null,h.value={event_key:s.value,task_type:"scouting",assigned_team_numbers:[],assigned_alliance:"red",assigned_matches:"",assignees_data:[],notes:"",status:"pending"},z.value="",C.value=[],Q.value="",P.value=!0},_e=o=>{F.value=o,h.value={event_key:o.event_key,task_type:o.task_type,assigned_team_numbers:o.assigned_team_numbers||[],assigned_alliance:o.assigned_alliance||"red",assigned_matches:o.assigned_matches||"",assignees_data:[],notes:o.notes||"",status:o.status},z.value=o.assigned_team_numbers?o.assigned_team_numbers.join(", "):"",o.assignees_data&&Array.isArray(o.assignees_data)?(C.value=[...o.assignees_data],h.value.assignees_data=[...o.assignees_data]):o.assignee_data?(C.value=[o.assignee_data],h.value.assignees_data=[o.assignee_data]):C.value=[],P.value=!0},Ae=o=>{G.value=o,R.value=!0},Ne=async()=>{if(G.value)try{const o=j.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch(`https://api.team695.com/assignments/${G.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to delete assignment: ${n.statusText}`);const r=await n.json();if(r.success)u.value=u.value.filter(c=>c.id!==G.value.id),R.value=!1,N.fire({title:"Deleted!",text:"The assignment has been deleted.",icon:"success",timer:2e3,showConfirmButton:!1});else throw new Error(r.message||"Failed to delete assignment")}catch(o){console.error("Error deleting assignment:",o),R.value=!1,N.fire({title:"Error",text:o.message||"Failed to delete assignment. Please try again.",icon:"error"})}},Te=async()=>{if(h.value.task_type==="pit-scouting"&&z.value&&(h.value.assigned_team_numbers=z.value.split(",").map(o=>parseInt(o.trim())).filter(o=>!isNaN(o))),!h.value.assignees_data.length){N.fire({title:"Error",text:"Please select at least one user to assign this task to",icon:"error"});return}try{const o=j.getToken();if(!o)throw new Error("Authentication token not found");const n={id:i.value.id,name:i.value.name,displayName:i.value.displayName,avatar:i.value.avatar,email:i.value.email,groups:i.value.groups};if(F.value){const r=await fetch(`https://api.team695.com/assignments/${F.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({assigned_team_numbers:h.value.assigned_team_numbers,assigned_alliance:h.value.assigned_alliance,assigned_matches:h.value.assigned_matches,status:h.value.status,notes:h.value.notes,assignees_data:h.value.assignees_data})});if(!r.ok)throw new Error(`Failed to update assignment: ${r.statusText}`);const c=await r.json();if(c.success){const y=u.value.findIndex(D=>D.id===F.value.id);y!==-1&&(u.value[y]=c.data),P.value=!1,N.fire({title:"Success",text:"Assignment updated successfully",icon:"success",timer:2e3,showConfirmButton:!1})}else throw new Error(c.message||"Failed to update assignment")}else{const r={...h.value,assigner_data:n},c=await fetch("https://api.team695.com/assignments",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!c.ok)throw new Error(`Failed to create assignment: ${c.statusText}`);const y=await c.json();if(y.success)u.value.push(y.data),P.value=!1,N.fire({title:"Success",text:"Assignment created successfully",icon:"success",timer:2e3,showConfirmButton:!1});else throw new Error(y.message||"Failed to create assignment")}}catch(o){console.error("Error submitting form:",o),N.fire({title:"Error",text:o.message||"Failed to save assignment. Please try again.",icon:"error"})}};ie(s,()=>{Y(),H()}),Le(()=>{a.initializeStore(),Y(),H(),b.value&&ae(),document.addEventListener("click",o=>{if(K.value){const n=o.target,r=document.querySelector(".user-dropdown"),c=document.getElementById("assignee-search");!r?.contains(n)&&n!==c&&(K.value=!1)}if(Z.value){const n=o.target,r=document.querySelector(".team-dropdown"),c=document.getElementById("team_search");!r?.contains(n)&&n!==c&&(Z.value=!1)}}),setTimeout(()=>{ee.scanAndPreload()},1e3)});const Ce=o=>{if(!o)return"";if(o.firstName&&o.lastName)return`${o.firstName[0]}${o.lastName[0]}`.toUpperCase();if(o.displayName){const n=o.displayName.trim().split(/\s+/);return n.length>=2?`${n[0][0]}${n[n.length-1][0]}`.toUpperCase():o.displayName.substring(0,2).toUpperCase()}if(o.name){const n=o.name.trim().split(/\s+/);return n.length>=2?`${n[0][0]}${n[n.length-1][0]}`.toUpperCase():o.name.substring(0,2).toUpperCase()}return(o.id||"XX").substring(0,2).toUpperCase()},M=w([]),W=w(""),Z=w(!1),H=async()=>{try{const o=j.getToken();if(!o)throw new Error("Authentication token not found");const n=await fetch(`https://api.team695.com/team-matches/event/${s.value}`,{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`Failed to load event teams: ${n.statusText}`);const r=await n.json();if(r.success)M.value=r.data||[];else throw new Error(r.message||"Failed to load event teams")}catch(o){console.error("Error loading event teams:",o),N.fire({title:"Warning",text:"Failed to load event teams. Team selection may be unavailable.",icon:"warning"})}},$e=q(()=>{const o=new Set,n=F.value?.id;return u.value.forEach(r=>{n&&r.id===n||r.assigned_team_numbers&&Array.isArray(r.assigned_team_numbers)&&r.assigned_team_numbers.forEach(c=>{o.add(c)})}),o}),Ue=q(()=>{const o=$e.value;let n=M.value.filter(r=>!o.has(r.team_number)&&!h.value.assigned_team_numbers.includes(r.team_number));if(W.value){const r=W.value.toLowerCase();n=n.filter(c=>c.team_number.toString().includes(r)||c.nickname&&c.nickname.toLowerCase().includes(r))}return n}),ne=o=>{const n=M.value.find(r=>r.team_number===o);return n?n.is_pit:!1},Se=o=>{h.value.assigned_team_numbers.includes(o.team_number)||h.value.assigned_team_numbers.push(o.team_number),W.value=""},De=o=>{h.value.assigned_team_numbers=h.value.assigned_team_numbers.filter(n=>n!==o)},Ee=o=>{const n=M.value.find(r=>r.team_number===o);return n?n.nickname:""};return ie(()=>h.value.task_type,o=>{o==="scouting"?h.value.assigned_team_numbers=[]:o==="pit-scouting"&&(h.value.assigned_alliance="red",h.value.assigned_matches="")}),{userData:i,isAdmin:b,loading:x,error:v,assignments:u,events:k,selectedEvent:s,activeTab:m,filterType:T,searchQuery:L,filteredAssignments:ce,showModal:P,showDeleteModal:R,editingAssignment:F,formData:h,teamMembers:J,teamNumbersInput:z,loadAssignments:Y,refreshData:fe,formatDate:he,formatStatus:oe,formatUsername:te,getUserGroups:ge,getAssigneesList:X,capitalizeFirstLetter:pe,isUserInAssignment:se,getNextStatusButtonText:ve,updateAssignmentStatus:ye,openCreateModal:ke,editAssignment:_e,confirmDeleteAssignment:Ae,deleteAssignment:Ne,submitForm:Te,userSearchQuery:Q,showUserDropdown:K,selectedAssignees:C,filteredUnselectedUsers:be,addSelectedAssignee:we,removeSelectedAssignee:xe,ensureSafeUserId:ue,getUserInitialsValue:Ce,eventTeams:M,teamSearchQuery:W,showTeamDropdown:Z,filteredAvailableTeams:Ue,addSelectedTeam:Se,removeSelectedTeam:De,getTeamNickname:Ee,loadEventTeams:H,isTeamPit:ne,toggleTeamPitStatus:async o=>{try{const n=j.getToken();if(!n)throw new Error("Authentication token not found");const c=!ne(o),y=await fetch(`https://api.team695.com/team-matches/pit-status/${s.value}/frc${o}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({is_pit:c})});if(!y.ok)throw new Error(`Failed to update pit status: ${y.statusText}`);const D=await y.json();if(D.success){const B=M.value.findIndex(Ie=>Ie.team_number===o);B!==-1&&(M.value[B].is_pit=c),N.fire({title:"Success",text:`Team ${o} pit status ${c?"confirmed":"removed"}`,icon:"success",timer:1500,showConfirmButton:!1})}else throw new Error(D.message||"Failed to update pit status")}catch(n){console.error("Error updating pit status:",n),N.fire({title:"Error",text:n.message||"Failed to update pit status. Please try again.",icon:"error"})}}}}}),Oe={class:"min-h-screen bg-gray-50"},Re={class:"px-4 py-6 sm:px-0 mb-6"},Ge={class:"bg-gradient-to-r from-teal-500 to-emerald-600 rounded-lg shadow-lg overflow-hidden"},Je={class:"px-6 py-8 md:p-10 md:flex md:items-center md:justify-between"},Xe={key:0,class:"mt-4 md:mt-0 md:ml-6"},Ye={class:"px-4 sm:px-0 mb-6"},We={class:"bg-white rounded-lg shadow p-4 sm:p-6"},He={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Ke={class:"flex flex-col sm:flex-row gap-3"},Ze={class:"relative"},et=["value"],tt={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},st={key:0,class:"px-4 sm:px-0 mb-6"},at={key:1,class:"px-4 sm:px-0 mb-6"},ot={class:"bg-red-50 rounded-lg shadow p-6"},nt={class:"flex"},rt={class:"flex-shrink-0"},it={class:"ml-3"},lt={class:"mt-2 text-red-700"},dt={class:"mt-4"},ut={key:2,class:"px-4 sm:px-0 mb-6"},mt={class:"bg-white rounded-lg shadow p-8 text-center"},ct={class:"mt-1 text-gray-500"},gt={key:0,class:"mt-6"},pt={key:3,class:"px-4 sm:px-0 mb-6"},ft={class:"bg-white rounded-lg shadow"},ht={class:"border-b border-gray-200"},vt={class:"flex -mb-px","aria-label":"Tabs"},yt={class:"overflow-hidden"},bt={class:"px-4 py-5 sm:p-6"},wt={class:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},xt={class:"flex items-center"},kt={class:"flex flex-wrap gap-2"},_t={class:"relative"},At={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Nt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},Tt={class:"px-4 py-5 sm:p-6"},Ct={class:"flex justify-between items-start"},$t={class:"flex items-center"},Ut={class:"ml-3"},St={class:"text-lg font-medium text-gray-900"},Dt={class:"text-sm text-gray-500"},Et={class:"mt-4 space-y-3"},It={key:0},Pt={class:"mt-1 flex flex-wrap gap-2"},Ft={key:0,class:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Mt=["onClick","title"],jt={key:1},Lt={class:"flex items-center justify-between"},Bt={class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800 mt-1"},qt={class:"mt-1 space-y-2"},zt={class:"flex-shrink-0"},Qt={class:"ml-3"},Vt={class:"flex items-center"},Ot={class:"text-sm font-medium text-gray-900 flex items-center flex-wrap"},Rt={key:0,class:"text-xs text-teal-600 ml-1"},Gt={key:1,class:"ml-1 flex gap-1 flex-wrap"},Jt={class:"text-xs text-gray-500"},Xt={key:0,class:"text-xs text-gray-500"},Yt={key:2},Wt={class:"mt-1 text-sm text-gray-700 line-clamp-2"},Ht={class:"flex justify-between text-xs text-gray-500"},Kt={class:"mt-5 flex justify-between"},Zt=["onClick","disabled"],es={key:1,class:"flex space-x-2"},ts=["onClick"],ss=["onClick"],as={key:0,class:"modal-container"},os={class:"fixed inset-0 z-50 overflow-y-auto"},ns={class:"flex min-h-full items-center justify-center p-4"},rs={class:"relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl overflow-visible"},is={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ls={class:"sm:flex sm:items-start"},ds={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-teal-100 sm:mx-0 sm:h-10 sm:w-10"},us={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ms={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},cs={class:"mt-4 space-y-4"},gs=["disabled"],ps=["value"],fs={key:0},hs={class:"mt-1 relative"},vs={class:"relative"},ys={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},bs=["onMousedown"],ws={class:"flex items-center justify-between"},xs={class:"text-sm font-medium text-gray-900"},ks={class:"text-xs text-gray-500"},_s={class:"flex items-center"},As={key:0,class:"px-2 py-0.5 mr-2 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Ns={key:1,class:"absolute z-50 mt-1 w-full bg-white shadow-lg rounded-md py-4 px-4 text-center text-base ring-1 ring-black ring-opacity-5 sm:text-sm"},Ts={class:"text-gray-500"},Cs={key:0,class:"mt-2 flex items-center flex-wrap gap-2"},$s={class:"text-xs font-medium text-gray-800 flex items-center"},Us={key:0,class:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-purple-100 text-purple-700 flex items-center"},Ss=["onClick","title"],Ds={class:"text-xs text-gray-500 ml-1 truncate max-w-[100px]"},Es=["onClick"],Is={key:1,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ps={class:"relative"},Fs={key:0,class:"mt-2 flex items-center flex-wrap gap-2"},Ms={class:"flex-shrink-0 mr-1 flex items-center"},js={class:"text-xs font-medium text-gray-800 flex items-center"},Ls=["onClick"],Bs={class:"relative mt-2"},qs={class:"relative"},zs={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Qs=["onMousedown"],Vs={class:"flex items-center"},Os={class:"flex-shrink-0"},Rs={class:"ml-3"},Gs={class:"flex items-center"},Js={class:"text-sm font-medium text-gray-900"},Xs={key:0,class:"flex gap-1 flex-wrap"},Ys={key:0,class:"text-xs text-teal-600"},Ws={key:1,class:"ml-1 flex gap-1 flex-wrap"},Hs={class:"text-xs text-gray-500"},Ks={key:2,class:"mt-1 w-full bg-white shadow-lg rounded-md py-4 px-4 text-center text-base ring-1 ring-black ring-opacity-5 sm:text-sm"},Zs={class:"text-gray-500"},ea={key:3},ta={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},sa=["disabled"],aa={key:0,class:"modal-container"},oa={class:"fixed inset-0 z-50 overflow-y-auto"},na={class:"flex min-h-full items-center justify-center p-4"},ra={class:"relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl overflow-hidden"},ia={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},la={class:"sm:flex sm:items-start"},da={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},ua={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"};function ma(a,e,i,b,x,v){const u=qe("Icon"),k=me;return d(),l(_,null,[t("div",Oe,[t("div",Re,[t("div",Ge,[t("div",Je,[e[36]||(e[36]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"}," Scouting Assignments "),t("p",{class:"mt-2 text-teal-100"}," Manage and track team scouting tasks for FRC competitions ")],-1)),a.isAdmin?(d(),l("div",Xe,[t("button",{onClick:e[0]||(e[0]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-teal-600 bg-white hover:bg-teal-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},[p(u,{icon:"mdi:plus",class:"mr-2 h-5 w-5"}),e[35]||(e[35]=E(" Create Assignment ",-1))])])):f("",!0)])])]),t("div",Ye,[t("div",We,[t("div",He,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900 mb-3 sm:mb-0"},"Select Event",-1)),t("div",Ke,[t("div",Ze,[S(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.selectedEvent=s),onChange:e[2]||(e[2]=(...s)=>a.loadAssignments&&a.loadAssignments(...s)),class:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[(d(!0),l(_,null,U(a.events,s=>(d(),l("option",{key:s.key,value:s.key},g(s.name)+" ("+g(s.key)+") ",9,et))),128))],544),[[V,a.selectedEvent]]),t("div",tt,[p(u,{icon:"mdi:chevron-down",class:"h-5 w-5"})])]),t("button",{onClick:e[3]||(e[3]=(...s)=>a.refreshData&&a.refreshData(...s)),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200"},[p(u,{icon:"mdi:refresh",class:"mr-2 h-5 w-5"}),e[37]||(e[37]=E(" Refresh ",-1))])])])])]),a.loading?(d(),l("div",st,e[39]||(e[39]=[t("div",{class:"bg-white rounded-lg shadow p-8 flex justify-center"},[t("div",{class:"flex flex-col items-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-500"}),t("p",{class:"mt-4 text-gray-600"},"Loading assignments...")])],-1)]))):a.error?(d(),l("div",at,[t("div",ot,[t("div",nt,[t("div",rt,[p(u,{icon:"mdi:alert-circle",class:"h-6 w-6 text-red-500"})]),t("div",it,[e[40]||(e[40]=t("h3",{class:"text-lg font-medium text-red-800"},"Error loading assignments",-1)),t("div",lt,[t("p",null,g(a.error),1)]),t("div",dt,[t("button",{onClick:e[4]||(e[4]=(...s)=>a.refreshData&&a.refreshData(...s)),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Try Again ")])])])])])):a.assignments.length?(d(),l("div",pt,[t("div",ft,[t("div",ht,[t("nav",vt,[t("button",{onClick:e[6]||(e[6]=s=>a.activeTab="all"),class:A(["w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm",a.activeTab==="all"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(u,{icon:a.activeTab==="all"?"mdi:view-dashboard":"mdi:view-dashboard-outline",class:"h-5 w-5 inline-block mr-2"},null,8,["icon"]),e[43]||(e[43]=E(" All Assignments ",-1))],2),t("button",{onClick:e[7]||(e[7]=s=>a.activeTab="my"),class:A(["w-1/2 py-4 px-1 text-center border-b-2 font-medium text-sm",a.activeTab==="my"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(u,{icon:a.activeTab==="my"?"mdi:account-check":"mdi:account-check-outline",class:"h-5 w-5 inline-block mr-2"},null,8,["icon"]),e[44]||(e[44]=E(" My Assignments ",-1))],2)])]),t("div",yt,[t("div",bt,[t("div",wt,[t("div",xt,[e[45]||(e[45]=t("span",{class:"mr-3 text-sm font-medium text-gray-700"},"Filter by:",-1)),t("div",kt,[t("button",{onClick:e[8]||(e[8]=s=>a.filterType="all"),class:A(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="all"?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," All Types ",2),t("button",{onClick:e[9]||(e[9]=s=>a.filterType="scouting"),class:A(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="scouting"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," Match Scouting ",2),t("button",{onClick:e[10]||(e[10]=s=>a.filterType="pit-scouting"),class:A(["px-3 py-1 rounded-full text-xs font-medium",a.filterType==="pit-scouting"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"])}," Pit Scouting ",2)])]),t("div",_t,[t("div",At,[p(u,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),S(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>a.searchQuery=s),type:"text",placeholder:"Search assignments...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[O,a.searchQuery]])])]),t("div",Nt,[(d(!0),l(_,null,U(a.filteredAssignments,s=>(d(),l("div",{key:s.id,class:A(["bg-white overflow-hidden shadow rounded-lg border hover:shadow-md transition-shadow duration-300",{"border-blue-200":s.task_type==="scouting","border-purple-200":s.task_type==="pit-scouting"}])},[t("div",Tt,[t("div",Ct,[t("div",$t,[t("div",{class:A(["flex-shrink-0 rounded-md p-2",{"bg-blue-100":s.task_type==="scouting","bg-purple-100":s.task_type==="pit-scouting"}])},[p(u,{icon:s.task_type==="scouting"?"mdi:clipboard-text":"mdi:robot",class:A(["h-6 w-6",{"text-blue-600":s.task_type==="scouting","text-purple-600":s.task_type==="pit-scouting"}])},null,8,["icon","class"])],2),t("div",Ut,[t("h3",St,g(s.task_type==="scouting"?"Match Scouting":"Pit Scouting"),1),t("p",Dt,"ID: "+g(s.id),1)])]),t("div",null,[t("span",{class:A(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-blue-100 text-blue-800":s.status==="in_progress","bg-green-100 text-green-800":s.status==="completed","bg-gray-100 text-gray-800":s.status==="canceled"}])},g(a.formatStatus(s.status)),3)])]),t("div",Et,[s.task_type==="pit-scouting"&&s.assigned_team_numbers?.length?(d(),l("div",It,[e[47]||(e[47]=t("h4",{class:"text-sm font-medium text-gray-500"},"Assigned Teams:",-1)),t("div",Pt,[(d(!0),l(_,null,U(s.assigned_team_numbers,m=>(d(),l("span",{key:m,class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800"},[E(" Team "+g(m)+" ",1),a.isTeamPit(m)?(d(),l("span",Ft,[p(u,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"}),e[46]||(e[46]=E("Pit ",-1))])):f("",!0),a.isAdmin?(d(),l("button",{key:1,onClick:I(T=>a.toggleTeamPitStatus(m),["stop"]),class:"ml-1 p-0.5 text-gray-500 hover:text-purple-600",title:a.isTeamPit(m)?"Remove pit status":"Mark as pit team"},[p(u,{icon:a.isTeamPit(m)?"mdi:close-circle":"mdi:check-circle",class:"h-4 w-4"},null,8,["icon"])],8,Mt)):f("",!0)]))),128))])])):f("",!0),s.task_type==="scouting"?(d(),l("div",jt,[t("div",Lt,[t("div",null,[e[48]||(e[48]=t("h4",{class:"text-sm font-medium text-gray-500"},"Alliance:",-1)),t("span",{class:A(["inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium mt-1",s.assigned_alliance==="red"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"])},g(s.assigned_alliance==="red"?"Red Alliance":"Blue Alliance"),3)]),t("div",null,[e[49]||(e[49]=t("h4",{class:"text-sm font-medium text-gray-500"},"Matches:",-1)),t("span",Bt,g(s.assigned_matches||"Not specified"),1)])])])):f("",!0),t("div",null,[e[50]||(e[50]=t("h4",{class:"text-sm font-medium text-gray-500"},"Assigned To:",-1)),t("div",qt,[(d(!0),l(_,null,U(a.getAssigneesList(s),(m,T)=>(d(),l("div",{key:T,class:"flex items-center"},[t("div",zt,[p(k,{userId:m.id,initial:a.getUserInitialsValue(m),src:m.avatar,size:32,firstName:m.firstName,lastName:m.lastName,displayName:m.displayName||a.formatUsername(m.name),alt:"Assignee Avatar",class:"h-8 w-8 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("div",Qt,[t("div",Vt,[t("p",Ot,[t("span",null,g(m.displayName||a.formatUsername(m.name)||"Unknown"),1),m.id===a.userData.id?(d(),l("span",Rt,"(You)")):f("",!0),a.getUserGroups(m).length>0?(d(),l("span",Gt,[(d(!0),l(_,null,U(a.getUserGroups(m),(L,P)=>(d(),l("span",{key:P,class:"px-2 py-0.5 text-xs font-medium rounded-md bg-amber-100 text-amber-700"},g(a.capitalizeFirstLetter(L)),1))),128))])):f("",!0)])]),t("div",Jt,g(a.formatUsername(m.name))+" · "+g(m.email||"No email"),1)])]))),128)),a.getAssigneesList(s).length>2?(d(),l("div",Xt," + "+g(a.getAssigneesList(s).length-2)+" more users ",1)):f("",!0)])]),s.notes?(d(),l("div",Yt,[e[51]||(e[51]=t("h4",{class:"text-sm font-medium text-gray-500"},"Notes:",-1)),t("p",Wt,g(s.notes),1)])):f("",!0),t("div",Ht,[t("span",null,"Created: "+g(a.formatDate(s.created_at)),1),t("span",null,"Updated: "+g(a.formatDate(s.updated_at)),1)])]),t("div",Kt,[a.isUserInAssignment(s,a.userData.id)||a.isAdmin?(d(),l("button",{key:0,onClick:m=>a.updateAssignmentStatus(s),class:A(["inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",{"bg-yellow-600 hover:bg-yellow-700":s.status==="pending","bg-blue-600 hover:bg-blue-700":s.status==="in_progress","bg-green-600 hover:bg-green-700":s.status==="completed","bg-gray-400 cursor-not-allowed":s.status==="canceled"}]),disabled:s.status==="canceled"},g(a.getNextStatusButtonText(s.status)),11,Zt)):f("",!0),a.isAdmin?(d(),l("div",es,[t("button",{onClick:m=>a.editAssignment(s),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[p(u,{icon:"mdi:pencil",class:"h-4 w-4"})],8,ts),t("button",{onClick:m=>a.confirmDeleteAssignment(s),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[p(u,{icon:"mdi:delete",class:"h-4 w-4"})],8,ss)])):f("",!0)])])],2))),128))])])])])])):(d(),l("div",ut,[t("div",mt,[p(u,{icon:"mdi:clipboard-text-outline",class:"mx-auto h-12 w-12 text-gray-400"}),e[42]||(e[42]=t("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No assignments found",-1)),t("p",ct,g(a.isAdmin?"Create a new assignment to get started.":"You have no assignments for this event."),1),a.isAdmin?(d(),l("div",gt,[t("button",{onClick:e[5]||(e[5]=(...s)=>a.openCreateModal&&a.openCreateModal(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[p(u,{icon:"mdi:plus",class:"mr-2 h-5 w-5"}),e[41]||(e[41]=E(" Create Assignment ",-1))])])):f("",!0)])])),p(de,{name:"fade"},{default:le(()=>[a.showModal?(d(),l("div",as,[e[64]||(e[64]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-40"},null,-1)),t("div",os,[t("div",ns,[t("div",rs,[t("button",{onClick:e[12]||(e[12]=s=>a.showModal=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 z-10"},[p(u,{icon:"mdi:close",class:"h-6 w-6"})]),t("div",is,[t("div",ls,[t("div",ds,[p(u,{icon:a.editingAssignment?"mdi:pencil":"mdi:plus",class:"h-6 w-6 text-teal-600"},null,8,["icon"])]),t("div",us,[t("h3",ms,g(a.editingAssignment?"Edit Assignment":"Create New Assignment"),1),t("div",cs,[t("div",null,[e[52]||(e[52]=t("label",{for:"event_key",class:"block text-sm font-medium text-gray-700"},"Event",-1)),S(t("select",{id:"event_key","onUpdate:modelValue":e[13]||(e[13]=s=>a.formData.event_key=s),disabled:!!a.editingAssignment,class:A(["mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",{"bg-gray-100":!!a.editingAssignment}])},[(d(!0),l(_,null,U(a.events,s=>(d(),l("option",{key:s.key,value:s.key},g(s.name)+" ("+g(s.key)+") ",9,ps))),128))],10,gs),[[V,a.formData.event_key]])]),t("div",null,[e[54]||(e[54]=t("label",{for:"task_type",class:"block text-sm font-medium text-gray-700"},"Task Type",-1)),S(t("select",{id:"task_type","onUpdate:modelValue":e[14]||(e[14]=s=>a.formData.task_type=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},e[53]||(e[53]=[t("option",{value:"scouting"},"Match Scouting",-1),t("option",{value:"pit-scouting"},"Pit Scouting",-1)]),512),[[V,a.formData.task_type]])]),a.formData.task_type==="pit-scouting"?(d(),l("div",fs,[e[56]||(e[56]=t("label",{for:"assigned_team_numbers",class:"block text-sm font-medium text-gray-700"},"Assigned Teams",-1)),t("div",hs,[t("div",vs,[S(t("input",{id:"team_search","onUpdate:modelValue":e[15]||(e[15]=s=>a.teamSearchQuery=s),onFocus:e[16]||(e[16]=s=>a.showTeamDropdown=!0),onInput:e[17]||(e[17]=s=>a.showTeamDropdown=!0),placeholder:"Search teams...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,544),[[O,a.teamSearchQuery]]),t("div",ys,[p(u,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),a.teamSearchQuery?(d(),l("button",{key:0,onClick:e[18]||(e[18]=I(s=>{a.teamSearchQuery="",a.showTeamDropdown=!0},["stop"])),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p(u,{icon:"mdi:close",class:"h-5 w-5 text-gray-400 hover:text-gray-600"})])):f("",!0)]),a.showTeamDropdown&&a.filteredAvailableTeams.length>0?(d(),l("div",{key:0,class:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm team-dropdown",style:{"max-height":"300px"},onClick:e[19]||(e[19]=I(()=>{},["stop"]))},[(d(!0),l(_,null,U(a.filteredAvailableTeams,s=>(d(),l("div",{key:s.team_number,onMousedown:I(m=>a.addSelectedTeam(s),["prevent"]),class:"cursor-pointer hover:bg-gray-100 px-4 py-2"},[t("div",ws,[t("div",null,[t("span",xs," Team "+g(s.team_number),1),t("p",ks,g(s.nickname),1)]),t("div",_s,[s.is_pit?(d(),l("span",As,[p(u,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"})])):f("",!0),e[55]||(e[55]=t("span",{class:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800"}," Add ",-1))])])],40,bs))),128))])):f("",!0),a.showTeamDropdown&&a.teamSearchQuery&&a.filteredAvailableTeams.length===0?(d(),l("div",Ns,[t("p",Ts,'No available teams found matching "'+g(a.teamSearchQuery)+'"',1)])):f("",!0)]),a.formData.assigned_team_numbers.length>0?(d(),l("div",Cs,[(d(!0),l(_,null,U(a.formData.assigned_team_numbers,s=>(d(),l("div",{key:s,class:"inline-flex items-center bg-gray-100 rounded-full pl-2 pr-1 py-1"},[t("span",$s,[E(" Team "+g(s)+" ",1),a.isTeamPit(s)?(d(),l("span",Us,[p(u,{icon:"mdi:check-circle",class:"h-3 w-3 mr-0.5"})])):f("",!0),a.isAdmin?(d(),l("button",{key:1,onClick:I(m=>a.toggleTeamPitStatus(s),["stop"]),class:"ml-1 p-0.5 text-gray-500 hover:text-purple-600",title:a.isTeamPit(s)?"Remove pit status":"Mark as pit team"},[p(u,{icon:a.isTeamPit(s)?"mdi:close-circle":"mdi:check-circle",class:"h-4 w-4"},null,8,["icon"])],8,Ss)):f("",!0),t("span",Ds,g(a.getTeamNickname(s)),1)]),t("button",{onClick:m=>a.removeSelectedTeam(s),class:"ml-1 rounded-full p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center"},[p(u,{icon:"mdi:close",class:"h-3 w-3"})],8,Es)]))),128))])):f("",!0)])):f("",!0),a.formData.task_type==="scouting"?(d(),l("div",Is,[t("div",null,[e[58]||(e[58]=t("label",{for:"assigned_alliance",class:"block text-sm font-medium text-gray-700"},"Alliance",-1)),S(t("select",{id:"assigned_alliance","onUpdate:modelValue":e[20]||(e[20]=s=>a.formData.assigned_alliance=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},e[57]||(e[57]=[t("option",{value:"red"},"Red Alliance",-1),t("option",{value:"blue"},"Blue Alliance",-1)]),512),[[V,a.formData.assigned_alliance]])]),t("div",null,[e[59]||(e[59]=t("label",{for:"assigned_matches",class:"block text-sm font-medium text-gray-700"},"Match Range",-1)),S(t("input",{id:"assigned_matches","onUpdate:modelValue":e[21]||(e[21]=s=>a.formData.assigned_matches=s),type:"text",placeholder:"e.g., Q3-Q12",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[O,a.formData.assigned_matches]])])])):f("",!0),t("div",Ps,[e[60]||(e[60]=t("label",{for:"assignee-search",class:"block text-sm font-medium text-gray-700"},"Assign To",-1)),a.selectedAssignees.length>0?(d(),l("div",Fs,[(d(!0),l(_,null,U(a.selectedAssignees,(s,m)=>(d(),l("div",{key:m,class:"inline-flex items-center bg-gray-100 rounded-full pl-2 pr-1 py-1"},[t("div",Ms,[p(k,{userId:s.id,initial:a.getUserInitialsValue(s),size:24,src:s.avatar,firstName:s.firstName,lastName:s.lastName,displayName:s.displayName||a.formatUsername(s.name),alt:"User Avatar",class:"h-6 w-6 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("span",js,g(s.displayName||a.formatUsername(s.name)),1),t("button",{onClick:T=>a.removeSelectedAssignee(s),class:"ml-1 rounded-full p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center"},[p(u,{icon:"mdi:close",class:"h-3 w-3"})],8,Ls)]))),128))])):f("",!0),t("div",Bs,[t("div",qs,[S(t("input",{id:"assignee-search",type:"text","onUpdate:modelValue":e[22]||(e[22]=s=>a.userSearchQuery=s),onFocus:e[23]||(e[23]=s=>a.showUserDropdown=!0),onInput:e[24]||(e[24]=s=>a.showUserDropdown=!0),onClick:e[25]||(e[25]=I(()=>{},["stop"])),placeholder:"Search to add more users...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,544),[[O,a.userSearchQuery]]),t("div",zs,[p(u,{icon:"mdi:magnify",class:"h-5 w-5 text-gray-400"})]),a.userSearchQuery?(d(),l("button",{key:0,onClick:e[26]||(e[26]=I(s=>{a.userSearchQuery="",a.showUserDropdown=!0},["stop"])),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p(u,{icon:"mdi:close",class:"h-5 w-5 text-gray-400 hover:text-gray-600"})])):f("",!0)]),a.showUserDropdown&&a.filteredUnselectedUsers.length>0?(d(),l("div",{key:0,class:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",style:{"max-height":"300px"},onClick:e[27]||(e[27]=I(()=>{},["stop"]))},[(d(!0),l(_,null,U(a.filteredUnselectedUsers,s=>(d(),l("div",{key:s.id,onMousedown:I(m=>a.addSelectedAssignee(s),["prevent"]),class:"cursor-pointer hover:bg-gray-100 px-4 py-2"},[t("div",Vs,[t("div",Os,[p(k,{userId:s.id,initial:a.getUserInitialsValue(s),src:s.avatar,size:32,firstName:s.firstName,lastName:s.lastName,displayName:s.displayName||a.formatUsername(s.name),alt:"User Avatar",class:"h-8 w-8 rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"])]),t("div",Rs,[t("div",Gs,[t("p",Js,[a.getUserGroups(s).length>0?(d(),l("span",Xs,[E(g(s.displayName||a.formatUsername(s.name))+" ",1),s.id===a.userData.id?(d(),l("span",Ys,"(You)")):f("",!0),a.getUserGroups(s).length>0?(d(),l("span",Ws,[(d(!0),l(_,null,U(a.getUserGroups(s),(m,T)=>(d(),l("span",{key:T,class:"px-2 py-0.5 text-xs font-medium rounded-md bg-amber-100 text-amber-700"},g(a.capitalizeFirstLetter(m)),1))),128))])):f("",!0)])):f("",!0)])]),t("div",Hs,g(a.formatUsername(s.name||""))+" · "+g(s.email||"No email"),1)])])],40,Qs))),128))])):f("",!0)])]),a.showUserDropdown&&a.userSearchQuery&&a.filteredUnselectedUsers.length===0?(d(),l("div",Ks,[t("p",Zs,'No users found matching "'+g(a.userSearchQuery)+'" ',1)])):f("",!0),a.editingAssignment?(d(),l("div",ea,[e[62]||(e[62]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),S(t("select",{id:"status","onUpdate:modelValue":e[28]||(e[28]=s=>a.formData.status=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},e[61]||(e[61]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"canceled"},"Canceled",-1)]),512),[[V,a.formData.status]])])):f("",!0),t("div",null,[e[63]||(e[63]=t("label",{for:"notes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),S(t("textarea",{id:"notes","onUpdate:modelValue":e[29]||(e[29]=s=>a.formData.notes=s),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Add any additional instructions or notes"},null,512),[[O,a.formData.notes]])])])])])]),t("div",ta,[t("button",{onClick:e[30]||(e[30]=(...s)=>a.submitForm&&a.submitForm(...s)),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-teal-600 text-base font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:!a.selectedAssignees.length},g(a.editingAssignment?"Update":"Create"),9,sa),t("button",{onClick:e[31]||(e[31]=s=>a.showModal=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0)]),_:1})]),p(de,{name:"fade"},{default:le(()=>[a.showDeleteModal?(d(),l("div",aa,[e[66]||(e[66]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-40"},null,-1)),t("div",oa,[t("div",na,[t("div",ra,[t("button",{onClick:e[32]||(e[32]=s=>a.showDeleteModal=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},[p(u,{icon:"mdi:close",class:"h-6 w-6"})]),t("div",ia,[t("div",la,[t("div",da,[p(u,{icon:"mdi:alert",class:"h-6 w-6 text-red-600"})]),e[65]||(e[65]=t("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Assignment "),t("div",{class:"mt-2"},[t("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this assignment? This action cannot be undone. ")])],-1))])]),t("div",ua,[t("button",{onClick:e[33]||(e[33]=(...s)=>a.deleteAssignment&&a.deleteAssignment(...s)),type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),t("button",{onClick:e[34]||(e[34]=s=>a.showDeleteModal=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0)]),_:1})],64)}const ha=Be(Ve,[["render",ma],["__scopeId","data-v-dc4ca779"]]);export{ha as default};
