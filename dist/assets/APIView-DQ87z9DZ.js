import{f as D,I as $,r as p,E as F,J as G,y as v,o as V,D as k,u as M,_ as N,c,a as e,j as A,h as i,i as z,t as b,b as d,n as I,d as u}from"./index-ChunK-zk.js";const _=D({name:"APIView",components:{Icon:$},setup(){const t=M(),s=p(!1),f=p(!1),g=p(!1),w=p(!1),h=p(""),r=p("success"),o=F(),{userInfo:x}=G(o),P=v(()=>o.isLoading),S=v(()=>o.error),C=v(()=>x.value||{}),m=(n,a="success")=>{h.value=n,r.value=a,w.value=!0,setTimeout(()=>{w.value=!1},3e3)},K=async()=>{try{f.value=!0;const n=k.getToken();if(!n)throw new Error("Unauthorized: Please log in first");const a=await fetch("https://api.team695.com/auth/api-keys",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!a.ok)throw new Error(`Failed to generate API keys: ${a.statusText}`);const l=await a.json();if(!l.success)throw new Error(l.error||"Failed to generate API keys");if(l.data){const y={...x.value};y.accessKey=l.data.accessKey,y.accessSecret=l.data.accessSecret,await o.updateUserInfo(y)}m("Successfully generated new API keys!")}catch(n){console.error("Failed to generate API keys:",n),m(`Failed to generate API keys: ${n instanceof Error?n.message:"Unknown error"}`,"error")}finally{f.value=!1}},T=()=>{g.value=!0},E=async()=>{try{f.value=!0,g.value=!1;const n=k.getToken();if(!n)throw new Error("Unauthorized: Please log in first");const a=await fetch("https://api.team695.com/auth/api-keys",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!a.ok)throw new Error(`Reset failed: ${a.statusText}`);const l=await a.json();if(!l.success)throw new Error(l.error||"Failed to reset API keys");if(l.data){const y={...x.value};y.accessKey=l.data.accessKey,y.accessSecret=l.data.accessSecret,await o.updateUserInfo(y),m("API keys have been successfully reset! New keys are now active.")}else m("API keys have been successfully reset!")}catch(n){console.error("Failed to reset API keys:",n),m(`Failed to reset API keys: ${n instanceof Error?n.message:"Unknown error"}`,"error")}finally{f.value=!1}},R=()=>{s.value=!s.value},U=async n=>{try{await navigator.clipboard.writeText(n),m("Copied to clipboard!")}catch(a){console.error("Failed to copy text: ",a),m("Failed to copy to clipboard","error")}},j=()=>{o.refreshUserInfo()};return V(()=>{if(!k.isLoggedIn()){t.push({name:"login"});return}o.initializeStore()}),{userData:C,isLoading:P,error:S,showSecret:s,isGeneratingKeys:f,showResetConfirmModal:g,showToast:w,toastMessage:h,toastType:r,toggleSecretVisibility:R,copyToClipboard:U,retryFetchUserInfo:j,generateApiKeys:K,confirmResetApiKeys:T,resetApiKeys:E}}}),L={class:"px-4 py-6 space-y-6"},B={class:"bg-white rounded-lg shadow overflow-hidden"},Y={class:"bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4"},O={class:"flex items-center"},H={class:"h-12 w-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center"},X={class:"p-6"},q={key:0,class:"flex justify-center py-8"},J={key:1,class:"text-center py-6"},W={class:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},Q={class:"text-gray-600 mb-6"},Z={class:"flex justify-center space-x-4"},ee={key:2},se={class:"flex items-center justify-between mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},te={class:"flex items-center"},oe={href:"https://api.team695.com/api-docs/",target:"_blank",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},re={key:0},ne={class:"text-center py-8 px-4 border-2 border-dashed border-gray-300 rounded-lg"},ie=["disabled"],ae={key:1,class:"space-y-6"},le={class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},de={class:"flex justify-between items-center mb-2"},ce={class:"bg-gray-50 rounded-lg p-4 border border-gray-200 mb-4"},ue={class:"flex justify-between items-center mb-2"},me={class:"relative"},ye=["value"],fe={class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},pe={class:"flex justify-between items-center mb-2"},be={class:"flex items-center space-x-2"},ge={class:"relative"},we=["type","value"],he={class:"bg-gray-800 text-gray-200 p-4 rounded-lg overflow-x-auto"},xe={class:"text-xs"},ve={class:"flex flex-wrap gap-4"},ke=["disabled"],Ae={class:"mt-4 bg-red-50 border-l-4 border-red-400 p-4"},Ie={class:"flex"},Pe={class:"flex-shrink-0"},Se={class:"bg-yellow-50 border-l-4 border-yellow-400 p-4"},Ce={class:"flex"},Ke={class:"flex-shrink-0"},Te={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ee={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},Re={class:"flex items-start"},Ue={class:"flex-shrink-0 bg-red-100 rounded-full p-2"},je={class:"ml-4"},De={class:"mt-4 flex justify-end space-x-3"};function $e(t,s,f,g,w,h){const r=z("Icon");return u(),c("div",L,[e("div",B,[e("div",Y,[e("div",O,[e("div",H,[i(r,{icon:"mdi:api",class:"h-6 w-6 text-white"})]),s[9]||(s[9]=e("div",{class:"ml-4"},[e("h2",{class:"text-xl font-bold text-white"},"API Management"),e("p",{class:"text-blue-100"},"Manage your API credentials for Team 695 services")],-1))])]),e("div",X,[t.isLoading?(u(),c("div",q,[i(r,{icon:"mdi:loading",class:"h-10 w-10 animate-spin text-blue-600"})])):t.error?(u(),c("div",J,[e("div",W,[i(r,{icon:"mdi:alert-circle",class:"h-10 w-10 text-red-500"})]),s[11]||(s[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading API Information",-1)),e("p",Q,b(t.error),1),e("div",Z,[e("button",{onClick:s[0]||(s[0]=(...o)=>t.retryFetchUserInfo&&t.retryFetchUserInfo(...o)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[i(r,{icon:"mdi:refresh",class:"h-4 w-4 mr-1"}),s[10]||(s[10]=d(" Retry ",-1))])])])):(u(),c("div",ee,[e("div",se,[e("div",te,[i(r,{icon:"mdi:book-open-variant",class:"h-6 w-6 text-blue-600 mr-3"}),s[12]||(s[12]=e("div",null,[e("h3",{class:"font-medium text-gray-900"},"API Documentation"),e("p",{class:"text-sm text-gray-600"},"Learn how to use Team 695's API services")],-1))]),e("a",oe,[i(r,{icon:"mdi:open-in-new",class:"h-4 w-4 mr-1"}),s[13]||(s[13]=d(" View Docs ",-1))])]),!t.userData.accessKey||!t.userData.accessSecret?(u(),c("div",re,[e("div",ne,[i(r,{icon:"mdi:key-plus",class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s[14]||(s[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No API Keys Found",-1)),s[15]||(s[15]=e("p",{class:"text-gray-600 mb-6 max-w-md mx-auto"}," You don't have any API keys yet. Generate API keys to access Team 695's API services. Your API secret will only be shown once after creation. ",-1)),e("button",{onClick:s[1]||(s[1]=(...o)=>t.generateApiKeys&&t.generateApiKeys(...o)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-md",disabled:t.isGeneratingKeys},[i(r,{icon:t.isGeneratingKeys?"mdi:loading":"mdi:key-plus",class:I([{"animate-spin":t.isGeneratingKeys},"h-5 w-5 mr-2"])},null,8,["icon","class"]),d(" "+b(t.isGeneratingKeys?"Generating...":"Generate New API Keys"),1)],8,ie)])])):(u(),c("div",ae,[e("div",null,[s[19]||(s[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"API Endpoint",-1)),e("div",le,[e("div",de,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Base URL",-1)),e("button",{onClick:s[2]||(s[2]=o=>t.copyToClipboard("https://api.team695.com")),class:"text-blue-600 hover:text-blue-500 text-sm flex items-center"},[i(r,{icon:"mdi:content-copy",class:"h-4 w-4 mr-1"}),s[16]||(s[16]=d(" Copy ",-1))])]),s[18]||(s[18]=e("div",{class:"relative"},[e("input",{type:"text",readonly:"",value:"https://api.team695.com",class:"block w-full pr-10 py-2 px-3 border border-gray-300 rounded-md shadow-sm bg-white text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})],-1))])]),e("div",null,[s[24]||(s[24]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"API Credentials",-1)),e("div",ce,[e("div",ue,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Access Key",-1)),e("button",{onClick:s[3]||(s[3]=o=>t.copyToClipboard(t.userData.accessKey)),class:"text-blue-600 hover:text-blue-500 text-sm flex items-center"},[i(r,{icon:"mdi:content-copy",class:"h-4 w-4 mr-1"}),s[20]||(s[20]=d(" Copy ",-1))])]),e("div",me,[e("input",{type:"text",readonly:"",value:t.userData.accessKey,class:"block w-full pr-10 py-2 px-3 border border-gray-300 rounded-md shadow-sm bg-white text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,8,ye)])]),e("div",fe,[e("div",pe,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Access Secret",-1)),e("div",be,[e("button",{onClick:s[4]||(s[4]=(...o)=>t.toggleSecretVisibility&&t.toggleSecretVisibility(...o)),class:"text-blue-600 hover:text-blue-500 text-sm flex items-center"},[i(r,{icon:t.showSecret?"mdi:eye-off":"mdi:eye",class:"h-4 w-4 mr-1"},null,8,["icon"]),d(" "+b(t.showSecret?"Hide":"Show"),1)]),e("button",{onClick:s[5]||(s[5]=o=>t.copyToClipboard(t.userData.accessSecret)),class:"text-blue-600 hover:text-blue-500 text-sm flex items-center"},[i(r,{icon:"mdi:content-copy",class:"h-4 w-4 mr-1"}),s[22]||(s[22]=d(" Copy ",-1))])])]),e("div",ge,[e("input",{type:t.showSecret?"text":"password",readonly:"",value:t.userData.accessSecret,class:"block w-full pr-10 py-2 px-3 border border-gray-300 rounded-md shadow-sm bg-white text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,8,we)])])]),e("div",null,[s[25]||(s[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Example API Request",-1)),e("div",he,[e("pre",xe,[e("code",null,`curl -X GET "https://api.team695.com/auth/me" \\
    -H "X-API-Key: `+b(t.userData.accessKey||"YOUR_ACCESS_KEY")+`" \\
    -H "X-API-Secret: `+b(t.showSecret?t.userData.accessSecret||"YOUR_ACCESS_SECRET":"************************")+'"',1)])])]),e("div",null,[s[28]||(s[28]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"API Key Management",-1)),e("div",ve,[e("button",{onClick:s[6]||(s[6]=(...o)=>t.confirmResetApiKeys&&t.confirmResetApiKeys(...o)),class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-red-600 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 shadow-sm",disabled:t.isGeneratingKeys},[i(r,{icon:"mdi:key-remove",class:"h-4 w-4 mr-2"}),s[26]||(s[26]=d(" Reset API Keys ",-1))],8,ke)]),e("div",Ae,[e("div",Ie,[e("div",Pe,[i(r,{icon:"mdi:alert",class:"h-5 w-5 text-red-400"})]),s[27]||(s[27]=e("div",{class:"ml-3"},[e("p",{class:"text-sm text-red-700"},[e("strong",null,"Warning:"),d(" Resetting your API keys will invalidate any existing keys. All applications using these credentials will need to be updated. ")])],-1))])])]),e("div",Se,[e("div",Ce,[e("div",Ke,[i(r,{icon:"mdi:shield-alert",class:"h-5 w-5 text-yellow-400"})]),s[29]||(s[29]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-yellow-800"},"Security Notice"),e("p",{class:"text-sm text-yellow-700 mt-1"}," Keep your API credentials secure. Never share your Access Secret or include it in client-side code. If you suspect your credentials have been compromised, reset them immediately. ")],-1))])])]))]))])]),t.showResetConfirmModal?(u(),c("div",Te,[e("div",Ee,[e("div",Re,[e("div",Ue,[i(r,{icon:"mdi:alert",class:"h-6 w-6 text-red-600"})]),e("div",je,[s[30]||(s[30]=e("h3",{class:"text-lg font-medium text-gray-900"},"Reset API Keys?",-1)),s[31]||(s[31]=e("p",{class:"mt-2 text-sm text-gray-500"}," This action will permanently delete your current API keys. All applications using these credentials will stop working. Are you sure you want to continue? ",-1)),e("div",De,[e("button",{onClick:s[7]||(s[7]=o=>t.showResetConfirmModal=!1),class:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),e("button",{onClick:s[8]||(s[8]=(...o)=>t.resetApiKeys&&t.resetApiKeys(...o)),class:"bg-red-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Reset Keys ")])])])])])):A("",!0),t.showToast?(u(),c("div",{key:1,class:I(["fixed top-4 right-4 px-4 py-2 rounded shadow-lg z-50 transition-opacity duration-300",t.toastType==="success"?"bg-green-600 text-white":"bg-red-600 text-white"])},b(t.toastMessage),3)):A("",!0)])}const Ge=N(_,[["render",$e],["__scopeId","data-v-3fcd332a"]]);export{Ge as default};
