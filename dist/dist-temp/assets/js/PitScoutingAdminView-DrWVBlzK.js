import{d as Ut,r as g,o as Ft,b as Mt,c as C,e as Be,k as l,l as t,q as u,C as p,U as c,V as F,N as K,H as S,a0 as Oe,G as Z,F as h,z as _,O as ce,D as d,a4 as jt,B as me,T as ge,y as r}from"./vue-vendor-CkXje6si.js";import{r as zt,d as Bt}from"./utils-CmrmFbYM.js";import{I as m}from"./ui-vendor-DTszv4DV.js";import{C as Ot,p as Rt,a as Pt,b as Vt,B as qt,c as Qt,L as Yt,d as Xt}from"./chart-vendor-CMrBg0M1.js";import{c as Jt,_ as Wt}from"./index-BkSPo1KE.js";import{_ as Re}from"./CachedAvatar-DQYLwNvR.js";var Ht=zt();const Gt={class:"min-h-screen bg-gray-50 mt-4"},Kt={class:"-mt-32 container mx-auto p-4"},Zt={class:"mb-8 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg"},es={class:"p-6"},ts={class:"text-2xl font-semibold mb-6 text-gray-800 flex items-center"},ss={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},os={class:"relative"},as=["value"],ns={key:0,class:"mt-1 text-xs text-red-600"},ls={class:"relative"},rs=["disabled"],is={class:"relative"},ds=["disabled"],us={class:"flex justify-end"},cs=["disabled"],ms={key:0,class:"flex flex-col items-center text-center py-12 bg-white rounded-lg shadow-md"},gs={key:1,class:"text-center py-12"},ps={key:2,class:"bg-red-50 border-l-4 border-red-500 text-red-700 p-6 rounded-lg shadow-md mb-8",role:"alert"},vs={class:"flex items-center"},fs={class:"mt-2"},bs={key:3,class:"flex flex-col items-center text-center py-12 bg-white rounded-lg shadow-md"},xs={key:4},hs={class:"mb-8 bg-white rounded-lg shadow-md overflow-hidden"},ys={class:"p-6"},_s={class:"text-2xl font-semibold mb-6 text-gray-800 flex items-center"},ws={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},ks={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100 shadow-sm"},Cs={class:"flex items-center"},Ns={class:"p-3 rounded-full bg-blue-100 text-blue-600"},Ss={class:"ml-4"},Is={class:"text-2xl font-bold text-gray-800"},Ts={class:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100 shadow-sm"},Ds={class:"flex items-center"},Es={class:"p-3 rounded-full bg-purple-100 text-purple-600"},$s={class:"ml-4"},Ls={class:"text-2xl font-bold text-gray-800"},As={class:"bg-gradient-to-br from-green-50 to-teal-50 rounded-lg p-4 border border-green-100 shadow-sm"},Us={class:"flex items-center"},Fs={class:"p-3 rounded-full bg-green-100 text-green-600"},Ms={class:"ml-4"},js={class:"text-2xl font-bold text-gray-800"},zs={class:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-100 shadow-sm"},Bs={class:"flex items-center"},Os={class:"p-3 rounded-full bg-amber-100 text-amber-600"},Rs={class:"ml-4"},Ps={class:"text-lg font-bold text-gray-800"},Vs={key:0,class:"mb-8 bg-white rounded-lg shadow-md overflow-hidden"},qs={class:"p-6"},Qs={class:"text-2xl font-semibold mb-6 text-gray-800 flex items-center"},Ys={class:"mb-6 relative"},Xs={class:"truncate"},Js={key:0,class:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg border border-gray-200 max-h-60 overflow-y-auto"},Ws={class:"p-2"},Hs=["onClick"],Gs=["checked"],Ks=["title"],Zs={key:0,class:"space-y-6"},eo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},to={class:"text-lg font-semibold mb-4 text-gray-800 flex items-center"},so={class:"w-6 h-6 flex items-center justify-center bg-blue-500 text-white rounded-full text-xs mr-2"},oo={class:"h-64"},ao={key:1,class:"flex flex-col items-center text-center py-8 bg-gray-50 rounded-lg"},no={class:"mb-8 bg-white rounded-lg shadow-md overflow-hidden"},lo={class:"p-6"},ro={class:"text-2xl font-semibold mb-6 text-gray-800 flex items-center"},io={class:"overflow-x-auto"},uo={class:"min-w-full divide-y divide-gray-200"},co={class:"bg-white divide-y divide-gray-200"},mo={class:"px-6 py-4 whitespace-nowrap"},go={class:"flex items-center"},po={class:"ml-4"},vo={class:"text-sm font-medium text-gray-900"},fo={class:"text-xs text-gray-500"},bo={class:"text-xs text-gray-500 flex items-center"},xo=["onClick"],ho={class:"px-6 py-4"},yo={class:"text-sm text-gray-900"},_o={class:"text-xs text-gray-500"},wo={class:"text-xs text-gray-500"},ko={class:"text-xs text-gray-500"},Co={class:"px-6 py-4"},No={class:"flex flex-col gap-2"},So={class:"text-sm font-medium text-gray-900 mb-1"},Io={class:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},To={class:"text-xs font-medium text-gray-700 mb-1"},Do={class:"flex flex-wrap gap-1"},Eo=["title"],$o=["title"],Lo=["onClick"],Ao={key:0},Uo={key:1},Fo={key:0,class:"w-full mt-1 flex flex-wrap gap-1"},Mo=["title"],jo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},zo={class:"mb-8 bg-white rounded-lg shadow-md overflow-hidden"},Bo={class:"p-6"},Oo={class:"text-2xl font-semibold mb-6 text-gray-800 flex items-center"},Ro={class:"ml-2 px-2 py-0.5 text-sm bg-indigo-100 text-indigo-700 rounded-full"},Po={class:"flex flex-wrap gap-2 mb-4"},Vo={class:"ml-2 bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full text-xs"},qo={class:"relative flex-grow md:max-w-xs"},Qo={class:"absolute inset-y-0 right-0 flex items-center pr-3"},Yo={class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-xl flex justify-between items-center"},Xo={class:"text-lg font-bold flex items-center"},Jo={class:"px-6 py-4 max-h-[60vh] overflow-y-auto"},Wo={class:"space-y-4"},Ho={class:"mb-6"},Go={class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},Ko={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Zo=["title"],ea=["onClick"],ta={class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},sa=["onTouchstartPassive","onTouchmove","onDragstart","onDragover","onDragenter","onDragleave","onDrop"],oa={class:"p-1.5 mr-2 rounded-md bg-gray-200 text-gray-500 drag-handle"},aa=["title"],na={class:"mx-2 px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium"},la=["onClick"],ra={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex justify-between"},ia={class:"overflow-x-auto rounded-lg border border-gray-200"},da={class:"min-w-full divide-y divide-gray-200"},ua={class:"bg-gray-50 sticky top-0 z-10"},ca={scope:"col",class:"sticky left-0 z-20 bg-indigo-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ma={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ga=["onClick"],pa={class:"bg-white divide-y divide-gray-200"},va={class:"sticky left-0 z-10 px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 bg-indigo-50"},fa={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ba={class:"flex items-center"},xa={class:"ml-3"},ha={class:"text-sm font-medium text-gray-900"},ya={class:"text-xs text-gray-500"},_a={key:0,class:"flex items-center"},wa={class:"truncate max-w-[200px]"},ka=["href"],Ca={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Na={key:0,class:"flex justify-center"},Sa=["onClick"],Ia={key:1,class:"text-gray-400"},Ta={class:"flex items-center justify-between mt-4"},Da={class:"flex items-center"},Ea={class:"text-sm text-gray-700"},$a={class:"font-medium"},La={class:"font-medium"},Aa={class:"font-medium"},Ua={class:"flex items-center space-x-2"},Fa=["disabled"],Ma={class:"flex items-center"},ja={class:"mx-2 text-sm"},za=["disabled"],Ba={class:"mb-8 bg-white rounded-lg shadow-md overflow-hidden"},Oa={class:"p-6"},Ra={class:"text-2xl font-semibold mb-6 text-gray-800 flex items-center"},Pa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Va={class:"space-y-2"},qa=["value"],Qa={class:"mt-2 text-sm text-gray-500 flex items-center"},Ya={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Xa={class:"bg-white rounded-lg p-6 max-w-lg w-full shadow-lg"},Ja={class:"text-lg font-bold mb-4 text-gray-800 flex items-center"},Wa={class:"bg-gray-100 p-4 rounded-md text-sm text-gray-800 overflow-auto border border-gray-300"},Ha={class:"space-y-2"},Ga={class:"mt-4 flex justify-end"},Ka=["disabled"],Za={key:0,class:"mt-6 space-y-4"},en={class:"p-4 bg-gray-50 rounded-lg border border-gray-200"},tn={class:"mb-4"},sn={class:"text-sm font-medium text-amber-700 flex items-center"},on={class:"mt-2"},an={key:0,class:"text-sm text-gray-500"},nn={key:1,class:"flex flex-wrap gap-2 mt-1"},ln={key:2,class:"mt-2 flex gap-2"},rn={class:"mb-4"},dn={class:"text-sm font-medium text-green-700 flex items-center"},un={class:"mt-2"},cn={key:0,class:"text-sm text-gray-500"},mn={key:1,class:"flex flex-wrap gap-2 mt-1"},gn={key:2,class:"mt-2 flex gap-2"},pn={class:"text-sm font-medium text-blue-700 flex items-center"},vn={class:"mt-2"},fn={key:0,class:"text-sm text-gray-500"},bn={key:1,class:"flex flex-wrap gap-2 mt-1"},xn={key:2,class:"mt-2 flex gap-2"},hn={class:"flex justify-between items-center p-4 border-b border-gray-200"},yn={class:"p-6"},_n={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},wn={class:"font-semibold mb-2 text-indigo-700"},kn=["src","alt"],Cn={class:"mt-2 text-center text-gray-700"},Nn={class:"text-sm text-gray-500"},Sn={key:1,class:"text-center text-gray-500 my-4"},In={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Tn={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg border-t-4 border-indigo-500"},Dn={class:"text-xl font-bold mb-4 text-indigo-600 flex items-center"},En={class:"bg-gray-100 p-4 rounded-md text-sm text-gray-800 overflow-auto max-h-40 border border-gray-300"},$n={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ln={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg border-t-4 border-red-500"},An={class:"text-xl font-bold mb-4 text-red-600 flex items-center"},Un={class:"mb-4 text-gray-600"},Fn=Ut({__name:"PitScoutingAdminView",setup(Mn){Ot.register(Rt,Pt,Vt,qt,Qt,Yt);const D=g([]),pe=g(!1),M=g(""),b=g({eventId:"",formId:"",teamNumber:""}),ve=g(!1),q=g([]),Q=g(!1),x=g(["Type of drive train","Type of wheels used","Intake Use:","Scoring Locations:","Cage Climbing:","Additional Comments"]),O=g(!1),Y=g(!1),X=g(!1),T=g([]),A=g(-1),E=g(-1),J=g(!1),re=g({top:"0px",height:"0px",width:"100%",zIndex:"-1"}),fe=g(null),ee=g(0),ie=g(0),be=g(0),xe=g(0),j=g(-1),$=g(null),te=g(!1),U=g(!1),Pe=g(0),z=g(""),W=g("asc"),I=g(1),se=g(10),oe=g(""),he=Ht.throttle(async()=>{if(!O.value){if(!b.value.eventId){Q.value=!0;return}Q.value=!1,O.value=!0;try{await De()}catch(o){console.error("Error during search:",o)}finally{O.value=!1}}},1e3,{trailing:!1}),Ve=()=>{Q.value=!1,I.value=1,he()},qe=()=>{try{const o=localStorage.getItem("selectedFields");o&&(x.value=JSON.parse(o));const e=localStorage.getItem("selectedChartTypes");e&&(T.value=JSON.parse(e))}catch(o){console.error("Error loading saved preferences:",o)}},H=()=>{localStorage.setItem("selectedFields",JSON.stringify(x.value)),localStorage.setItem("selectedChartTypes",JSON.stringify(T.value))},De=async()=>{pe.value=!0,M.value="";try{const o=Jt.getToken(),e=await Bt.get("https://api.team695.com/survey/query",{headers:{Authorization:`Bearer ${o}`}});console.log("Raw API response:",e.data);let s=[];if(e.data&&typeof e.data=="object")if(Array.isArray(e.data.data))s=e.data.data;else if(Array.isArray(e.data))s=e.data;else{console.warn("Unexpected response structure:",e.data),D.value=[],M.value="Invalid response format from server";return}if(!Array.isArray(s)||s.length===0){console.warn("No survey data found in response"),D.value=[],M.value="No survey data available";return}console.log(`Found ${s.length} survey records in API response`),D.value=s.map(n=>{if(typeof n.data=="string")try{n.data=JSON.parse(n.data)}catch(i){console.warn("Failed to parse item.data:",i),n.data={}}if((!n.data||typeof n.data!="object"||Array.isArray(n.data))&&(n.data={}),typeof n.upload=="string")try{n.upload=JSON.parse(n.upload)}catch(i){console.warn("Failed to parse item.upload:",i),n.upload={fullRobotImages:[],driveTrainImages:[]}}return(!n.upload||typeof n.upload!="object"||Array.isArray(n.upload))&&(n.upload={fullRobotImages:[],driveTrainImages:[]}),n.user_data&&!n.userData&&(n.userData=n.user_data),n}),console.log(`Successfully loaded ${D.value.length} survey records`);const a=Array.from(new Set(D.value.map(n=>n.event_id).filter(Boolean))).sort();console.log(`Available events: ${a.join(", ")}`),a.length>0&&!b.value.eventId&&(b.value.eventId=a[0],console.log(`Auto-selected first event: ${a[0]}`))}catch(o){console.error("Error fetching data:",o),o.response&&o.response.status===401?M.value="Authentication error. Please login again.":o.response&&o.response.status===304?(console.log("Data not modified (304). Using cached data if available."),D.value.length===0&&(M.value="No data available. Please refresh the page.")):M.value=o.message||"Failed to fetch data. Please try again later.",D.value.length===0&&(D.value=[])}finally{pe.value=!1}},Ee=o=>{Y.value&&(o.target.closest(".chart-selector")||(Y.value=!1))},$e=o=>{(J.value||U.value)&&o.preventDefault()};Ft(()=>{qe(),De(),document.addEventListener("click",Ee),document.addEventListener("selectstart",$e)}),Mt(()=>{document.removeEventListener("click",Ee),document.removeEventListener("selectstart",$e)});const ye=C(()=>{const o=new Set(D.value.map(e=>e.event_id).filter(e=>!!e));return Array.from(o).sort()}),N=C(()=>D.value.filter(o=>{const e=!b.value.eventId||o.event_id===b.value.eventId,s=!b.value.formId||o.form_id===b.value.formId,a=!b.value.teamNumber||w(o.data,"Team number")===b.value.teamNumber;return e&&s&&a}));Be(ye,o=>{o.length>0&&!b.value.eventId&&(b.value.eventId=o[0],console.log(`Auto-selected event from dropdown: ${o[0]}`))});const Qe=C(()=>{const o=new Set;return N.value.forEach(e=>{const s=w(e.data,"Team number");s&&o.add(s)}),o.size}),Ye=C(()=>{if(N.value.length===0)return"N/A";const o=N.value.map(s=>new Date(s.timestamp).getTime()),e=Math.max(...o);return P(new Date(e).toISOString())}),Le=C(()=>{if(!oe.value.trim())return N.value;const o=oe.value.toLowerCase();return N.value.filter(e=>{if((w(e.data,"Team number")?.toString().toLowerCase()||"").includes(o))return!0;const a=e.user_data||e.userData||{},n=a.username?.toLowerCase()||"",i=a.displayName?.toLowerCase()||"";if(n.includes(o)||i.includes(o))return!0;for(const f of x.value)if(Ce(e.data,f).toLowerCase().includes(o))return!0;return!1})}),_e=o=>{z.value===o?W.value=W.value==="asc"?"desc":"asc":(z.value=o,W.value="asc"),I.value=1},we=o=>z.value!==o?"mdi:sort":W.value==="asc"?"mdi:sort-ascending":"mdi:sort-descending",ae=C(()=>{const o=[...Le.value];return z.value?o.sort((e,s)=>{let a,n;if(z.value==="teamNumber")a=w(e.data,"Team number")||"",n=w(s.data,"Team number")||"";else if(z.value==="submittedBy"){const v=e.user_data||e.userData||{},y=s.user_data||s.userData||{};a=v.displayName||v.username||"",n=y.displayName||y.username||""}else a=w(e.data,z.value)||"",n=w(s.data,z.value)||"";if(typeof a=="number"&&typeof n=="number")return W.value==="asc"?a-n:n-a;const i=String(a).toLowerCase(),f=String(n).toLowerCase();return W.value==="asc"?i.localeCompare(f):f.localeCompare(i)}):o}),ke=C(()=>Math.max(1,Math.ceil(ae.value.length/se.value)));Be(oe,()=>{I.value=1});const Xe=C(()=>{const o=(I.value-1)*se.value;return ae.value.slice(o,o+se.value)}),Je=C(()=>ae.value.length===0?0:(I.value-1)*se.value+1),We=C(()=>ae.value.length===0?0:Math.min(I.value*se.value,ae.value.length)),He=()=>{if(N.value.length===0){le("No data to export");return}try{const o=["Team Number","Submitted By","Timestamp",...x.value],e=N.value.map(f=>{const v=f.user_data||f.userData||{},y=[w(f.data,"Team number")||"N/A",v.displayName||v.username||"Unknown",P(f.timestamp)];return x.value.forEach(L=>{y.push(Ce(f.data,L))}),y}),s=[o.join(","),...e.map(f=>f.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(a),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",`${b.value.eventId||"pit-scouting"}_export_${new Date().toISOString().slice(0,10)}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(o){console.error("Error exporting CSV:",o),le("Failed to export data")}},Ge=o=>{if(o.firstName&&o.lastName)return`${o.firstName[0]}${o.lastName[0]}`.toUpperCase();if(o.displayName){const e=o.displayName.trim().split(/\s+/);return e.length>=2?`${e[0][0]}${e[e.length-1][0]}`.toUpperCase():o.displayName.substring(0,2).toUpperCase()}return o.username?o.username.substring(0,2).toUpperCase():o.userId.substring(0,2).toUpperCase()},Ke=o=>{const e=o.user_data||o.userData||{};if(e.firstName&&e.lastName)return`${e.firstName[0]}${e.lastName[0]}`.toUpperCase();if(e.displayName){const s=e.displayName.trim().split(/\s+/);return s.length>=2?`${s[0][0]}${s[s.length-1][0]}`.toUpperCase():e.displayName.substring(0,2).toUpperCase()}return e.username?e.username.substring(0,2).toUpperCase():(e.userId||"XX").substring(0,2).toUpperCase()};C(()=>{const o={};return N.value.forEach(e=>{o[e.event_id]||(o[e.event_id]=[]),o[e.event_id].push(e)}),o});const Ze=C(()=>{const o=new Set;return N.value.forEach(e=>{Object.keys(e.data).forEach(s=>{s!=="Team number"&&o.add(s)})}),Array.from(o)}),et=C(()=>Ze.value.filter(o=>!x.value.includes(o))),tt=C(()=>{const o=new Set;return N.value.forEach(e=>{Object.entries(e.data).forEach(([s,a])=>{(Array.isArray(a)||typeof a=="string"&&a.length<50||typeof a=="number")&&o.add(s)})}),o.delete("Team number"),o.delete("Additional Comments"),Array.from(o)}),st=C(()=>{const o=/height|width|weight|length/i;return tt.value.filter(e=>!o.test(e))}),R=g({}),ot=(o,e)=>{const s=`${o}-${e}`;R.value[s]||(R.value[s]=[]),R.value[s].includes(e)?R.value[s]=R.value[s].filter(a=>a!==e):R.value[s].push(e)},Ae=(o,e)=>{const s=`${o}-${e}`;return R.value[s]?.includes(e)||!1},de=g(""),at=o=>{navigator.clipboard.writeText(o).then(()=>{de.value=o,setTimeout(()=>{de.value=""},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})},nt=o=>{if(typeof o!="string")return!1;try{return o.startsWith("http://")||o.startsWith("https://")}catch{return!1}},lt=o=>{if(!o)return"";try{const e=new URL(o),s=e.hostname,a=e.pathname,n=15,i=a.length>n?a.substring(0,n)+"...":a;return`${s}${i}`}catch{return o.length>30?o.substring(0,30)+"...":o}},Ue=C(()=>{const o={};return N.value.forEach(e=>{const s=e.user_data||e.userData;if(s&&s.userId){const a=s.userId;o[a]||(o[a]={userId:a,username:s.username||"Unknown",displayName:s.displayName||s.username||"Unknown",firstName:s.firstName,lastName:s.lastName,avatar:s.avatar||"",count:0,lastSubmission:e.timestamp,userAgent:e.user_agent||"Unknown",ip:e.ip||"Unknown",language:e.language||"Unknown",submissionsByEvent:{}}),o[a].count++;const n=e.event_id;o[a].submissionsByEvent[n]||(o[a].submissionsByEvent[n]=[]);const i=w(e.data,"Team number");i&&o[a].submissionsByEvent[n].push({id:e.id,teamNumber:String(i),timestamp:e.timestamp}),new Date(e.timestamp)>new Date(o[a].lastSubmission)&&(o[a].lastSubmission=e.timestamp)}}),Object.values(o).sort((e,s)=>s.count-e.count)}),rt=o=>{let e="Unknown";return o.includes("Chrome")&&!o.includes("Edg")?e="Chrome":o.includes("Firefox")?e="Firefox":o.includes("Safari")&&!o.includes("Chrome")?e="Safari":o.includes("Edg")?e="Edge":(o.includes("MSIE")||o.includes("Trident/"))&&(e="Internet Explorer"),o.includes("Windows")?e+=" on Windows":o.includes("Mac")?e+=" on Mac":o.includes("Linux")?e+=" on Linux":o.includes("Android")?e+=" on Android":(o.includes("iPhone")||o.includes("iPad"))&&(e+=" on iOS"),e},it=o=>o.includes("Mobile")?"Mobile":o.includes("Tablet")?"Tablet":"Desktop",w=(o,e)=>o[e],Ce=(o,e)=>{const s=w(o,e);return s==null?"N/A":Array.isArray(s)?s.join(", "):typeof s=="object"?JSON.stringify(s):String(s)},B=o=>o.endsWith(":")?o.slice(0,-1):o,P=o=>{if(!o)return"N/A";try{return new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return o}},dt=o=>{const e={};N.value.forEach(n=>{const i=w(n.data,o),f=w(n.data,"Team number");if(Array.isArray(i))i.forEach(v=>{e[v]||(e[v]=[]),e[v].push(f)});else if(i!=null){const v=String(i);e[v]||(e[v]=[]),e[v].push(f)}});const s=Object.entries(e).map(([n,i],f)=>{const v=f*137%360;return{label:n,data:[i.length],backgroundColor:`hsla(${v}, 70%, 60%, 0.2)`,borderColor:`hsla(${v}, 70%, 60%, 1)`,borderWidth:1,teamNumbers:i}});return{data:{labels:[""],datasets:s}}},ut=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{callbacks:{label:o=>{const e=o.dataset.label||"",s=o.parsed.y||0,a=o.dataset.teamNumbers||[];return[`${e}: ${s} teams`,"Teams:",...a.map(n=>`  ${n}`)]}}}},scales:{x:{display:!1,ticks:{callback:(o,e,s)=>{const a=s[e].label||"";return a.length>20?a.substring(0,20)+"...":a},maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{precision:0}}}}),ct=o=>o.upload?.fullRobotImages&&o.upload.fullRobotImages.length>0||o.upload?.driveTrainImages&&o.upload.driveTrainImages.length>0,mt=o=>{q.value=[],o.upload?.fullRobotImages&&q.value.push(...o.upload.fullRobotImages.map(e=>({...e,category:"Full Robot"}))),o.upload?.driveTrainImages&&q.value.push(...o.upload.driveTrainImages.map(e=>({...e,category:"Drive Train"}))),ve.value=!0},Fe=()=>{ve.value=!1,q.value=[]},gt=o=>{if(o===0)return"0 Bytes";const e=1024,s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(o)/Math.log(e));return parseFloat((o/Math.pow(e,a)).toFixed(2))+" "+s[a]},pt=o=>{const e=T.value.indexOf(o);e===-1?T.value.push(o):T.value.splice(e,1),H()},vt=()=>{window.getSelection()?.removeAllRanges(),document.addEventListener("selectstart",o=>(o.preventDefault(),!1),{once:!0})},ft=(o,e)=>{if(window.getSelection()?.removeAllRanges(),A.value=e,J.value=!0,o.dataTransfer){o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain",e.toString());const s=o.currentTarget,a=s.getBoundingClientRect();re.value={top:`${s.offsetTop}px`,height:`${a.height}px`,width:"100%",zIndex:"-1"},document.body.classList.add("dragging-active")}},bt=(o,e)=>{if(o.preventDefault(),A.value!==-1&&A.value!==e){const s=o.currentTarget;re.value={top:`${s.offsetTop}px`,height:`${s.offsetHeight}px`,width:"100%",zIndex:"1"}}},xt=(o,e)=>{E.value=e,o.currentTarget.classList.add("bg-indigo-100","border-2","border-indigo-500")},ht=(o,e)=>{E.value===e&&(E.value=-1),o.currentTarget.classList.remove("bg-indigo-100","border-2","border-indigo-500")},yt=(o,e)=>{if(o.preventDefault(),o.currentTarget.classList.remove("bg-indigo-100","border-2","border-indigo-500"),A.value!==-1&&A.value!==e){const a=x.value[A.value];x.value.splice(A.value,1),x.value.splice(e,0,a),H()}E.value=-1},_t=()=>{J.value=!1,A.value=-1,E.value=-1,document.body.classList.remove("dragging-active"),document.querySelectorAll(".bg-indigo-100, .border-indigo-500").forEach(o=>{o.classList.remove("bg-indigo-100","border-2","border-indigo-500")})},wt=(o,e)=>{ee.value=o.touches[0].clientY,ie.value=o.touches[0].clientX,be.value=ee.value,xe.value=ie.value,j.value=e,$.value=o.currentTarget,Pe.value=Date.now(),te.value=!1,U.value=!1,setTimeout(()=>{!te.value&&!U.value&&(U.value=!0,$.value?.classList.add("bg-indigo-200","shadow-lg","scale-[1.02]","z-10"),J.value=!0)},200)},kt=(o,e)=>{if($.value===null||j.value===-1)return;const s=o.touches[0].clientY,a=o.touches[0].clientX,n=s-ee.value,i=a-ie.value;if(be.value=s,xe.value=a,!U.value&&!te.value&&Math.abs(i)>Math.abs(n)){te.value=!0;return}if(!U.value)return;const f=fe.value;if(!f||!f.children)return;const v=Array.from(f.children);let y=-1;for(let L=0;L<v.length;L++){const ze=v[L].getBoundingClientRect();if(s>=ze.top&&s<=ze.bottom){y=L;break}}if(y!==-1&&y!==j.value&&(v.forEach(L=>{L.classList.remove("border-2","border-indigo-500")}),v[y].classList.add("border-2","border-indigo-500"),re.value={top:`${v[y].offsetTop}px`,height:`${v[y].offsetHeight}px`,width:"100%",zIndex:"1"},E.value=y),U.value){const L=s-ee.value;$.value.style.transform=`translateY(${L}px) scale(1.02)`,o.preventDefault()}},Me=o=>{if(!($.value===null||j.value===-1)){if($.value.style.transform="",U.value){const e=fe.value;if(e&&e.children){if(E.value!==-1&&E.value!==j.value){const s=x.value[j.value];x.value.splice(j.value,1),x.value.splice(E.value,0,s),H()}Array.from(e.children).forEach(s=>{s.classList.remove("border-2","border-indigo-500")})}}Ct()}},Ct=()=>{$.value&&($.value.classList.remove("bg-indigo-200","shadow-lg","scale-[1.02]","z-10"),$.value.style.transform=""),ee.value=0,ie.value=0,be.value=0,xe.value=0,j.value=-1,$.value=null,U.value=!1,te.value=!1,J.value=!1,E.value=-1},Nt=o=>{x.value.includes(o)||(x.value.push(o),H())},St=o=>{const e=x.value.indexOf(o);e!==-1&&(x.value.splice(e,1),H())},It=()=>{x.value=["Type of drive train","Type of wheels used","Intake Use:","Scoring Locations:","Cage Climbing:","Additional Comments"],H()},V=g(""),ne=g(""),k=g({show:!1,matched:[],missing:[],extra:[]}),Tt=()=>{if(!V.value||!ne.value.trim())return;const o=ne.value.split(/[\n,]+/).map(i=>i.trim()).filter(i=>i!=="").sort((i,f)=>{const v=parseInt(i),y=parseInt(f);return!isNaN(v)&&!isNaN(y)?v-y:i.localeCompare(f)}),e=D.value.filter(i=>i.event_id===V.value).map(i=>w(i.data,"Team number")).filter(i=>i!=null).sort((i,f)=>{const v=parseInt(i),y=parseInt(f);return!isNaN(v)&&!isNaN(y)?v-y:i.localeCompare(f)}),s=o.filter(i=>e.includes(i)),a=o.filter(i=>!e.includes(i)),n=e.filter(i=>!o.includes(i));k.value={show:!0,matched:s,missing:a,extra:n}},Ne=g(!1),Se=C(()=>{const[o,e]=(V.value||"your_event_code").split("_"),s=parseInt(o)||new Date().getFullYear(),a=e?.toLowerCase()||"your_event_code";return`SELECT DISTINCT team_master_tm_number FROM game_matchup WHERE frc_season_master_sm_year = ${s} AND competition_master_cm_event_code = '${a}'`}),Dt=()=>{if(!V.value){le("Please select an event first.");return}Ne.value=!0},Et=()=>{Ne.value=!1},$t=()=>{navigator.clipboard.writeText(Se.value).then(()=>{ue.value=!0,Te.value=Se.value}).catch(()=>{le("Failed to copy SQL query.")})},Ie=g(!1),je=g(""),ue=g(!1),Te=g(""),le=o=>{je.value=o,Ie.value=!0},Lt=()=>{ue.value=!1},At=()=>{Ie.value=!1},G=(o,e)=>{const s=e==="line"?o.join(`
`):o.join(", ");navigator.clipboard.writeText(s).then(()=>{Te.value=s,ue.value=!0}).catch(a=>{console.error("Failed to copy text:",a),le("Failed to copy teams to clipboard.")})};return(o,e)=>(r(),l(h,null,[t("div",Gt,[e[75]||(e[75]=t("div",{class:"bg-gradient-to-r from-blue-500 to-indigo-600 pb-32 rounded-b-md md:rounded-b-xl w-full"},[t("header",{class:"py-10"},[t("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},[t("h1",{class:"text-center text-3xl font-bold tracking-tight text-white"},"Pit Scouting Dashboard")])])],-1)),t("main",Kt,[t("div",Zt,[t("div",es,[t("h2",ts,[u(c(m),{icon:"mdi:magnify",class:"mr-2 text-indigo-500"}),e[27]||(e[27]=p(" Search Filters ",-1))]),t("form",{onSubmit:e[3]||(e[3]=F((...s)=>c(he)&&c(he)(...s),["prevent"])),class:"space-y-6"},[t("div",ss,[t("div",os,[K(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value.eventId=s),id:"eventId",onChange:Ve,class:Z(["w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 bg-white",{"border-red-500 focus:ring-red-500 focus:border-red-500":Q.value}])},[e[28]||(e[28]=t("option",{value:""},"Select an Event",-1)),(r(!0),l(h,null,_(ye.value,s=>(r(),l("option",{key:s,value:s},d(s),9,as))),128))],34),[[Oe,b.value.eventId]]),t("label",{for:"eventId",class:Z(["absolute -top-2.5 left-2 bg-white px-1 text-xs font-medium",Q.value?"text-red-600":"text-indigo-600"])},[...e[29]||(e[29]=[p(" Event ID ",-1),t("span",{class:"text-red-500"},"*",-1)])],2),Q.value?(r(),l("p",ns," Please select an event to view data ")):S("",!0)]),t("div",ls,[K(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>b.value.formId=s),type:"text",id:"formId",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 bg-white",placeholder:"Enter Form ID",disabled:!b.value.eventId},null,8,rs),[[ce,b.value.formId]]),e[30]||(e[30]=t("label",{for:"formId",class:"absolute -top-2.5 left-2 bg-white px-1 text-xs font-medium text-indigo-600"}," Form ID ",-1))]),t("div",is,[K(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.value.teamNumber=s),type:"text",id:"teamNumber",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 bg-white",placeholder:"Enter Team Number",disabled:!b.value.eventId},null,8,ds),[[ce,b.value.teamNumber]]),e[31]||(e[31]=t("label",{for:"teamNumber",class:"absolute -top-2.5 left-2 bg-white px-1 text-xs font-medium text-indigo-600"}," Team Number ",-1))])]),t("div",us,[t("button",{type:"submit",disabled:O.value||!b.value.eventId,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-all duration-300 transform hover:-translate-y-1 flex items-center shadow-md disabled:opacity-50 disabled:cursor-not-allowed"},[u(c(m),{icon:O.value?"mdi:loading":"mdi:magnify",class:Z([{"animate-spin":O.value},"mr-2"])},null,8,["icon","class"]),p(" "+d(O.value?"Searching...":"Search"),1)],8,cs)])],32)])]),b.value.eventId?pe.value?(r(),l("div",gs,[...e[34]||(e[34]=[t("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-r-4 border-indigo-600 border-b-4 border-l-4 border-transparent"},null,-1),t("p",{class:"mt-4 text-lg text-gray-600"},"Loading data...",-1)])])):M.value?(r(),l("div",ps,[t("div",vs,[u(c(m),{icon:"mdi:alert-circle",class:"text-2xl mr-2"}),e[35]||(e[35]=t("p",{class:"font-bold"},"Error",-1))]),t("p",fs,d(M.value),1)])):N.value.length===0?(r(),l("div",bs,[u(c(m),{icon:"mdi:robot-confused",class:"text-6xl text-gray-400 mb-4"}),e[36]||(e[36]=t("p",{class:"text-xl text-gray-600"}," No data available for the selected event. ",-1)),e[37]||(e[37]=t("p",{class:"text-gray-500 mt-2"}," Try adjusting your search criteria or selecting a different event. ",-1))])):(r(),l("div",xs,[t("section",hs,[t("div",ys,[t("h2",_s,[u(c(m),{icon:"mdi:chart-donut",class:"mr-2 text-indigo-500"}),p(" Event Summary: "+d(b.value.eventId),1)]),t("div",ws,[t("div",ks,[t("div",Cs,[t("div",Ns,[u(c(m),{icon:"mdi:account-group",class:"text-2xl"})]),t("div",Ss,[e[38]||(e[38]=t("p",{class:"text-sm font-medium text-blue-600"},"Total Teams",-1)),t("p",Is,d(Qe.value),1)])])]),t("div",Ts,[t("div",Ds,[t("div",Es,[u(c(m),{icon:"mdi:clipboard-text",class:"text-2xl"})]),t("div",$s,[e[39]||(e[39]=t("p",{class:"text-sm font-medium text-purple-600"},"Total Forms",-1)),t("p",Ls,d(N.value.length),1)])])]),t("div",As,[t("div",Us,[t("div",Fs,[u(c(m),{icon:"mdi:account-check",class:"text-2xl"})]),t("div",Ms,[e[40]||(e[40]=t("p",{class:"text-sm font-medium text-green-600"},"Unique Scouts",-1)),t("p",js,d(Ue.value.length),1)])])]),t("div",zs,[t("div",Bs,[t("div",Os,[u(c(m),{icon:"mdi:clock-outline",class:"text-2xl"})]),t("div",Rs,[e[41]||(e[41]=t("p",{class:"text-sm font-medium text-amber-600"},"Last Updated",-1)),t("p",Ps,d(Ye.value),1)])])])])])]),N.value.length>0?(r(),l("section",Vs,[t("div",qs,[t("h2",Qs,[u(c(m),{icon:"mdi:chart-bar",class:"mr-2 text-indigo-500"}),e[42]||(e[42]=p(" Data Visualization ",-1))]),t("div",Ys,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Charts to Display ",-1)),t("div",{class:"relative chart-selector",onClick:e[5]||(e[5]=F(()=>{},["stop"]))},[t("button",{onClick:e[4]||(e[4]=F(s=>Y.value=!Y.value,["stop"])),class:"w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-left flex justify-between items-center hover:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t("span",Xs,d(T.value.length?`${T.value.length} charts selected`:"Select charts"),1),u(c(m),{icon:Y.value?"mdi:chevron-up":"mdi:chevron-down"},null,8,["icon"])]),Y.value?(r(),l("div",Js,[t("div",Ws,[(r(!0),l(h,null,_(st.value,s=>(r(),l("div",{key:s,class:"flex items-center px-3 py-2 hover:bg-gray-50 rounded-md cursor-pointer",onClick:F(a=>pt(s),["stop"])},[t("input",{type:"checkbox",checked:T.value.includes(s),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Gs),t("span",{class:"ml-2 truncate",title:B(s)},d(B(s)),9,Ks)],8,Hs))),128))])])):S("",!0)])]),T.value.length>0?(r(),l("div",Zs,[t("div",eo,[(r(!0),l(h,null,_(T.value,(s,a)=>(r(),l("div",{key:s,class:Z([{"md:col-span-2":T.value.length%2!==0&&a===T.value.length-1},"bg-gray-50 p-4 rounded-lg shadow-md border-2 border-dashed border-blue-300 hover:border-blue-500 transition-colors duration-200"])},[t("h3",to,[t("span",so,d(a+1),1),p(" "+d(B(s)),1)]),t("div",oo,[u(c(Xt),{data:dt(s).data,options:ut()},null,8,["data","options"])])],2))),128))])])):(r(),l("div",ao,[u(c(m),{icon:"mdi:chart-line",class:"text-4xl text-gray-400 mb-2"}),e[44]||(e[44]=t("p",{class:"text-gray-600"},"Select charts to display visualization",-1))]))])])):S("",!0),t("section",no,[t("div",lo,[t("h2",ro,[u(c(m),{icon:"mdi:account-group",class:"mr-2 text-indigo-500"}),e[45]||(e[45]=p(" Submission Users ",-1))]),t("div",io,[t("table",uo,[e[47]||(e[47]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User Info "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Device Info "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Submissions "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Submission ")])],-1)),t("tbody",co,[(r(!0),l(h,null,_(Ue.value,s=>(r(),l("tr",{key:s.userId,class:"hover:bg-gray-50"},[t("td",mo,[t("div",go,[u(Re,{userId:s.userId,initial:Ge(s),src:s.avatar,size:40,firstName:s.firstName||"",lastName:s.lastName||"",displayName:s.displayName,alt:"User Avatar",class:"rounded-full object-cover border-2 border-indigo-100"},null,8,["userId","initial","src","firstName","lastName","displayName"]),t("div",po,[t("div",vo,d(s.displayName),1),t("div",fo,"@"+d(s.username),1),t("div",bo,[p(" ID: "+d(s.userId.substring(0,8))+"... ",1),t("button",{onClick:a=>at(s.userId),class:Z(["ml-1 p-1 text-gray-400 hover:text-indigo-600 transition-colors duration-200",{"text-green-500":de.value===s.userId}])},[u(c(m),{icon:de.value===s.userId?"mdi:check":"mdi:content-copy",class:"h-3.5 w-3.5"},null,8,["icon"])],10,xo)])])])]),t("td",ho,[t("div",yo,d(rt(s.userAgent)),1),t("div",_o,d(it(s.userAgent)),1),t("div",wo,d(s.ip),1),t("div",ko,"Language: "+d(s.language),1)]),t("td",Co,[t("div",No,[t("div",So,[e[46]||(e[46]=p(" Total: ",-1)),t("span",Io,d(s.count),1)]),(r(!0),l(h,null,_(s.submissionsByEvent,(a,n)=>(r(),l("div",{key:n,class:"mb-2"},[t("div",To,d(n)+":",1),t("div",Do,[a.length<=4?(r(!0),l(h,{key:0},_(a,i=>(r(),l("span",{key:i.id,class:"px-2 py-1 text-xs leading-4 font-medium rounded-full bg-indigo-50 text-indigo-700 border border-indigo-100",title:`Submitted on ${P(i.timestamp)}`},d(i.teamNumber),9,Eo))),128)):(r(),l(h,{key:1},[(r(!0),l(h,null,_(a.slice(0,3),i=>(r(),l("span",{key:i.id,class:"px-2 py-1 text-xs leading-4 font-medium rounded-full bg-indigo-50 text-indigo-700 border border-indigo-100",title:`Submitted on ${P(i.timestamp)}`},d(i.teamNumber),9,$o))),128)),t("button",{onClick:i=>ot(s.userId,n),class:"px-2 py-1 text-xs leading-4 font-medium rounded-full bg-blue-100 text-blue-700 border border-blue-200 hover:bg-blue-200 transition-colors duration-200"},[Ae(s.userId,n)?(r(),l("span",Ao,"Collapse")):(r(),l("span",Uo,"+"+d(a.length-3)+" more",1))],8,Lo),Ae(s.userId,n)?(r(),l("div",Fo,[(r(!0),l(h,null,_(a.slice(3),i=>(r(),l("span",{key:i.id,class:"px-2 py-1 text-xs leading-4 font-medium rounded-full bg-green-50 text-green-700 border border-green-200",title:`Submitted on ${P(i.timestamp)}`},d(i.teamNumber),9,Mo))),128))])):S("",!0)],64))])]))),128))])]),t("td",jo,d(P(s.lastSubmission)),1)]))),128))])])])])]),t("section",zo,[t("div",Bo,[t("h2",Oo,[u(c(m),{icon:"mdi:table",class:"mr-2 text-indigo-500"}),p(" Form Data: "+d(b.value.eventId)+" ",1),t("span",Ro,d(N.value.length)+" forms ",1)]),t("div",Po,[t("button",{onClick:e[6]||(e[6]=s=>X.value=!X.value),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[u(c(m),{icon:"mdi:table-column",class:"-ml-1 mr-2 h-5 w-5 text-gray-500"}),e[48]||(e[48]=p(" Customize Columns ",-1)),t("span",Vo,d(x.value.length),1)]),t("button",{onClick:He,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[u(c(m),{icon:"mdi:file-export",class:"-ml-1 mr-2 h-5 w-5 text-green-500"}),e[49]||(e[49]=p(" Export CSV ",-1))]),t("div",qo,[K(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>oe.value=s),type:"text",placeholder:"Quick filter...",class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[ce,oe.value]]),t("div",Qo,[u(c(m),{icon:"mdi:filter",class:"h-5 w-5 text-gray-400"})])])]),X.value?(r(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-start justify-center pt-16 z-50 transition-all duration-300",onClick:e[13]||(e[13]=s=>X.value=!1)},[t("div",{class:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 transform transition-all duration-300 scale-100 opacity-100",onClick:e[12]||(e[12]=F(()=>{},["stop"]))},[t("div",Yo,[t("h3",Xo,[u(c(m),{icon:"mdi:view-column-outline",class:"mr-2 w-5 h-5"}),e[50]||(e[50]=p(" Customize Columns ",-1))]),t("button",{onClick:e[8]||(e[8]=s=>X.value=!1),class:"text-white hover:text-gray-200 transition-colors duration-200 focus:outline-none"},[u(c(m),{icon:"mdi:close",class:"w-6 h-6"})])]),t("div",Jo,[t("div",Wo,[t("div",Ho,[t("h4",Go,[u(c(m),{icon:"mdi:playlist-plus",class:"mr-2 w-5 h-5 text-blue-500"}),e[51]||(e[51]=p(" Available Fields ",-1))]),t("div",Ko,[(r(!0),l(h,null,_(et.value,s=>(r(),l("div",{key:s,class:"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100 transition-all duration-200 group"},[t("span",{class:"truncate flex-1 text-gray-800",title:B(s)},d(B(s)),9,Zo),t("button",{onClick:a=>Nt(s),class:"ml-2 p-1.5 rounded-full bg-white text-blue-500 hover:text-white hover:bg-blue-500 transition-all duration-200 shadow-sm hover:shadow transform hover:scale-105"},[u(c(m),{icon:"mdi:plus",class:"w-4 h-4"})],8,ea)]))),128))])]),e[53]||(e[53]=t("div",{class:"border-t border-gray-200 my-4 opacity-60"},null,-1)),t("div",null,[t("h4",ta,[u(c(m),{icon:"mdi:sort",class:"mr-2 w-5 h-5 text-indigo-500"}),e[52]||(e[52]=p(" Selected Fields (Drag to reorder) ",-1))]),t("div",{class:"space-y-2 relative",ref_key:"draggableContainer",ref:fe},[J.value?(r(),l("div",{key:0,class:"absolute border-2 border-dashed border-indigo-500 bg-indigo-100 bg-opacity-70 rounded-lg p-3 pointer-events-none transition-all duration-200",style:jt(re.value)},null,4)):S("",!0),(r(!0),l(h,null,_(x.value,(s,a)=>(r(),l("div",{key:s,class:Z(["flex items-center p-3 rounded-lg transition-all duration-200 select-none",[A.value===a?"bg-indigo-200 shadow-lg scale-[1.02] z-10":"bg-gray-50",E.value===a?"border-2 border-indigo-500":"border border-gray-200","hover:bg-gray-100"]]),ref_for:!0,ref:"draggableItems",onTouchstartPassive:n=>wt(n,a),onTouchmove:F(n=>kt(n),["prevent"]),onTouchend:e[9]||(e[9]=n=>Me()),onTouchcancel:e[10]||(e[10]=n=>Me()),draggable:"true",onDragstart:n=>ft(n,a),onDragover:F(n=>bt(n,a),["prevent"]),onDragenter:F(n=>xt(n,a),["prevent"]),onDragleave:n=>ht(n,a),onDrop:n=>yt(n,a),onDragend:_t,onMousedown:vt},[t("div",oa,[u(c(m),{icon:"mdi:drag",class:"w-4 h-4"})]),t("span",{class:"truncate flex-1 text-gray-800",title:B(s)},d(B(s)),9,aa),t("span",na,d(a+1),1),t("button",{onClick:n=>St(s),class:"p-1.5 rounded-full bg-white text-red-400 hover:text-white hover:bg-red-500 transition-all duration-200 shadow-sm hover:shadow transform hover:scale-105"},[u(c(m),{icon:"mdi:close",class:"w-4 h-4"})],8,la)],42,sa))),128))],512)])])]),t("div",ra,[t("button",{onClick:It,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-all duration-200 flex items-center"},[u(c(m),{icon:"mdi:refresh",class:"mr-2 w-4 h-4"}),e[54]||(e[54]=p(" Reset to Default ",-1))]),t("button",{onClick:e[11]||(e[11]=s=>X.value=!1),class:"px-5 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200 transform hover:translate-y-[-1px] flex items-center"},[u(c(m),{icon:"mdi:check",class:"mr-2 w-4 h-4"}),e[55]||(e[55]=p(" Done ",-1))])])])])):S("",!0),t("div",ia,[t("table",da,[t("thead",ua,[t("tr",null,[t("th",ca,[e[56]||(e[56]=p(" Team Number ",-1)),t("button",{onClick:e[14]||(e[14]=s=>_e("teamNumber")),class:"ml-1 inline-flex"},[u(c(m),{icon:we("teamNumber"),class:"h-4 w-4"},null,8,["icon"])])]),t("th",ma,[e[57]||(e[57]=p(" Submitted By ",-1)),t("button",{onClick:e[15]||(e[15]=s=>_e("submittedBy")),class:"ml-1 inline-flex"},[u(c(m),{icon:we("submittedBy"),class:"h-4 w-4"},null,8,["icon"])])]),(r(!0),l(h,null,_(x.value,s=>(r(),l("th",{key:s,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[p(d(B(s))+" ",1),t("button",{onClick:a=>_e(s),class:"ml-1 inline-flex"},[u(c(m),{icon:we(s),class:"h-4 w-4"},null,8,["icon"])],8,ga)]))),128)),e[58]||(e[58]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Images ",-1))])]),t("tbody",pa,[(r(!0),l(h,null,_(Xe.value,s=>(r(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-150"},[t("td",va,d(w(s.data,"Team number")||"N/A"),1),t("td",fa,[t("div",ba,[u(Re,{userId:s.user_data?.userId||s.userData?.userId||"",initial:Ke(s),src:s.user_data?.avatar||s.userData?.avatar,size:32,firstName:s.user_data?.firstName||s.userData?.firstName||"",lastName:s.user_data?.lastName||s.userData?.lastName||"",displayName:s.user_data?.displayName||s.userData?.displayName||s.user_data?.username||s.userData?.username||"Unknown",alt:"User Avatar",class:"rounded-full object-cover"},null,8,["userId","initial","src","firstName","lastName","displayName"]),t("div",xa,[t("div",ha,d(s.user_data?.displayName||s.userData?.displayName||s.user_data?.username||s.userData?.username||"Unknown"),1),t("div",ya,d(P(s.timestamp)),1)])])]),(r(!0),l(h,null,_(x.value,a=>(r(),l("td",{key:a,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},[nt(w(s.data,a))?(r(),l("div",_a,[t("span",wa,d(lt(w(s.data,a))),1),t("a",{href:w(s.data,a),target:"_blank",rel:"noopener noreferrer",class:"ml-1 text-indigo-500 hover:text-indigo-700"},[u(c(m),{icon:"mdi:open-in-new",class:"h-4 w-4"})],8,ka)])):(r(),l(h,{key:1},[p(d(Ce(s.data,a)),1)],64))]))),128)),t("td",Ca,[ct(s)?(r(),l("div",Na,[t("button",{onClick:a=>mt(s),class:"text-indigo-600 hover:text-indigo-900 transition-colors duration-150"},[u(c(m),{icon:"mdi:image",class:"text-xl"})],8,Sa)])):(r(),l("span",Ia,"No images"))])]))),128))])])]),t("div",Ta,[t("div",Da,[t("span",Ea,[e[59]||(e[59]=p(" Showing ",-1)),t("span",$a,d(Je.value),1),e[60]||(e[60]=p(" to ",-1)),t("span",La,d(We.value),1),e[61]||(e[61]=p(" of ",-1)),t("span",Aa,d(Le.value.length),1),e[62]||(e[62]=p(" results ",-1))])]),t("div",Ua,[t("button",{onClick:e[16]||(e[16]=s=>I.value=Math.max(1,I.value-1)),disabled:I.value===1,class:"px-3 py-1 rounded border border-gray-300 bg-white text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},[u(c(m),{icon:"mdi:chevron-left",class:"h-5 w-5"})],8,Fa),t("div",Ma,[t("span",ja,"Page "+d(I.value)+" of "+d(ke.value),1)]),t("button",{onClick:e[17]||(e[17]=s=>I.value=Math.min(ke.value,I.value+1)),disabled:I.value===ke.value,class:"px-3 py-1 rounded border border-gray-300 bg-white text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},[u(c(m),{icon:"mdi:chevron-right",class:"h-5 w-5"})],8,za)])])])]),t("section",Ba,[t("div",Oa,[t("h2",Ra,[u(c(m),{icon:"carbon:compare",class:"mr-2 text-indigo-500"}),e[63]||(e[63]=p(" Team Comparison ",-1))]),t("div",Pa,[t("div",Va,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-700"},"Select Event to Compare",-1)),K(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>V.value=s),class:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[e[64]||(e[64]=t("option",{value:""},"Select an event",-1)),(r(!0),l(h,null,_(ye.value,s=>(r(),l("option",{key:s,value:s},d(s),9,qa))),128))],512),[[Oe,V.value]]),t("div",Qa,[u(c(m),{icon:"mdi:information-outline",class:"mr-1 text-blue-500"}),e[65]||(e[65]=t("span",null,"Need help? ",-1)),t("button",{onClick:Dt,class:"ml-1 text-blue-600 hover:text-blue-800 underline focus:outline-none"}," Click here to view SQL query ")])]),u(ge,{name:"fade"},{default:me(()=>[Ne.value?(r(),l("div",Ya,[t("div",Xa,[t("h3",Ja,[u(c(m),{icon:"mdi:database",class:"mr-2 text-indigo-500"}),e[67]||(e[67]=p(" SQL Query for Event Teams ",-1))]),e[68]||(e[68]=t("p",{class:"text-sm text-gray-600 mb-4"}," Use the following SQL query to retrieve all teams for the selected event: ",-1)),t("div",Wa,[t("pre",null,d(Se.value),1)]),t("div",{class:"flex justify-end mt-4"},[t("button",{onClick:$t,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 shadow-md mr-2"}," Copy SQL "),t("button",{onClick:Et,class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 shadow-md"}," Close ")])])])):S("",!0)]),_:1}),t("div",Ha,[e[69]||(e[69]=t("label",{class:"block text-sm font-medium text-gray-700"}," Enter Team Numbers (one per line or comma-separated) ",-1)),K(t("textarea",{"onUpdate:modelValue":e[19]||(e[19]=s=>ne.value=s),rows:"4",class:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter team numbers here..."},null,512),[[ce,ne.value]])])]),t("div",Ga,[t("button",{onClick:Tt,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center",disabled:!V.value||!ne.value.trim()},[u(c(m),{icon:"mdi:compare-horizontal",class:"mr-2"}),e[70]||(e[70]=p(" Compare Teams ",-1))],8,Ka)]),k.value.show?(r(),l("div",Za,[t("div",en,[e[74]||(e[74]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"Comparison Results",-1)),t("div",tn,[t("h4",sn,[u(c(m),{icon:"mdi:alert-circle-outline",class:"mr-1"}),e[71]||(e[71]=p(" Missing Teams (not found in submission data) ",-1))]),t("div",on,[k.value.missing.length===0?(r(),l("div",an," No missing teams found ")):(r(),l("div",nn,[(r(!0),l(h,null,_(k.value.missing,s=>(r(),l("span",{key:s,class:"px-2 py-1 text-xs font-medium rounded-full bg-amber-50 text-amber-700 border border-amber-200"},d(s),1))),128))])),k.value.missing.length>0?(r(),l("div",ln,[t("button",{onClick:e[20]||(e[20]=s=>G(k.value.missing,"line")),class:"px-3 py-1 text-xs font-medium rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors duration-200"}," Copy (One per Line) "),t("button",{onClick:e[21]||(e[21]=s=>G(k.value.missing,"comma")),class:"px-3 py-1 text-xs font-medium rounded bg-green-500 text-white hover:bg-green-600 transition-colors duration-200"}," Copy (Comma Separated) ")])):S("",!0)])]),t("div",rn,[t("h4",dn,[u(c(m),{icon:"mdi:check-circle-outline",class:"mr-1"}),e[72]||(e[72]=p(" Matched Teams (found in submission data) ",-1))]),t("div",un,[k.value.matched.length===0?(r(),l("div",cn," No matched teams found ")):(r(),l("div",mn,[(r(!0),l(h,null,_(k.value.matched,s=>(r(),l("span",{key:s,class:"px-2 py-1 text-xs font-medium rounded-full bg-green-50 text-green-700 border border-green-200"},d(s),1))),128))])),k.value.matched.length>0?(r(),l("div",gn,[t("button",{onClick:e[22]||(e[22]=s=>G(k.value.matched,"line")),class:"px-3 py-1 text-xs font-medium rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors duration-200"}," Copy (One per Line) "),t("button",{onClick:e[23]||(e[23]=s=>G(k.value.matched,"comma")),class:"px-3 py-1 text-xs font-medium rounded bg-green-500 text-white hover:bg-green-600 transition-colors duration-200"}," Copy (Comma Separated) ")])):S("",!0)])]),t("div",null,[t("h4",pn,[u(c(m),{icon:"mdi:information-outline",class:"mr-1"}),e[73]||(e[73]=p(" Additional Teams (in submission but not in your input list) ",-1))]),t("div",vn,[k.value.extra.length===0?(r(),l("div",fn," No additional teams found ")):(r(),l("div",bn,[(r(!0),l(h,null,_(k.value.extra,s=>(r(),l("span",{key:s,class:"px-2 py-1 text-xs font-medium rounded-full bg-blue-50 text-blue-700 border border-blue-200"},d(s),1))),128))])),k.value.extra.length>0?(r(),l("div",xn,[t("button",{onClick:e[24]||(e[24]=s=>G(k.value.extra,"line")),class:"px-3 py-1 text-xs font-medium rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors duration-200"}," Copy (One per Line) "),t("button",{onClick:e[25]||(e[25]=s=>G(k.value.extra,"comma")),class:"px-3 py-1 text-xs font-medium rounded bg-green-500 text-white hover:bg-green-600 transition-colors duration-200"}," Copy (Comma Separated) ")])):S("",!0)])])])])):S("",!0)])])])):(r(),l("div",ms,[u(c(m),{icon:"mdi:information-outline",class:"text-6xl text-indigo-400 mb-4"}),e[32]||(e[32]=t("p",{class:"text-xl text-gray-600 mb-2"}," Please select an event to view data ",-1)),e[33]||(e[33]=t("p",{class:"text-gray-500 max-w-md"}," Selecting an event helps organize the data and improves performance ",-1))]))])]),u(ge,{name:"fade"},{default:me(()=>[ve.value?(r(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:Fe},[t("div",{class:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e[26]||(e[26]=F(()=>{},["stop"]))},[t("div",hn,[e[76]||(e[76]=t("h3",{class:"text-xl font-semibold text-gray-800"},"Robot Images",-1)),t("button",{onClick:Fe,class:"text-gray-500 hover:text-gray-700 transition-colors duration-150 rounded-full p-1 hover:bg-gray-100"},[u(c(m),{icon:"mdi:close",class:"text-2xl"})])]),t("div",yn,[q.value.length>0?(r(),l("div",_n,[(r(!0),l(h,null,_(q.value,(s,a)=>(r(),l("div",{key:a,class:"flex flex-col items-center bg-gray-50 p-4 rounded-lg"},[t("h4",wn,d(s.category),1),t("img",{src:s.url,alt:s.name,class:"max-w-full max-h-[40vh] object-contain rounded-lg shadow-md"},null,8,kn),t("p",Cn,d(s.name),1),t("p",Nn,d(gt(s.size)),1)]))),128))])):(r(),l("p",Sn,"No images available"))])])])):S("",!0)]),_:1}),u(ge,{name:"fade"},{default:me(()=>[ue.value?(r(),l("div",In,[t("div",Tn,[t("h3",Dn,[u(c(m),{icon:"mdi:check-circle",class:"mr-2 text-indigo-600"}),e[77]||(e[77]=p(" Copied Teams ",-1))]),e[78]||(e[78]=t("p",{class:"mb-4 text-gray-600"}," The following teams have been copied to your clipboard: ",-1)),t("div",En,[t("pre",null,d(Te.value),1)]),t("div",{class:"flex justify-end mt-4"},[t("button",{onClick:Lt,class:"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 shadow-md"}," Close ")])])])):S("",!0)]),_:1}),u(ge,{name:"fade"},{default:me(()=>[Ie.value?(r(),l("div",$n,[t("div",Ln,[t("h3",An,[u(c(m),{icon:"mdi:alert-circle",class:"mr-2 text-red-600"}),e[79]||(e[79]=p(" Error ",-1))]),t("p",Un,d(je.value),1),t("div",{class:"flex justify-end"},[t("button",{onClick:At,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 shadow-md"}," Close ")])])])):S("",!0)]),_:1})],64))}}),qn=Wt(Fn,[["__scopeId","data-v-d076f79a"]]);export{qn as default};
